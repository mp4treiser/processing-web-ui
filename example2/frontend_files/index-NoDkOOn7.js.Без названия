(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function c(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(d){if(d.ep)return;d.ep=!0;const f=c(d);fetch(d.href,f)}})();function T0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Do={exports:{}},_l={};var yh;function A0(){if(yh)return _l;yh=1;var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function c(o,d,f){var m=null;if(f!==void 0&&(m=""+f),d.key!==void 0&&(m=""+d.key),"key"in d){f={};for(var x in d)x!=="key"&&(f[x]=d[x])}else f=d;return d=f.ref,{$$typeof:s,type:o,key:m,ref:d!==void 0?d:null,props:f}}return _l.Fragment=i,_l.jsx=c,_l.jsxs=c,_l}var gh;function D0(){return gh||(gh=1,Do.exports=A0()),Do.exports}var a=D0(),Ro={exports:{}},ve={};var bh;function R0(){if(bh)return ve;bh=1;var s=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,S={};function z(D,I,le){this.props=D,this.context=I,this.refs=S,this.updater=le||w}z.prototype.isReactComponent={},z.prototype.setState=function(D,I){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,I,"setState")},z.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function q(){}q.prototype=z.prototype;function j(D,I,le){this.props=D,this.context=I,this.refs=S,this.updater=le||w}var k=j.prototype=new q;k.constructor=j,M(k,z.prototype),k.isPureReactComponent=!0;var H=Array.isArray;function ue(){}var X={H:null,A:null,T:null,S:null},Z=Object.prototype.hasOwnProperty;function C(D,I,le){var ce=le.ref;return{$$typeof:s,type:D,key:I,ref:ce!==void 0?ce:null,props:le}}function B(D,I){return C(D.type,I,D.props)}function V(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function R(D){var I={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(le){return I[le]})}var v=/\/+/g;function ie(D,I){return typeof D=="object"&&D!==null&&D.key!=null?R(""+D.key):I.toString(36)}function Ne(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(ue,ue):(D.status="pending",D.then(function(I){D.status==="pending"&&(D.status="fulfilled",D.value=I)},function(I){D.status==="pending"&&(D.status="rejected",D.reason=I)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function O(D,I,le,ce,xe){var _e=typeof D;(_e==="undefined"||_e==="boolean")&&(D=null);var Te=!1;if(D===null)Te=!0;else switch(_e){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(D.$$typeof){case s:case i:Te=!0;break;case y:return Te=D._init,O(Te(D._payload),I,le,ce,xe)}}if(Te)return xe=xe(D),Te=ce===""?"."+ie(D,0):ce,H(xe)?(le="",Te!=null&&(le=Te.replace(v,"$&/")+"/"),O(xe,I,le,"",function(re){return re})):xe!=null&&(V(xe)&&(xe=B(xe,le+(xe.key==null||D&&D.key===xe.key?"":(""+xe.key).replace(v,"$&/")+"/")+Te)),I.push(xe)),1;Te=0;var Je=ce===""?".":ce+":";if(H(D))for(var L=0;L<D.length;L++)ce=D[L],_e=Je+ie(ce,L),Te+=O(ce,I,le,_e,xe);else if(L=A(D),typeof L=="function")for(D=L.call(D),L=0;!(ce=D.next()).done;)ce=ce.value,_e=Je+ie(ce,L++),Te+=O(ce,I,le,_e,xe);else if(_e==="object"){if(typeof D.then=="function")return O(Ne(D),I,le,ce,xe);throw I=String(D),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return Te}function P(D,I,le){if(D==null)return D;var ce=[],xe=0;return O(D,ce,"","",function(_e){return I.call(le,_e,xe++)}),ce}function se(D){if(D._status===-1){var I=D._result;I=I(),I.then(function(le){(D._status===0||D._status===-1)&&(D._status=1,D._result=le)},function(le){(D._status===0||D._status===-1)&&(D._status=2,D._result=le)}),D._status===-1&&(D._status=0,D._result=I)}if(D._status===1)return D._result.default;throw D._result}var oe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},ge={map:P,forEach:function(D,I,le){P(D,function(){I.apply(this,arguments)},le)},count:function(D){var I=0;return P(D,function(){I++}),I},toArray:function(D){return P(D,function(I){return I})||[]},only:function(D){if(!V(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return ve.Activity=_,ve.Children=ge,ve.Component=z,ve.Fragment=c,ve.Profiler=d,ve.PureComponent=j,ve.StrictMode=o,ve.Suspense=g,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,ve.__COMPILER_RUNTIME={__proto__:null,c:function(D){return X.H.useMemoCache(D)}},ve.cache=function(D){return function(){return D.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(D,I,le){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ce=M({},D.props),xe=D.key;if(I!=null)for(_e in I.key!==void 0&&(xe=""+I.key),I)!Z.call(I,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&I.ref===void 0||(ce[_e]=I[_e]);var _e=arguments.length-2;if(_e===1)ce.children=le;else if(1<_e){for(var Te=Array(_e),Je=0;Je<_e;Je++)Te[Je]=arguments[Je+2];ce.children=Te}return C(D.type,xe,ce)},ve.createContext=function(D){return D={$$typeof:m,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:f,_context:D},D},ve.createElement=function(D,I,le){var ce,xe={},_e=null;if(I!=null)for(ce in I.key!==void 0&&(_e=""+I.key),I)Z.call(I,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(xe[ce]=I[ce]);var Te=arguments.length-2;if(Te===1)xe.children=le;else if(1<Te){for(var Je=Array(Te),L=0;L<Te;L++)Je[L]=arguments[L+2];xe.children=Je}if(D&&D.defaultProps)for(ce in Te=D.defaultProps,Te)xe[ce]===void 0&&(xe[ce]=Te[ce]);return C(D,_e,xe)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(D){return{$$typeof:x,render:D}},ve.isValidElement=V,ve.lazy=function(D){return{$$typeof:y,_payload:{_status:-1,_result:D},_init:se}},ve.memo=function(D,I){return{$$typeof:p,type:D,compare:I===void 0?null:I}},ve.startTransition=function(D){var I=X.T,le={};X.T=le;try{var ce=D(),xe=X.S;xe!==null&&xe(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,oe)}catch(_e){oe(_e)}finally{I!==null&&le.types!==null&&(I.types=le.types),X.T=I}},ve.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},ve.use=function(D){return X.H.use(D)},ve.useActionState=function(D,I,le){return X.H.useActionState(D,I,le)},ve.useCallback=function(D,I){return X.H.useCallback(D,I)},ve.useContext=function(D){return X.H.useContext(D)},ve.useDebugValue=function(){},ve.useDeferredValue=function(D,I){return X.H.useDeferredValue(D,I)},ve.useEffect=function(D,I){return X.H.useEffect(D,I)},ve.useEffectEvent=function(D){return X.H.useEffectEvent(D)},ve.useId=function(){return X.H.useId()},ve.useImperativeHandle=function(D,I,le){return X.H.useImperativeHandle(D,I,le)},ve.useInsertionEffect=function(D,I){return X.H.useInsertionEffect(D,I)},ve.useLayoutEffect=function(D,I){return X.H.useLayoutEffect(D,I)},ve.useMemo=function(D,I){return X.H.useMemo(D,I)},ve.useOptimistic=function(D,I){return X.H.useOptimistic(D,I)},ve.useReducer=function(D,I,le){return X.H.useReducer(D,I,le)},ve.useRef=function(D){return X.H.useRef(D)},ve.useState=function(D){return X.H.useState(D)},ve.useSyncExternalStore=function(D,I,le){return X.H.useSyncExternalStore(D,I,le)},ve.useTransition=function(){return X.H.useTransition()},ve.version="19.2.0",ve}var _h;function eu(){return _h||(_h=1,Ro.exports=R0()),Ro.exports}var N=eu();const O0=T0(N);var Oo={exports:{}},vl={},Mo={exports:{}},Uo={};var vh;function M0(){return vh||(vh=1,(function(s){function i(O,P){var se=O.length;O.push(P);e:for(;0<se;){var oe=se-1>>>1,ge=O[oe];if(0<d(ge,P))O[oe]=P,O[se]=ge,se=oe;else break e}}function c(O){return O.length===0?null:O[0]}function o(O){if(O.length===0)return null;var P=O[0],se=O.pop();if(se!==P){O[0]=se;e:for(var oe=0,ge=O.length,D=ge>>>1;oe<D;){var I=2*(oe+1)-1,le=O[I],ce=I+1,xe=O[ce];if(0>d(le,se))ce<ge&&0>d(xe,le)?(O[oe]=xe,O[ce]=se,oe=ce):(O[oe]=le,O[I]=se,oe=I);else if(ce<ge&&0>d(xe,se))O[oe]=xe,O[ce]=se,oe=ce;else break e}}return P}function d(O,P){var se=O.sortIndex-P.sortIndex;return se!==0?se:O.id-P.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var m=Date,x=m.now();s.unstable_now=function(){return m.now()-x}}var g=[],p=[],y=1,_=null,T=3,A=!1,w=!1,M=!1,S=!1,z=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function k(O){for(var P=c(p);P!==null;){if(P.callback===null)o(p);else if(P.startTime<=O)o(p),P.sortIndex=P.expirationTime,i(g,P);else break;P=c(p)}}function H(O){if(M=!1,k(O),!w)if(c(g)!==null)w=!0,ue||(ue=!0,R());else{var P=c(p);P!==null&&Ne(H,P.startTime-O)}}var ue=!1,X=-1,Z=5,C=-1;function B(){return S?!0:!(s.unstable_now()-C<Z)}function V(){if(S=!1,ue){var O=s.unstable_now();C=O;var P=!0;try{e:{w=!1,M&&(M=!1,q(X),X=-1),A=!0;var se=T;try{t:{for(k(O),_=c(g);_!==null&&!(_.expirationTime>O&&B());){var oe=_.callback;if(typeof oe=="function"){_.callback=null,T=_.priorityLevel;var ge=oe(_.expirationTime<=O);if(O=s.unstable_now(),typeof ge=="function"){_.callback=ge,k(O),P=!0;break t}_===c(g)&&o(g),k(O)}else o(g);_=c(g)}if(_!==null)P=!0;else{var D=c(p);D!==null&&Ne(H,D.startTime-O),P=!1}}break e}finally{_=null,T=se,A=!1}P=void 0}}finally{P?R():ue=!1}}}var R;if(typeof j=="function")R=function(){j(V)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,ie=v.port2;v.port1.onmessage=V,R=function(){ie.postMessage(null)}}else R=function(){z(V,0)};function Ne(O,P){X=z(function(){O(s.unstable_now())},P)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(O){O.callback=null},s.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<O?Math.floor(1e3/O):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(O){switch(T){case 1:case 2:case 3:var P=3;break;default:P=T}var se=T;T=P;try{return O()}finally{T=se}},s.unstable_requestPaint=function(){S=!0},s.unstable_runWithPriority=function(O,P){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var se=T;T=O;try{return P()}finally{T=se}},s.unstable_scheduleCallback=function(O,P,se){var oe=s.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?oe+se:oe):se=oe,O){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=se+ge,O={id:y++,callback:P,priorityLevel:O,startTime:se,expirationTime:ge,sortIndex:-1},se>oe?(O.sortIndex=se,i(p,O),c(g)===null&&O===c(p)&&(M?(q(X),X=-1):M=!0,Ne(H,se-oe))):(O.sortIndex=ge,i(g,O),w||A||(w=!0,ue||(ue=!0,R()))),O},s.unstable_shouldYield=B,s.unstable_wrapCallback=function(O){var P=T;return function(){var se=T;T=P;try{return O.apply(this,arguments)}finally{T=se}}}})(Uo)),Uo}var jh;function U0(){return jh||(jh=1,Mo.exports=M0()),Mo.exports}var qo={exports:{}},pt={};var Nh;function q0(){if(Nh)return pt;Nh=1;var s=eu();function i(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var o={d:{f:c,r:function(){throw Error(i(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(g,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:_==null?null:""+_,children:g,containerInfo:p,implementation:y}}var m=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,pt.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(i(299));return f(g,p,null,y)},pt.flushSync=function(g){var p=m.T,y=o.p;try{if(m.T=null,o.p=2,g)return g()}finally{m.T=p,o.p=y,o.d.f()}},pt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(g,p))},pt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},pt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,_=x(y,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?o.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:A}):y==="script"&&o.d.X(g,{crossOrigin:_,integrity:T,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},pt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=x(p.as,p.crossOrigin);o.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(g)},pt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=x(y,p.crossOrigin);o.d.L(g,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},pt.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=x(p.as,p.crossOrigin);o.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(g)},pt.requestFormReset=function(g){o.d.r(g)},pt.unstable_batchedUpdates=function(g,p){return g(p)},pt.useFormState=function(g,p,y){return m.H.useFormState(g,p,y)},pt.useFormStatus=function(){return m.H.useHostTransitionStatus()},pt.version="19.2.0",pt}var Sh;function z0(){if(Sh)return qo.exports;Sh=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(i){console.error(i)}}return s(),qo.exports=q0(),qo.exports}var wh;function L0(){if(wh)return vl;wh=1;var s=U0(),i=eu(),c=z0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(f(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,l=t;;){var r=n.return;if(r===null)break;var u=r.alternate;if(u===null){if(l=r.return,l!==null){n=l;continue}break}if(r.child===u.child){for(u=r.child;u;){if(u===n)return g(r),e;if(u===l)return g(r),t;u=u.sibling}throw Error(o(188))}if(n.return!==l.return)n=r,l=u;else{for(var h=!1,b=r.child;b;){if(b===n){h=!0,n=r,l=u;break}if(b===l){h=!0,l=r,n=u;break}b=b.sibling}if(!h){for(b=u.child;b;){if(b===n){h=!0,n=u,l=r;break}if(b===l){h=!0,l=u,n=r;break}b=b.sibling}if(!h)throw Error(o(189))}}if(n.alternate!==l)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),j=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function R(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var v=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===v?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case z:return"Profiler";case S:return"StrictMode";case H:return"Suspense";case ue:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case j:return e.displayName||"Context";case q:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return t=e.displayName||null,t!==null?t:ie(e.type)||"Memo";case Z:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var Ne=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},oe=[],ge=-1;function D(e){return{current:e}}function I(e){0>ge||(e.current=oe[ge],oe[ge]=null,ge--)}function le(e,t){ge++,oe[ge]=e.current,e.current=t}var ce=D(null),xe=D(null),_e=D(null),Te=D(null);function Je(e,t){switch(le(_e,t),le(xe,e),le(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hf(t),e=kf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(ce),le(ce,e)}function L(){I(ce),I(xe),I(_e)}function re(e){e.memoizedState!==null&&le(Te,e);var t=ce.current,n=kf(t,e.type);t!==n&&(le(xe,e),le(ce,n))}function de(e){xe.current===e&&(I(ce),I(xe)),Te.current===e&&(I(Te),xl._currentValue=se)}var Y,W;function Se(e){if(Y===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Y=t&&t[1]||"",W=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Y+e+W}var Ve=!1;function rt(e,t){if(!e||Ve)return"";Ve=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(J){var G=J}Reflect.construct(e,[],ae)}else{try{ae.call()}catch(J){G=J}e.call(ae.prototype)}}else{try{throw Error()}catch(J){G=J}(ae=e())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(J){if(J&&G&&typeof J.stack=="string")return[J.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=l.DetermineComponentFrameRoot(),h=u[0],b=u[1];if(h&&b){var E=h.split(`
`),K=b.split(`
`);for(r=l=0;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;for(;r<K.length&&!K[r].includes("DetermineComponentFrameRoot");)r++;if(l===E.length||r===K.length)for(l=E.length-1,r=K.length-1;1<=l&&0<=r&&E[l]!==K[r];)r--;for(;1<=l&&0<=r;l--,r--)if(E[l]!==K[r]){if(l!==1||r!==1)do if(l--,r--,0>r||E[l]!==K[r]){var ee=`
`+E[l].replace(" at new "," at ");return e.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",e.displayName)),ee}while(1<=l&&0<=r);break}}}finally{Ve=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Se(n):""}function me(e,t){switch(e.tag){case 26:case 27:case 5:return Se(e.type);case 16:return Se("Lazy");case 13:return e.child!==t&&t!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return rt(e.type,!1);case 11:return rt(e.type.render,!1);case 1:return rt(e.type,!0);case 31:return Se("Activity");default:return""}}function Cs(e){try{var t="",n=null;do t+=me(e,n),n=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var oa=Object.prototype.hasOwnProperty,ua=s.unstable_scheduleCallback,Es=s.unstable_cancelCallback,ix=s.unstable_shouldYield,rx=s.unstable_requestPaint,At=s.unstable_now,cx=s.unstable_getCurrentPriorityLevel,yu=s.unstable_ImmediatePriority,gu=s.unstable_UserBlockingPriority,Ol=s.unstable_NormalPriority,ox=s.unstable_LowPriority,bu=s.unstable_IdlePriority,ux=s.log,dx=s.unstable_setDisableYieldValue,Ts=null,Dt=null;function zn(e){if(typeof ux=="function"&&dx(e),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Ts,e)}catch{}}var Rt=Math.clz32?Math.clz32:hx,mx=Math.log,fx=Math.LN2;function hx(e){return e>>>=0,e===0?32:31-(mx(e)/fx|0)|0}var Ml=256,Ul=262144,ql=4194304;function da(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function zl(e,t,n){var l=e.pendingLanes;if(l===0)return 0;var r=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~u,l!==0?r=da(l):(h&=b,h!==0?r=da(h):n||(n=b&~e,n!==0&&(r=da(n))))):(b=l&~u,b!==0?r=da(b):h!==0?r=da(h):n||(n=l&~e,n!==0&&(r=da(n)))),r===0?0:t!==0&&t!==r&&(t&u)===0&&(u=r&-r,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:r}function As(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function px(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _u(){var e=ql;return ql<<=1,(ql&62914560)===0&&(ql=4194304),e}function yr(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ds(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xx(e,t,n,l,r,u){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var b=e.entanglements,E=e.expirationTimes,K=e.hiddenUpdates;for(n=h&~n;0<n;){var ee=31-Rt(n),ae=1<<ee;b[ee]=0,E[ee]=-1;var G=K[ee];if(G!==null)for(K[ee]=null,ee=0;ee<G.length;ee++){var J=G[ee];J!==null&&(J.lane&=-536870913)}n&=~ae}l!==0&&vu(e,l,0),u!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function vu(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Rt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|n&261930}function ju(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var l=31-Rt(n),r=1<<l;r&t|e[l]&t&&(e[l]|=t),n&=~r}}function Nu(e,t){var n=t&-t;return n=(n&42)!==0?1:gr(n),(n&(e.suspendedLanes|t))!==0?0:n}function gr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function br(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Su(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:uh(e.type))}function wu(e,t){var n=P.p;try{return P.p=e,t()}finally{P.p=n}}var Ln=Math.random().toString(36).slice(2),ut="__reactFiber$"+Ln,bt="__reactProps$"+Ln,qa="__reactContainer$"+Ln,_r="__reactEvents$"+Ln,yx="__reactListeners$"+Ln,gx="__reactHandles$"+Ln,Cu="__reactResources$"+Ln,Rs="__reactMarker$"+Ln;function vr(e){delete e[ut],delete e[bt],delete e[_r],delete e[yx],delete e[gx]}function za(e){var t=e[ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qa]||n[ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Zf(e);e!==null;){if(n=e[ut])return n;e=Zf(e)}return t}e=n,n=e.parentNode}return null}function La(e){if(e=e[ut]||e[qa]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Os(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Ba(e){var t=e[Cu];return t||(t=e[Cu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ct(e){e[Rs]=!0}var Eu=new Set,Tu={};function ma(e,t){Fa(e,t),Fa(e+"Capture",t)}function Fa(e,t){for(Tu[e]=t,e=0;e<t.length;e++)Eu.add(t[e])}var bx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Au={},Du={};function _x(e){return oa.call(Du,e)?!0:oa.call(Au,e)?!1:bx.test(e)?Du[e]=!0:(Au[e]=!0,!1)}function Ll(e,t,n){if(_x(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Bl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function pn(e,t,n,l){if(l===null)e.removeAttribute(n);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+l)}}function kt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ru(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vx(e,t,n){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var r=l.get,u=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(h){n=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jr(e){if(!e._valueTracker){var t=Ru(e)?"checked":"value";e._valueTracker=vx(e,t,""+e[t])}}function Ou(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),l="";return e&&(l=Ru(e)?e.checked?"true":"false":e.value),e=l,e!==n?(t.setValue(e),!0):!1}function Fl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jx=/[\n"\\]/g;function Qt(e){return e.replace(jx,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Nr(e,t,n,l,r,u,h,b){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kt(t)):e.value!==""+kt(t)&&(e.value=""+kt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Sr(e,h,kt(t)):n!=null?Sr(e,h,kt(n)):l!=null&&e.removeAttribute("value"),r==null&&u!=null&&(e.defaultChecked=!!u),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+kt(b):e.removeAttribute("name")}function Mu(e,t,n,l,r,u,h,b){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){jr(e);return}n=n!=null?""+kt(n):"",t=t!=null?""+kt(t):n,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??r,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),jr(e)}function Sr(e,t,n){t==="number"&&Fl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ha(e,t,n,l){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&l&&(e[n].defaultSelected=!0)}else{for(n=""+kt(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,l&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Uu(e,t,n){if(t!=null&&(t=""+kt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+kt(n):""}function qu(e,t,n,l){if(t==null){if(l!=null){if(n!=null)throw Error(o(92));if(Ne(l)){if(1<l.length)throw Error(o(93));l=l[0]}n=l}n==null&&(n=""),t=n}n=kt(t),e.defaultValue=n,l=e.textContent,l===n&&l!==""&&l!==null&&(e.value=l),jr(e)}function ka(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Nx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zu(e,t,n){var l=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,n):typeof n!="number"||n===0||Nx.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Lu(e,t,n){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,n!=null){for(var l in n)!n.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var r in t)l=t[r],t.hasOwnProperty(r)&&n[r]!==l&&zu(e,r,l)}else for(var u in t)t.hasOwnProperty(u)&&zu(e,u,t[u])}function wr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hl(e){return wx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function xn(){}var Cr=null;function Er(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qa=null,Ka=null;function Bu(e){var t=La(e);if(t&&(e=t.stateNode)){var n=e[bt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Nr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Qt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var l=n[t];if(l!==e&&l.form===e.form){var r=l[bt]||null;if(!r)throw Error(o(90));Nr(l,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)l=n[t],l.form===e.form&&Ou(l)}break e;case"textarea":Uu(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ha(e,!!n.multiple,t,!1)}}}var Tr=!1;function Fu(e,t,n){if(Tr)return e(t,n);Tr=!0;try{var l=e(t);return l}finally{if(Tr=!1,(Qa!==null||Ka!==null)&&(Ei(),Qa&&(t=Qa,e=Ka,Ka=Qa=null,Bu(t),e)))for(t=0;t<e.length;t++)Bu(e[t])}}function Ms(e,t){var n=e.stateNode;if(n===null)return null;var l=n[bt]||null;if(l===null)return null;n=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ar=!1;if(yn)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){Ar=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{Ar=!1}var Bn=null,Dr=null,kl=null;function Hu(){if(kl)return kl;var e,t=Dr,n=t.length,l,r="value"in Bn?Bn.value:Bn.textContent,u=r.length;for(e=0;e<n&&t[e]===r[e];e++);var h=n-e;for(l=1;l<=h&&t[n-l]===r[u-l];l++);return kl=r.slice(e,1<l?1-l:void 0)}function Ql(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Kl(){return!0}function ku(){return!1}function _t(e){function t(n,l,r,u,h){this._reactName=n,this._targetInst=r,this.type=l,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(u):u[b]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Kl:ku,this.isPropagationStopped=ku,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),t}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=_t(fa),qs=_({},fa,{view:0,detail:0}),Cx=_t(qs),Rr,Or,zs,Gl=_({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zs&&(zs&&e.type==="mousemove"?(Rr=e.screenX-zs.screenX,Or=e.screenY-zs.screenY):Or=Rr=0,zs=e),Rr)},movementY:function(e){return"movementY"in e?e.movementY:Or}}),Qu=_t(Gl),Ex=_({},Gl,{dataTransfer:0}),Tx=_t(Ex),Ax=_({},qs,{relatedTarget:0}),Mr=_t(Ax),Dx=_({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Rx=_t(Dx),Ox=_({},fa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mx=_t(Ox),Ux=_({},fa,{data:0}),Ku=_t(Ux),qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lx[e])?!!t[e]:!1}function Ur(){return Bx}var Fx=_({},qs,{key:function(e){if(e.key){var t=qx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ql(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(e){return e.type==="keypress"?Ql(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ql(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hx=_t(Fx),kx=_({},Gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yu=_t(kx),Qx=_({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),Kx=_t(Qx),Yx=_({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gx=_t(Yx),Xx=_({},Gl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vx=_t(Xx),Zx=_({},fa,{newState:0,oldState:0}),$x=_t(Zx),Jx=[9,13,27,32],qr=yn&&"CompositionEvent"in window,Ls=null;yn&&"documentMode"in document&&(Ls=document.documentMode);var Px=yn&&"TextEvent"in window&&!Ls,Gu=yn&&(!qr||Ls&&8<Ls&&11>=Ls),Xu=" ",Vu=!1;function Zu(e,t){switch(e){case"keyup":return Jx.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ya=!1;function Wx(e,t){switch(e){case"compositionend":return $u(t);case"keypress":return t.which!==32?null:(Vu=!0,Xu);case"textInput":return e=t.data,e===Xu&&Vu?null:e;default:return null}}function Ix(e,t){if(Ya)return e==="compositionend"||!qr&&Zu(e,t)?(e=Hu(),kl=Dr=Bn=null,Ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gu&&t.locale!=="ko"?null:t.data;default:return null}}var ey={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ju(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ey[e.type]:t==="textarea"}function Pu(e,t,n,l){Qa?Ka?Ka.push(l):Ka=[l]:Qa=l,t=Ui(t,"onChange"),0<t.length&&(n=new Yl("onChange","change",null,n,l),e.push({event:n,listeners:t}))}var Bs=null,Fs=null;function ty(e){Uf(e,0)}function Xl(e){var t=Os(e);if(Ou(t))return e}function Wu(e,t){if(e==="change")return t}var Iu=!1;if(yn){var zr;if(yn){var Lr="oninput"in document;if(!Lr){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),Lr=typeof ed.oninput=="function"}zr=Lr}else zr=!1;Iu=zr&&(!document.documentMode||9<document.documentMode)}function td(){Bs&&(Bs.detachEvent("onpropertychange",nd),Fs=Bs=null)}function nd(e){if(e.propertyName==="value"&&Xl(Fs)){var t=[];Pu(t,Fs,e,Er(e)),Fu(ty,t)}}function ny(e,t,n){e==="focusin"?(td(),Bs=t,Fs=n,Bs.attachEvent("onpropertychange",nd)):e==="focusout"&&td()}function ay(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xl(Fs)}function sy(e,t){if(e==="click")return Xl(t)}function ly(e,t){if(e==="input"||e==="change")return Xl(t)}function iy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ot=typeof Object.is=="function"?Object.is:iy;function Hs(e,t){if(Ot(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(l=0;l<n.length;l++){var r=n[l];if(!oa.call(t,r)||!Ot(e[r],t[r]))return!1}return!0}function ad(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sd(e,t){var n=ad(e);e=0;for(var l;n;){if(n.nodeType===3){if(l=e+n.textContent.length,e<=t&&l>=t)return{node:n,offset:t-e};e=l}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ad(n)}}function ld(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ld(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function id(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Fl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Fl(e.document)}return t}function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ry=yn&&"documentMode"in document&&11>=document.documentMode,Ga=null,Fr=null,ks=null,Hr=!1;function rd(e,t,n){var l=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hr||Ga==null||Ga!==Fl(l)||(l=Ga,"selectionStart"in l&&Br(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ks&&Hs(ks,l)||(ks=l,l=Ui(Fr,"onSelect"),0<l.length&&(t=new Yl("onSelect","select",null,t,n),e.push({event:t,listeners:l}),t.target=Ga)))}function ha(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xa={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionrun:ha("Transition","TransitionRun"),transitionstart:ha("Transition","TransitionStart"),transitioncancel:ha("Transition","TransitionCancel"),transitionend:ha("Transition","TransitionEnd")},kr={},cd={};yn&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function pa(e){if(kr[e])return kr[e];if(!Xa[e])return e;var t=Xa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cd)return kr[e]=t[n];return e}var od=pa("animationend"),ud=pa("animationiteration"),dd=pa("animationstart"),cy=pa("transitionrun"),oy=pa("transitionstart"),uy=pa("transitioncancel"),md=pa("transitionend"),fd=new Map,Qr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qr.push("scrollEnd");function Wt(e,t){fd.set(e,t),ma(t,[e])}var Vl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Kt=[],Va=0,Kr=0;function Zl(){for(var e=Va,t=Kr=Va=0;t<e;){var n=Kt[t];Kt[t++]=null;var l=Kt[t];Kt[t++]=null;var r=Kt[t];Kt[t++]=null;var u=Kt[t];if(Kt[t++]=null,l!==null&&r!==null){var h=l.pending;h===null?r.next=r:(r.next=h.next,h.next=r),l.pending=r}u!==0&&hd(n,r,u)}}function $l(e,t,n,l){Kt[Va++]=e,Kt[Va++]=t,Kt[Va++]=n,Kt[Va++]=l,Kr|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Yr(e,t,n,l){return $l(e,t,n,l),Jl(e)}function xa(e,t){return $l(e,null,null,t),Jl(e)}function hd(e,t,n){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n);for(var r=!1,u=e.return;u!==null;)u.childLanes|=n,l=u.alternate,l!==null&&(l.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(r=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,r&&t!==null&&(r=31-Rt(n),e=u.hiddenUpdates,l=e[r],l===null?e[r]=[t]:l.push(t),t.lane=n|536870912),u):null}function Jl(e){if(50<ol)throw ol=0,Ic=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Za={};function dy(e,t,n,l){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(e,t,n,l){return new dy(e,t,n,l)}function Gr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gn(e,t){var n=e.alternate;return n===null?(n=Mt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function pd(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Pl(e,t,n,l,r,u){var h=0;if(l=e,typeof e=="function")Gr(e)&&(h=1);else if(typeof e=="string")h=x0(e,n,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case C:return e=Mt(31,n,t,r),e.elementType=C,e.lanes=u,e;case M:return ya(n.children,r,u,t);case S:h=8,r|=24;break;case z:return e=Mt(12,n,t,r|2),e.elementType=z,e.lanes=u,e;case H:return e=Mt(13,n,t,r),e.elementType=H,e.lanes=u,e;case ue:return e=Mt(19,n,t,r),e.elementType=ue,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j:h=10;break e;case q:h=9;break e;case k:h=11;break e;case X:h=14;break e;case Z:h=16,l=null;break e}h=29,n=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Mt(h,n,t,r),t.elementType=e,t.type=l,t.lanes=u,t}function ya(e,t,n,l){return e=Mt(7,e,l,t),e.lanes=n,e}function Xr(e,t,n){return e=Mt(6,e,null,t),e.lanes=n,e}function xd(e){var t=Mt(18,null,null,0);return t.stateNode=e,t}function Vr(e,t,n){return t=Mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var yd=new WeakMap;function Yt(e,t){if(typeof e=="object"&&e!==null){var n=yd.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Cs(t)},yd.set(e,t),t)}return{value:e,source:t,stack:Cs(t)}}var $a=[],Ja=0,Wl=null,Qs=0,Gt=[],Xt=0,Fn=null,cn=1,on="";function bn(e,t){$a[Ja++]=Qs,$a[Ja++]=Wl,Wl=e,Qs=t}function gd(e,t,n){Gt[Xt++]=cn,Gt[Xt++]=on,Gt[Xt++]=Fn,Fn=e;var l=cn;e=on;var r=32-Rt(l)-1;l&=~(1<<r),n+=1;var u=32-Rt(t)+r;if(30<u){var h=r-r%5;u=(l&(1<<h)-1).toString(32),l>>=h,r-=h,cn=1<<32-Rt(t)+r|n<<r|l,on=u+e}else cn=1<<u|n<<r|l,on=e}function Zr(e){e.return!==null&&(bn(e,1),gd(e,1,0))}function $r(e){for(;e===Wl;)Wl=$a[--Ja],$a[Ja]=null,Qs=$a[--Ja],$a[Ja]=null;for(;e===Fn;)Fn=Gt[--Xt],Gt[Xt]=null,on=Gt[--Xt],Gt[Xt]=null,cn=Gt[--Xt],Gt[Xt]=null}function bd(e,t){Gt[Xt++]=cn,Gt[Xt++]=on,Gt[Xt++]=Fn,cn=t.id,on=t.overflow,Fn=e}var dt=null,Ke=null,Me=!1,Hn=null,Vt=!1,Jr=Error(o(519));function kn(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ks(Yt(t,e)),Jr}function _d(e){var t=e.stateNode,n=e.type,l=e.memoizedProps;switch(t[ut]=e,t[bt]=l,n){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(n=0;n<dl.length;n++)De(dl[n],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),Mu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),qu(t,l.value,l.defaultValue,l.children)}n=l.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||l.suppressHydrationWarning===!0||Bf(t.textContent,n)?(l.popover!=null&&(De("beforetoggle",t),De("toggle",t)),l.onScroll!=null&&De("scroll",t),l.onScrollEnd!=null&&De("scrollend",t),l.onClick!=null&&(t.onclick=xn),t=!0):t=!1,t||kn(e,!0)}function vd(e){for(dt=e.return;dt;)switch(dt.tag){case 5:case 31:case 13:Vt=!1;return;case 27:case 3:Vt=!0;return;default:dt=dt.return}}function Pa(e){if(e!==dt)return!1;if(!Me)return vd(e),Me=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||po(e.type,e.memoizedProps)),n=!n),n&&Ke&&kn(e),vd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ke=Vf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ke=Vf(e)}else t===27?(t=Ke,ta(e.type)?(e=_o,_o=null,Ke=e):Ke=t):Ke=dt?$t(e.stateNode.nextSibling):null;return!0}function ga(){Ke=dt=null,Me=!1}function Pr(){var e=Hn;return e!==null&&(St===null?St=e:St.push.apply(St,e),Hn=null),e}function Ks(e){Hn===null?Hn=[e]:Hn.push(e)}var Wr=D(null),ba=null,_n=null;function Qn(e,t,n){le(Wr,t._currentValue),t._currentValue=n}function vn(e){e._currentValue=Wr.current,I(Wr)}function Ir(e,t,n){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===n)break;e=e.return}}function ec(e,t,n,l){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var u=r.dependencies;if(u!==null){var h=r.child;u=u.firstContext;e:for(;u!==null;){var b=u;u=r;for(var E=0;E<t.length;E++)if(b.context===t[E]){u.lanes|=n,b=u.alternate,b!==null&&(b.lanes|=n),Ir(u.return,n,e),l||(h=null);break e}u=b.next}}else if(r.tag===18){if(h=r.return,h===null)throw Error(o(341));h.lanes|=n,u=h.alternate,u!==null&&(u.lanes|=n),Ir(h,n,e),h=null}else h=r.child;if(h!==null)h.return=r;else for(h=r;h!==null;){if(h===e){h=null;break}if(r=h.sibling,r!==null){r.return=h.return,h=r;break}h=h.return}r=h}}function Wa(e,t,n,l){e=null;for(var r=t,u=!1;r!==null;){if(!u){if((r.flags&524288)!==0)u=!0;else if((r.flags&262144)!==0)break}if(r.tag===10){var h=r.alternate;if(h===null)throw Error(o(387));if(h=h.memoizedProps,h!==null){var b=r.type;Ot(r.pendingProps.value,h.value)||(e!==null?e.push(b):e=[b])}}else if(r===Te.current){if(h=r.alternate,h===null)throw Error(o(387));h.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(xl):e=[xl])}r=r.return}e!==null&&ec(t,e,n,l),t.flags|=262144}function Il(e){for(e=e.firstContext;e!==null;){if(!Ot(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _a(e){ba=e,_n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function mt(e){return jd(ba,e)}function ei(e,t){return ba===null&&_a(e),jd(e,t)}function jd(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},_n===null){if(e===null)throw Error(o(308));_n=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _n=_n.next=t;return n}var my=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},fy=s.unstable_scheduleCallback,hy=s.unstable_NormalPriority,et={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tc(){return{controller:new my,data:new Map,refCount:0}}function Ys(e){e.refCount--,e.refCount===0&&fy(hy,function(){e.controller.abort()})}var Gs=null,nc=0,Ia=0,es=null;function py(e,t){if(Gs===null){var n=Gs=[];nc=0,Ia=lo(),es={status:"pending",value:void 0,then:function(l){n.push(l)}}}return nc++,t.then(Nd,Nd),t}function Nd(){if(--nc===0&&Gs!==null){es!==null&&(es.status="fulfilled");var e=Gs;Gs=null,Ia=0,es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function xy(e,t){var n=[],l={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(l.status="rejected",l.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),l}var Sd=O.S;O.S=function(e,t){cf=At(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&py(e,t),Sd!==null&&Sd(e,t)};var va=D(null);function ac(){var e=va.current;return e!==null?e:Qe.pooledCache}function ti(e,t){t===null?le(va,va.current):le(va,t.pool)}function wd(){var e=ac();return e===null?null:{parent:et._currentValue,pool:e}}var ts=Error(o(460)),sc=Error(o(474)),ni=Error(o(542)),ai={then:function(){}};function Cd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ed(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(xn,xn),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ad(e),e;default:if(typeof t.status=="string")t.then(xn,xn);else{if(e=Qe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=l}},function(l){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ad(e),e}throw Na=t,ts}}function ja(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Na=n,ts):n}}var Na=null;function Td(){if(Na===null)throw Error(o(459));var e=Na;return Na=null,e}function Ad(e){if(e===ts||e===ni)throw Error(o(483))}var ns=null,Xs=0;function si(e){var t=Xs;return Xs+=1,ns===null&&(ns=[]),Ed(ns,e,t)}function Vs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function li(e,t){throw t.$$typeof===T?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Dd(e){function t(F,U){if(e){var Q=F.deletions;Q===null?(F.deletions=[U],F.flags|=16):Q.push(U)}}function n(F,U){if(!e)return null;for(;U!==null;)t(F,U),U=U.sibling;return null}function l(F){for(var U=new Map;F!==null;)F.key!==null?U.set(F.key,F):U.set(F.index,F),F=F.sibling;return U}function r(F,U){return F=gn(F,U),F.index=0,F.sibling=null,F}function u(F,U,Q){return F.index=Q,e?(Q=F.alternate,Q!==null?(Q=Q.index,Q<U?(F.flags|=67108866,U):Q):(F.flags|=67108866,U)):(F.flags|=1048576,U)}function h(F){return e&&F.alternate===null&&(F.flags|=67108866),F}function b(F,U,Q,ne){return U===null||U.tag!==6?(U=Xr(Q,F.mode,ne),U.return=F,U):(U=r(U,Q),U.return=F,U)}function E(F,U,Q,ne){var ye=Q.type;return ye===M?ee(F,U,Q.props.children,ne,Q.key):U!==null&&(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Z&&ja(ye)===U.type)?(U=r(U,Q.props),Vs(U,Q),U.return=F,U):(U=Pl(Q.type,Q.key,Q.props,null,F.mode,ne),Vs(U,Q),U.return=F,U)}function K(F,U,Q,ne){return U===null||U.tag!==4||U.stateNode.containerInfo!==Q.containerInfo||U.stateNode.implementation!==Q.implementation?(U=Vr(Q,F.mode,ne),U.return=F,U):(U=r(U,Q.children||[]),U.return=F,U)}function ee(F,U,Q,ne,ye){return U===null||U.tag!==7?(U=ya(Q,F.mode,ne,ye),U.return=F,U):(U=r(U,Q),U.return=F,U)}function ae(F,U,Q){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=Xr(""+U,F.mode,Q),U.return=F,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return Q=Pl(U.type,U.key,U.props,null,F.mode,Q),Vs(Q,U),Q.return=F,Q;case w:return U=Vr(U,F.mode,Q),U.return=F,U;case Z:return U=ja(U),ae(F,U,Q)}if(Ne(U)||R(U))return U=ya(U,F.mode,Q,null),U.return=F,U;if(typeof U.then=="function")return ae(F,si(U),Q);if(U.$$typeof===j)return ae(F,ei(F,U),Q);li(F,U)}return null}function G(F,U,Q,ne){var ye=U!==null?U.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return ye!==null?null:b(F,U,""+Q,ne);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return Q.key===ye?E(F,U,Q,ne):null;case w:return Q.key===ye?K(F,U,Q,ne):null;case Z:return Q=ja(Q),G(F,U,Q,ne)}if(Ne(Q)||R(Q))return ye!==null?null:ee(F,U,Q,ne,null);if(typeof Q.then=="function")return G(F,U,si(Q),ne);if(Q.$$typeof===j)return G(F,U,ei(F,Q),ne);li(F,Q)}return null}function J(F,U,Q,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return F=F.get(Q)||null,b(U,F,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case A:return F=F.get(ne.key===null?Q:ne.key)||null,E(U,F,ne,ye);case w:return F=F.get(ne.key===null?Q:ne.key)||null,K(U,F,ne,ye);case Z:return ne=ja(ne),J(F,U,Q,ne,ye)}if(Ne(ne)||R(ne))return F=F.get(Q)||null,ee(U,F,ne,ye,null);if(typeof ne.then=="function")return J(F,U,Q,si(ne),ye);if(ne.$$typeof===j)return J(F,U,Q,ei(U,ne),ye);li(U,ne)}return null}function he(F,U,Q,ne){for(var ye=null,Ue=null,pe=U,Ee=U=0,Oe=null;pe!==null&&Ee<Q.length;Ee++){pe.index>Ee?(Oe=pe,pe=null):Oe=pe.sibling;var qe=G(F,pe,Q[Ee],ne);if(qe===null){pe===null&&(pe=Oe);break}e&&pe&&qe.alternate===null&&t(F,pe),U=u(qe,U,Ee),Ue===null?ye=qe:Ue.sibling=qe,Ue=qe,pe=Oe}if(Ee===Q.length)return n(F,pe),Me&&bn(F,Ee),ye;if(pe===null){for(;Ee<Q.length;Ee++)pe=ae(F,Q[Ee],ne),pe!==null&&(U=u(pe,U,Ee),Ue===null?ye=pe:Ue.sibling=pe,Ue=pe);return Me&&bn(F,Ee),ye}for(pe=l(pe);Ee<Q.length;Ee++)Oe=J(pe,F,Ee,Q[Ee],ne),Oe!==null&&(e&&Oe.alternate!==null&&pe.delete(Oe.key===null?Ee:Oe.key),U=u(Oe,U,Ee),Ue===null?ye=Oe:Ue.sibling=Oe,Ue=Oe);return e&&pe.forEach(function(ia){return t(F,ia)}),Me&&bn(F,Ee),ye}function be(F,U,Q,ne){if(Q==null)throw Error(o(151));for(var ye=null,Ue=null,pe=U,Ee=U=0,Oe=null,qe=Q.next();pe!==null&&!qe.done;Ee++,qe=Q.next()){pe.index>Ee?(Oe=pe,pe=null):Oe=pe.sibling;var ia=G(F,pe,qe.value,ne);if(ia===null){pe===null&&(pe=Oe);break}e&&pe&&ia.alternate===null&&t(F,pe),U=u(ia,U,Ee),Ue===null?ye=ia:Ue.sibling=ia,Ue=ia,pe=Oe}if(qe.done)return n(F,pe),Me&&bn(F,Ee),ye;if(pe===null){for(;!qe.done;Ee++,qe=Q.next())qe=ae(F,qe.value,ne),qe!==null&&(U=u(qe,U,Ee),Ue===null?ye=qe:Ue.sibling=qe,Ue=qe);return Me&&bn(F,Ee),ye}for(pe=l(pe);!qe.done;Ee++,qe=Q.next())qe=J(pe,F,Ee,qe.value,ne),qe!==null&&(e&&qe.alternate!==null&&pe.delete(qe.key===null?Ee:qe.key),U=u(qe,U,Ee),Ue===null?ye=qe:Ue.sibling=qe,Ue=qe);return e&&pe.forEach(function(E0){return t(F,E0)}),Me&&bn(F,Ee),ye}function ke(F,U,Q,ne){if(typeof Q=="object"&&Q!==null&&Q.type===M&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:e:{for(var ye=Q.key;U!==null;){if(U.key===ye){if(ye=Q.type,ye===M){if(U.tag===7){n(F,U.sibling),ne=r(U,Q.props.children),ne.return=F,F=ne;break e}}else if(U.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Z&&ja(ye)===U.type){n(F,U.sibling),ne=r(U,Q.props),Vs(ne,Q),ne.return=F,F=ne;break e}n(F,U);break}else t(F,U);U=U.sibling}Q.type===M?(ne=ya(Q.props.children,F.mode,ne,Q.key),ne.return=F,F=ne):(ne=Pl(Q.type,Q.key,Q.props,null,F.mode,ne),Vs(ne,Q),ne.return=F,F=ne)}return h(F);case w:e:{for(ye=Q.key;U!==null;){if(U.key===ye)if(U.tag===4&&U.stateNode.containerInfo===Q.containerInfo&&U.stateNode.implementation===Q.implementation){n(F,U.sibling),ne=r(U,Q.children||[]),ne.return=F,F=ne;break e}else{n(F,U);break}else t(F,U);U=U.sibling}ne=Vr(Q,F.mode,ne),ne.return=F,F=ne}return h(F);case Z:return Q=ja(Q),ke(F,U,Q,ne)}if(Ne(Q))return he(F,U,Q,ne);if(R(Q)){if(ye=R(Q),typeof ye!="function")throw Error(o(150));return Q=ye.call(Q),be(F,U,Q,ne)}if(typeof Q.then=="function")return ke(F,U,si(Q),ne);if(Q.$$typeof===j)return ke(F,U,ei(F,Q),ne);li(F,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,U!==null&&U.tag===6?(n(F,U.sibling),ne=r(U,Q),ne.return=F,F=ne):(n(F,U),ne=Xr(Q,F.mode,ne),ne.return=F,F=ne),h(F)):n(F,U)}return function(F,U,Q,ne){try{Xs=0;var ye=ke(F,U,Q,ne);return ns=null,ye}catch(pe){if(pe===ts||pe===ni)throw pe;var Ue=Mt(29,pe,null,F.mode);return Ue.lanes=ne,Ue.return=F,Ue}finally{}}}var Sa=Dd(!0),Rd=Dd(!1),Kn=!1;function lc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Yn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Gn(e,t,n){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ze&2)!==0){var r=l.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),l.pending=t,t=Jl(e),hd(e,null,n),t}return $l(e,l,t,n),Jl(e)}function Zs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ju(e,n)}}function rc(e,t){var n=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,n===l)){var r=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?r=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?r=u=t:u=u.next=t}else r=u=t;n={baseState:l.baseState,firstBaseUpdate:r,lastBaseUpdate:u,shared:l.shared,callbacks:l.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var cc=!1;function $s(){if(cc){var e=es;if(e!==null)throw e}}function Js(e,t,n,l){cc=!1;var r=e.updateQueue;Kn=!1;var u=r.firstBaseUpdate,h=r.lastBaseUpdate,b=r.shared.pending;if(b!==null){r.shared.pending=null;var E=b,K=E.next;E.next=null,h===null?u=K:h.next=K,h=E;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==h&&(b===null?ee.firstBaseUpdate=K:b.next=K,ee.lastBaseUpdate=E))}if(u!==null){var ae=r.baseState;h=0,ee=K=E=null,b=u;do{var G=b.lane&-536870913,J=G!==b.lane;if(J?(Re&G)===G:(l&G)===G){G!==0&&G===Ia&&(cc=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=e,be=b;G=t;var ke=n;switch(be.tag){case 1:if(he=be.payload,typeof he=="function"){ae=he.call(ke,ae,G);break e}ae=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=be.payload,G=typeof he=="function"?he.call(ke,ae,G):he,G==null)break e;ae=_({},ae,G);break e;case 2:Kn=!0}}G=b.callback,G!==null&&(e.flags|=64,J&&(e.flags|=8192),J=r.callbacks,J===null?r.callbacks=[G]:J.push(G))}else J={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(K=ee=J,E=ae):ee=ee.next=J,h|=G;if(b=b.next,b===null){if(b=r.shared.pending,b===null)break;J=b,b=J.next,J.next=null,r.lastBaseUpdate=J,r.shared.pending=null}}while(!0);ee===null&&(E=ae),r.baseState=E,r.firstBaseUpdate=K,r.lastBaseUpdate=ee,u===null&&(r.shared.lanes=0),Jn|=h,e.lanes=h,e.memoizedState=ae}}function Od(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Md(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Od(n[e],t)}var as=D(null),ii=D(0);function Ud(e,t){e=Dn,le(ii,e),le(as,t),Dn=e|t.baseLanes}function oc(){le(ii,Dn),le(as,as.current)}function uc(){Dn=ii.current,I(as),I(ii)}var Ut=D(null),Zt=null;function Xn(e){var t=e.alternate;le(Pe,Pe.current&1),le(Ut,e),Zt===null&&(t===null||as.current!==null||t.memoizedState!==null)&&(Zt=e)}function dc(e){le(Pe,Pe.current),le(Ut,e),Zt===null&&(Zt=e)}function qd(e){e.tag===22?(le(Pe,Pe.current),le(Ut,e),Zt===null&&(Zt=e)):Vn()}function Vn(){le(Pe,Pe.current),le(Ut,Ut.current)}function qt(e){I(Ut),Zt===e&&(Zt=null),I(Pe)}var Pe=D(0);function ri(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||go(n)||bo(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jn=0,we=null,Fe=null,tt=null,ci=!1,ss=!1,wa=!1,oi=0,Ps=0,ls=null,yy=0;function Ze(){throw Error(o(321))}function mc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ot(e[n],t[n]))return!1;return!0}function fc(e,t,n,l,r,u){return jn=u,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=e===null||e.memoizedState===null?gm:Tc,wa=!1,u=n(l,r),wa=!1,ss&&(u=Ld(t,n,l,r)),zd(e),u}function zd(e){O.H=el;var t=Fe!==null&&Fe.next!==null;if(jn=0,tt=Fe=we=null,ci=!1,Ps=0,ls=null,t)throw Error(o(300));e===null||nt||(e=e.dependencies,e!==null&&Il(e)&&(nt=!0))}function Ld(e,t,n,l){we=e;var r=0;do{if(ss&&(ls=null),Ps=0,ss=!1,25<=r)throw Error(o(301));if(r+=1,tt=Fe=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}O.H=bm,u=t(n,l)}while(ss);return u}function gy(){var e=O.H,t=e.useState()[0];return t=typeof t.then=="function"?Ws(t):t,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(we.flags|=1024),t}function hc(){var e=oi!==0;return oi=0,e}function pc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function xc(e){if(ci){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ci=!1}jn=0,tt=Fe=we=null,ss=!1,Ps=oi=0,ls=null}function yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?we.memoizedState=tt=e:tt=tt.next=e,tt}function We(){if(Fe===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=tt===null?we.memoizedState:tt.next;if(t!==null)tt=t,Fe=e;else{if(e===null)throw we.alternate===null?Error(o(467)):Error(o(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},tt===null?we.memoizedState=tt=e:tt=tt.next=e}return tt}function ui(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ws(e){var t=Ps;return Ps+=1,ls===null&&(ls=[]),e=Ed(ls,e,t),t=we,(tt===null?t.memoizedState:tt.next)===null&&(t=t.alternate,O.H=t===null||t.memoizedState===null?gm:Tc),e}function di(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ws(e);if(e.$$typeof===j)return mt(e)}throw Error(o(438,String(e)))}function yc(e){var t=null,n=we.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var l=we.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=ui(),we.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),l=0;l<e;l++)n[l]=B;return t.index++,n}function Nn(e,t){return typeof t=="function"?t(e):t}function mi(e){var t=We();return gc(t,Fe,e)}function gc(e,t,n){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=n;var r=e.baseQueue,u=l.pending;if(u!==null){if(r!==null){var h=r.next;r.next=u.next,u.next=h}t.baseQueue=r=u,l.pending=null}if(u=e.baseState,r===null)e.memoizedState=u;else{t=r.next;var b=h=null,E=null,K=t,ee=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(Re&ae)===ae:(jn&ae)===ae){var G=K.revertLane;if(G===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===Ia&&(ee=!0);else if((jn&G)===G){K=K.next,G===Ia&&(ee=!0);continue}else ae={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},E===null?(b=E=ae,h=u):E=E.next=ae,we.lanes|=G,Jn|=G;ae=K.action,wa&&n(u,ae),u=K.hasEagerState?K.eagerState:n(u,ae)}else G={lane:ae,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},E===null?(b=E=G,h=u):E=E.next=G,we.lanes|=ae,Jn|=ae;K=K.next}while(K!==null&&K!==t);if(E===null?h=u:E.next=b,!Ot(u,e.memoizedState)&&(nt=!0,ee&&(n=es,n!==null)))throw n;e.memoizedState=u,e.baseState=h,e.baseQueue=E,l.lastRenderedState=u}return r===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function bc(e){var t=We(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var l=n.dispatch,r=n.pending,u=t.memoizedState;if(r!==null){n.pending=null;var h=r=r.next;do u=e(u,h.action),h=h.next;while(h!==r);Ot(u,t.memoizedState)||(nt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,l]}function Bd(e,t,n){var l=we,r=We(),u=Me;if(u){if(n===void 0)throw Error(o(407));n=n()}else n=t();var h=!Ot((Fe||r).memoizedState,n);if(h&&(r.memoizedState=n,nt=!0),r=r.queue,jc(kd.bind(null,l,r,e),[e]),r.getSnapshot!==t||h||tt!==null&&tt.memoizedState.tag&1){if(l.flags|=2048,is(9,{destroy:void 0},Hd.bind(null,l,r,n,t),null),Qe===null)throw Error(o(349));u||(jn&127)!==0||Fd(l,t,n)}return n}function Fd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t=ui(),we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hd(e,t,n,l){t.value=n,t.getSnapshot=l,Qd(t)&&Kd(e)}function kd(e,t,n){return n(function(){Qd(t)&&Kd(e)})}function Qd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ot(e,n)}catch{return!0}}function Kd(e){var t=xa(e,2);t!==null&&wt(t,e,2)}function _c(e){var t=yt();if(typeof e=="function"){var n=e;if(e=n(),wa){zn(!0);try{n()}finally{zn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:e},t}function Yd(e,t,n,l){return e.baseState=n,gc(e,Fe,typeof l=="function"?l:Nn)}function by(e,t,n,l,r){if(pi(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};O.T!==null?n(!0):u.isTransition=!1,l(u),n=t.pending,n===null?(u.next=t.pending=u,Gd(t,u)):(u.next=n.next,t.pending=n.next=u)}}function Gd(e,t){var n=t.action,l=t.payload,r=e.state;if(t.isTransition){var u=O.T,h={};O.T=h;try{var b=n(r,l),E=O.S;E!==null&&E(h,b),Xd(e,t,b)}catch(K){vc(e,t,K)}finally{u!==null&&h.types!==null&&(u.types=h.types),O.T=u}}else try{u=n(r,l),Xd(e,t,u)}catch(K){vc(e,t,K)}}function Xd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(l){Vd(e,t,l)},function(l){return vc(e,t,l)}):Vd(e,t,n)}function Vd(e,t,n){t.status="fulfilled",t.value=n,Zd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Gd(e,n)))}function vc(e,t,n){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=n,Zd(t),t=t.next;while(t!==l)}e.action=null}function Zd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $d(e,t){return t}function Jd(e,t){if(Me){var n=Qe.formState;if(n!==null){e:{var l=we;if(Me){if(Ke){t:{for(var r=Ke,u=Vt;r.nodeType!==8;){if(!u){r=null;break t}if(r=$t(r.nextSibling),r===null){r=null;break t}}u=r.data,r=u==="F!"||u==="F"?r:null}if(r){Ke=$t(r.nextSibling),l=r.data==="F!";break e}}kn(l)}l=!1}l&&(t=n[0])}}return n=yt(),n.memoizedState=n.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:t},n.queue=l,n=pm.bind(null,we,l),l.dispatch=n,l=_c(!1),u=Ec.bind(null,we,!1,l.queue),l=yt(),r={state:t,dispatch:null,action:e,pending:null},l.queue=r,n=by.bind(null,we,r,u,n),r.dispatch=n,l.memoizedState=e,[t,n,!1]}function Pd(e){var t=We();return Wd(t,Fe,e)}function Wd(e,t,n){if(t=gc(e,t,$d)[0],e=mi(Nn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Ws(t)}catch(h){throw h===ts?ni:h}else l=t;t=We();var r=t.queue,u=r.dispatch;return n!==t.memoizedState&&(we.flags|=2048,is(9,{destroy:void 0},_y.bind(null,r,n),null)),[l,u,e]}function _y(e,t){e.action=t}function Id(e){var t=We(),n=Fe;if(n!==null)return Wd(t,n,e);We(),t=t.memoizedState,n=We();var l=n.queue.dispatch;return n.memoizedState=e,[t,l,!1]}function is(e,t,n,l){return e={tag:e,create:n,deps:l,inst:t,next:null},t=we.updateQueue,t===null&&(t=ui(),we.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(l=n.next,n.next=e,e.next=l,t.lastEffect=e),e}function em(){return We().memoizedState}function fi(e,t,n,l){var r=yt();we.flags|=e,r.memoizedState=is(1|t,{destroy:void 0},n,l===void 0?null:l)}function hi(e,t,n,l){var r=We();l=l===void 0?null:l;var u=r.memoizedState.inst;Fe!==null&&l!==null&&mc(l,Fe.memoizedState.deps)?r.memoizedState=is(t,u,n,l):(we.flags|=e,r.memoizedState=is(1|t,u,n,l))}function tm(e,t){fi(8390656,8,e,t)}function jc(e,t){hi(2048,8,e,t)}function vy(e){we.flags|=4;var t=we.updateQueue;if(t===null)t=ui(),we.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function nm(e){var t=We().memoizedState;return vy({ref:t,nextImpl:e}),function(){if((ze&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function am(e,t){return hi(4,2,e,t)}function sm(e,t){return hi(4,4,e,t)}function lm(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function im(e,t,n){n=n!=null?n.concat([e]):null,hi(4,4,lm.bind(null,t,e),n)}function Nc(){}function rm(e,t){var n=We();t=t===void 0?null:t;var l=n.memoizedState;return t!==null&&mc(t,l[1])?l[0]:(n.memoizedState=[e,t],e)}function cm(e,t){var n=We();t=t===void 0?null:t;var l=n.memoizedState;if(t!==null&&mc(t,l[1]))return l[0];if(l=e(),wa){zn(!0);try{e()}finally{zn(!1)}}return n.memoizedState=[l,t],l}function Sc(e,t,n){return n===void 0||(jn&1073741824)!==0&&(Re&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=uf(),we.lanes|=e,Jn|=e,n)}function om(e,t,n,l){return Ot(n,t)?n:as.current!==null?(e=Sc(e,n,l),Ot(e,t)||(nt=!0),e):(jn&42)===0||(jn&1073741824)!==0&&(Re&261930)===0?(nt=!0,e.memoizedState=n):(e=uf(),we.lanes|=e,Jn|=e,t)}function um(e,t,n,l,r){var u=P.p;P.p=u!==0&&8>u?u:8;var h=O.T,b={};O.T=b,Ec(e,!1,t,n);try{var E=r(),K=O.S;if(K!==null&&K(b,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var ee=xy(E,l);Is(e,t,ee,Bt(e))}else Is(e,t,l,Bt(e))}catch(ae){Is(e,t,{then:function(){},status:"rejected",reason:ae},Bt())}finally{P.p=u,h!==null&&b.types!==null&&(h.types=b.types),O.T=h}}function jy(){}function wc(e,t,n,l){if(e.tag!==5)throw Error(o(476));var r=dm(e).queue;um(e,r,t,se,n===null?jy:function(){return mm(e),n(l)})}function dm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:se},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function mm(e){var t=dm(e);t.next===null&&(t=e.alternate.memoizedState),Is(e,t.next.queue,{},Bt())}function Cc(){return mt(xl)}function fm(){return We().memoizedState}function hm(){return We().memoizedState}function Ny(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Bt();e=Yn(n);var l=Gn(t,e,n);l!==null&&(wt(l,t,n),Zs(l,t,n)),t={cache:tc()},e.payload=t;return}t=t.return}}function Sy(e,t,n){var l=Bt();n={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},pi(e)?xm(t,n):(n=Yr(e,t,n,l),n!==null&&(wt(n,e,l),ym(n,t,l)))}function pm(e,t,n){var l=Bt();Is(e,t,n,l)}function Is(e,t,n,l){var r={lane:l,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(pi(e))xm(t,r);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,b=u(h,n);if(r.hasEagerState=!0,r.eagerState=b,Ot(b,h))return $l(e,t,r,0),Qe===null&&Zl(),!1}catch{}finally{}if(n=Yr(e,t,r,l),n!==null)return wt(n,e,l),ym(n,t,l),!0}return!1}function Ec(e,t,n,l){if(l={lane:2,revertLane:lo(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},pi(e)){if(t)throw Error(o(479))}else t=Yr(e,n,l,2),t!==null&&wt(t,e,2)}function pi(e){var t=e.alternate;return e===we||t!==null&&t===we}function xm(e,t){ss=ci=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ym(e,t,n){if((n&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,n|=l,t.lanes=n,ju(e,n)}}var el={readContext:mt,use:di,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};el.useEffectEvent=Ze;var gm={readContext:mt,use:di,useCallback:function(e,t){return yt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:tm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,fi(4194308,4,lm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fi(4194308,4,e,t)},useInsertionEffect:function(e,t){fi(4,2,e,t)},useMemo:function(e,t){var n=yt();t=t===void 0?null:t;var l=e();if(wa){zn(!0);try{e()}finally{zn(!1)}}return n.memoizedState=[l,t],l},useReducer:function(e,t,n){var l=yt();if(n!==void 0){var r=n(t);if(wa){zn(!0);try{n(t)}finally{zn(!1)}}}else r=t;return l.memoizedState=l.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},l.queue=e,e=e.dispatch=Sy.bind(null,we,e),[l.memoizedState,e]},useRef:function(e){var t=yt();return e={current:e},t.memoizedState=e},useState:function(e){e=_c(e);var t=e.queue,n=pm.bind(null,we,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Nc,useDeferredValue:function(e,t){var n=yt();return Sc(n,e,t)},useTransition:function(){var e=_c(!1);return e=um.bind(null,we,e.queue,!0,!1),yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var l=we,r=yt();if(Me){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),Qe===null)throw Error(o(349));(Re&127)!==0||Fd(l,t,n)}r.memoizedState=n;var u={value:n,getSnapshot:t};return r.queue=u,tm(kd.bind(null,l,u,e),[e]),l.flags|=2048,is(9,{destroy:void 0},Hd.bind(null,l,u,n,t),null),n},useId:function(){var e=yt(),t=Qe.identifierPrefix;if(Me){var n=on,l=cn;n=(l&~(1<<32-Rt(l)-1)).toString(32)+n,t="_"+t+"R_"+n,n=oi++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=yy++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Cc,useFormState:Jd,useActionState:Jd,useOptimistic:function(e){var t=yt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ec.bind(null,we,!0,n),n.dispatch=t,[e,t]},useMemoCache:yc,useCacheRefresh:function(){return yt().memoizedState=Ny.bind(null,we)},useEffectEvent:function(e){var t=yt(),n={impl:e};return t.memoizedState=n,function(){if((ze&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}},Tc={readContext:mt,use:di,useCallback:rm,useContext:mt,useEffect:jc,useImperativeHandle:im,useInsertionEffect:am,useLayoutEffect:sm,useMemo:cm,useReducer:mi,useRef:em,useState:function(){return mi(Nn)},useDebugValue:Nc,useDeferredValue:function(e,t){var n=We();return om(n,Fe.memoizedState,e,t)},useTransition:function(){var e=mi(Nn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:Bd,useId:fm,useHostTransitionStatus:Cc,useFormState:Pd,useActionState:Pd,useOptimistic:function(e,t){var n=We();return Yd(n,Fe,e,t)},useMemoCache:yc,useCacheRefresh:hm};Tc.useEffectEvent=nm;var bm={readContext:mt,use:di,useCallback:rm,useContext:mt,useEffect:jc,useImperativeHandle:im,useInsertionEffect:am,useLayoutEffect:sm,useMemo:cm,useReducer:bc,useRef:em,useState:function(){return bc(Nn)},useDebugValue:Nc,useDeferredValue:function(e,t){var n=We();return Fe===null?Sc(n,e,t):om(n,Fe.memoizedState,e,t)},useTransition:function(){var e=bc(Nn)[0],t=We().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:Bd,useId:fm,useHostTransitionStatus:Cc,useFormState:Id,useActionState:Id,useOptimistic:function(e,t){var n=We();return Fe!==null?Yd(n,Fe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:yc,useCacheRefresh:hm};bm.useEffectEvent=nm;function Ac(e,t,n,l){t=e.memoizedState,n=n(l,t),n=n==null?t:_({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Dc={enqueueSetState:function(e,t,n){e=e._reactInternals;var l=Bt(),r=Yn(l);r.payload=t,n!=null&&(r.callback=n),t=Gn(e,r,l),t!==null&&(wt(t,e,l),Zs(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var l=Bt(),r=Yn(l);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Gn(e,r,l),t!==null&&(wt(t,e,l),Zs(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bt(),l=Yn(n);l.tag=2,t!=null&&(l.callback=t),t=Gn(e,l,n),t!==null&&(wt(t,e,n),Zs(t,e,n))}};function _m(e,t,n,l,r,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,u,h):t.prototype&&t.prototype.isPureReactComponent?!Hs(n,l)||!Hs(r,u):!0}function vm(e,t,n,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,l),t.state!==e&&Dc.enqueueReplaceState(t,t.state,null)}function Ca(e,t){var n=t;if("ref"in t){n={};for(var l in t)l!=="ref"&&(n[l]=t[l])}if(e=e.defaultProps){n===t&&(n=_({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function jm(e){Vl(e)}function Nm(e){console.error(e)}function Sm(e){Vl(e)}function xi(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function wm(e,t,n){try{var l=e.onCaughtError;l(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Rc(e,t,n){return n=Yn(n),n.tag=3,n.payload={element:null},n.callback=function(){xi(e,t)},n}function Cm(e){return e=Yn(e),e.tag=3,e}function Em(e,t,n,l){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var u=l.value;e.payload=function(){return r(u)},e.callback=function(){wm(t,n,l)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){wm(t,n,l),typeof r!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function wy(e,t,n,l,r){if(n.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=n.alternate,t!==null&&Wa(t,n,r,!0),n=Ut.current,n!==null){switch(n.tag){case 31:case 13:return Zt===null?Ti():n.alternate===null&&$e===0&&($e=3),n.flags&=-257,n.flags|=65536,n.lanes=r,l===ai?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([l]):t.add(l),no(e,l,r)),!1;case 22:return n.flags|=65536,l===ai?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([l]):n.add(l)),no(e,l,r)),!1}throw Error(o(435,n.tag))}return no(e,l,r),Ti(),!1}if(Me)return t=Ut.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=r,l!==Jr&&(e=Error(o(422),{cause:l}),Ks(Yt(e,n)))):(l!==Jr&&(t=Error(o(423),{cause:l}),Ks(Yt(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,l=Yt(l,n),r=Rc(e.stateNode,l,r),rc(e,r),$e!==4&&($e=2)),!1;var u=Error(o(520),{cause:l});if(u=Yt(u,n),cl===null?cl=[u]:cl.push(u),$e!==4&&($e=2),t===null)return!0;l=Yt(l,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Rc(n.stateNode,l,e),rc(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Pn===null||!Pn.has(u))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Cm(r),Em(r,e,n,l),rc(n,r),!1}n=n.return}while(n!==null);return!1}var Oc=Error(o(461)),nt=!1;function ft(e,t,n,l){t.child=e===null?Rd(t,null,n,l):Sa(t,e.child,n,l)}function Tm(e,t,n,l,r){n=n.render;var u=t.ref;if("ref"in l){var h={};for(var b in l)b!=="ref"&&(h[b]=l[b])}else h=l;return _a(t),l=fc(e,t,n,h,u,r),b=hc(),e!==null&&!nt?(pc(e,t,r),Sn(e,t,r)):(Me&&b&&Zr(t),t.flags|=1,ft(e,t,l,r),t.child)}function Am(e,t,n,l,r){if(e===null){var u=n.type;return typeof u=="function"&&!Gr(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,Dm(e,t,u,l,r)):(e=Pl(n.type,null,l,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Hc(e,r)){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:Hs,n(h,l)&&e.ref===t.ref)return Sn(e,t,r)}return t.flags|=1,e=gn(u,l),e.ref=t.ref,e.return=t,t.child=e}function Dm(e,t,n,l,r){if(e!==null){var u=e.memoizedProps;if(Hs(u,l)&&e.ref===t.ref)if(nt=!1,t.pendingProps=l=u,Hc(e,r))(e.flags&131072)!==0&&(nt=!0);else return t.lanes=e.lanes,Sn(e,t,r)}return Mc(e,t,n,l,r)}function Rm(e,t,n,l){var r=l.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|n:n,e!==null){for(l=t.child=e.child,r=0;l!==null;)r=r|l.lanes|l.childLanes,l=l.sibling;l=r&~u}else l=0,t.child=null;return Om(e,t,u,n,l)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ti(t,u!==null?u.cachePool:null),u!==null?Ud(t,u):oc(),qd(t);else return l=t.lanes=536870912,Om(e,t,u!==null?u.baseLanes|n:n,n,l)}else u!==null?(ti(t,u.cachePool),Ud(t,u),Vn(),t.memoizedState=null):(e!==null&&ti(t,null),oc(),Vn());return ft(e,t,r,n),t.child}function tl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Om(e,t,n,l,r){var u=ac();return u=u===null?null:{parent:et._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&ti(t,null),oc(),qd(t),e!==null&&Wa(e,t,l,!0),t.childLanes=r,null}function yi(e,t){return t=bi({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Mm(e,t,n){return Sa(t,e.child,null,n),e=yi(t,t.pendingProps),e.flags|=2,qt(t),t.memoizedState=null,e}function Cy(e,t,n){var l=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(l.mode==="hidden")return e=yi(t,l),t.lanes=536870912,tl(null,e);if(dc(t),(e=Ke)?(e=Xf(e,Vt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:cn,overflow:on}:null,retryLane:536870912,hydrationErrors:null},n=xd(e),n.return=t,t.child=n,dt=t,Ke=null)):e=null,e===null)throw kn(t);return t.lanes=536870912,null}return yi(t,l)}var u=e.memoizedState;if(u!==null){var h=u.dehydrated;if(dc(t),r)if(t.flags&256)t.flags&=-257,t=Mm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(nt||Wa(e,t,n,!1),r=(n&e.childLanes)!==0,nt||r){if(l=Qe,l!==null&&(h=Nu(l,n),h!==0&&h!==u.retryLane))throw u.retryLane=h,xa(e,h),wt(l,e,h),Oc;Ti(),t=Mm(e,t,n)}else e=u.treeContext,Ke=$t(h.nextSibling),dt=t,Me=!0,Hn=null,Vt=!1,e!==null&&bd(t,e),t=yi(t,l),t.flags|=4096;return t}return e=gn(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function gi(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(o(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Mc(e,t,n,l,r){return _a(t),n=fc(e,t,n,l,void 0,r),l=hc(),e!==null&&!nt?(pc(e,t,r),Sn(e,t,r)):(Me&&l&&Zr(t),t.flags|=1,ft(e,t,n,r),t.child)}function Um(e,t,n,l,r,u){return _a(t),t.updateQueue=null,n=Ld(t,l,n,r),zd(e),l=hc(),e!==null&&!nt?(pc(e,t,u),Sn(e,t,u)):(Me&&l&&Zr(t),t.flags|=1,ft(e,t,n,u),t.child)}function qm(e,t,n,l,r){if(_a(t),t.stateNode===null){var u=Za,h=n.contextType;typeof h=="object"&&h!==null&&(u=mt(h)),u=new n(l,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Dc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=l,u.state=t.memoizedState,u.refs={},lc(t),h=n.contextType,u.context=typeof h=="object"&&h!==null?mt(h):Za,u.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Ac(t,n,h,l),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&Dc.enqueueReplaceState(u,u.state,null),Js(t,l,u,r),$s(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){u=t.stateNode;var b=t.memoizedProps,E=Ca(n,b);u.props=E;var K=u.context,ee=n.contextType;h=Za,typeof ee=="object"&&ee!==null&&(h=mt(ee));var ae=n.getDerivedStateFromProps;ee=typeof ae=="function"||typeof u.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,ee||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(b||K!==h)&&vm(t,u,l,h),Kn=!1;var G=t.memoizedState;u.state=G,Js(t,l,u,r),$s(),K=t.memoizedState,b||G!==K||Kn?(typeof ae=="function"&&(Ac(t,n,ae,l),K=t.memoizedState),(E=Kn||_m(t,n,E,l,G,K,h))?(ee||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=K),u.props=l,u.state=K,u.context=h,l=E):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{u=t.stateNode,ic(e,t),h=t.memoizedProps,ee=Ca(n,h),u.props=ee,ae=t.pendingProps,G=u.context,K=n.contextType,E=Za,typeof K=="object"&&K!==null&&(E=mt(K)),b=n.getDerivedStateFromProps,(K=typeof b=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==ae||G!==E)&&vm(t,u,l,E),Kn=!1,G=t.memoizedState,u.state=G,Js(t,l,u,r),$s();var J=t.memoizedState;h!==ae||G!==J||Kn||e!==null&&e.dependencies!==null&&Il(e.dependencies)?(typeof b=="function"&&(Ac(t,n,b,l),J=t.memoizedState),(ee=Kn||_m(t,n,ee,l,G,J,E)||e!==null&&e.dependencies!==null&&Il(e.dependencies))?(K||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(l,J,E),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(l,J,E)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=J),u.props=l,u.state=J,u.context=E,l=ee):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),l=!1)}return u=l,gi(e,t),l=(t.flags&128)!==0,u||l?(u=t.stateNode,n=l&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&l?(t.child=Sa(t,e.child,null,r),t.child=Sa(t,null,n,r)):ft(e,t,n,r),t.memoizedState=u.state,e=t.child):e=Sn(e,t,r),e}function zm(e,t,n,l){return ga(),t.flags|=256,ft(e,t,n,l),t.child}var Uc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qc(e){return{baseLanes:e,cachePool:wd()}}function zc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Lt),e}function Lm(e,t,n){var l=t.pendingProps,r=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(Pe.current&2)!==0),h&&(r=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(r?Xn(t):Vn(),(e=Ke)?(e=Xf(e,Vt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Fn!==null?{id:cn,overflow:on}:null,retryLane:536870912,hydrationErrors:null},n=xd(e),n.return=t,t.child=n,dt=t,Ke=null)):e=null,e===null)throw kn(t);return bo(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,r?(Vn(),r=t.mode,b=bi({mode:"hidden",children:b},r),l=ya(l,r,n,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=qc(n),l.childLanes=zc(e,h,n),t.memoizedState=Uc,tl(null,l)):(Xn(t),Lc(t,b))}var E=e.memoizedState;if(E!==null&&(b=E.dehydrated,b!==null)){if(u)t.flags&256?(Xn(t),t.flags&=-257,t=Bc(e,t,n)):t.memoizedState!==null?(Vn(),t.child=e.child,t.flags|=128,t=null):(Vn(),b=l.fallback,r=t.mode,l=bi({mode:"visible",children:l.children},r),b=ya(b,r,n,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,Sa(t,e.child,null,n),l=t.child,l.memoizedState=qc(n),l.childLanes=zc(e,h,n),t.memoizedState=Uc,t=tl(null,l));else if(Xn(t),bo(b)){if(h=b.nextSibling&&b.nextSibling.dataset,h)var K=h.dgst;h=K,l=Error(o(419)),l.stack="",l.digest=h,Ks({value:l,source:null,stack:null}),t=Bc(e,t,n)}else if(nt||Wa(e,t,n,!1),h=(n&e.childLanes)!==0,nt||h){if(h=Qe,h!==null&&(l=Nu(h,n),l!==0&&l!==E.retryLane))throw E.retryLane=l,xa(e,l),wt(h,e,l),Oc;go(b)||Ti(),t=Bc(e,t,n)}else go(b)?(t.flags|=192,t.child=e.child,t=null):(e=E.treeContext,Ke=$t(b.nextSibling),dt=t,Me=!0,Hn=null,Vt=!1,e!==null&&bd(t,e),t=Lc(t,l.children),t.flags|=4096);return t}return r?(Vn(),b=l.fallback,r=t.mode,E=e.child,K=E.sibling,l=gn(E,{mode:"hidden",children:l.children}),l.subtreeFlags=E.subtreeFlags&65011712,K!==null?b=gn(K,b):(b=ya(b,r,n,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,tl(null,l),l=t.child,b=e.child.memoizedState,b===null?b=qc(n):(r=b.cachePool,r!==null?(E=et._currentValue,r=r.parent!==E?{parent:E,pool:E}:r):r=wd(),b={baseLanes:b.baseLanes|n,cachePool:r}),l.memoizedState=b,l.childLanes=zc(e,h,n),t.memoizedState=Uc,tl(e.child,l)):(Xn(t),n=e.child,e=n.sibling,n=gn(n,{mode:"visible",children:l.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function Lc(e,t){return t=bi({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function bi(e,t){return e=Mt(22,e,null,t),e.lanes=0,e}function Bc(e,t,n){return Sa(t,e.child,null,n),e=Lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bm(e,t,n){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ir(e.return,t,n)}function Fc(e,t,n,l,r,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:n,tailMode:r,treeForkCount:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=n,h.tailMode=r,h.treeForkCount=u)}function Fm(e,t,n){var l=t.pendingProps,r=l.revealOrder,u=l.tail;l=l.children;var h=Pe.current,b=(h&2)!==0;if(b?(h=h&1|2,t.flags|=128):h&=1,le(Pe,h),ft(e,t,l,n),l=Me?Qs:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bm(e,n,t);else if(e.tag===19)Bm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&ri(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Fc(t,!1,r,n,u,l);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&ri(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Fc(t,!0,n,null,u,l);break;case"together":Fc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function Sn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Wa(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Hc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Il(e)))}function Ey(e,t,n){switch(t.tag){case 3:Je(t,t.stateNode.containerInfo),Qn(t,et,e.memoizedState.cache),ga();break;case 27:case 5:re(t);break;case 4:Je(t,t.stateNode.containerInfo);break;case 10:Qn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,dc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Xn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Lm(e,t,n):(Xn(t),e=Sn(e,t,n),e!==null?e.sibling:null);Xn(t);break;case 19:var r=(e.flags&128)!==0;if(l=(n&t.childLanes)!==0,l||(Wa(e,t,n,!1),l=(n&t.childLanes)!==0),r){if(l)return Fm(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),le(Pe,Pe.current),l)break;return null;case 22:return t.lanes=0,Rm(e,t,n,t.pendingProps);case 24:Qn(t,et,e.memoizedState.cache)}return Sn(e,t,n)}function Hm(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)nt=!0;else{if(!Hc(e,n)&&(t.flags&128)===0)return nt=!1,Ey(e,t,n);nt=(e.flags&131072)!==0}else nt=!1,Me&&(t.flags&1048576)!==0&&gd(t,Qs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=ja(t.elementType),t.type=e,typeof e=="function")Gr(e)?(l=Ca(e,l),t.tag=1,t=qm(null,t,e,l,n)):(t.tag=0,t=Mc(null,t,e,l,n));else{if(e!=null){var r=e.$$typeof;if(r===k){t.tag=11,t=Tm(null,t,e,l,n);break e}else if(r===X){t.tag=14,t=Am(null,t,e,l,n);break e}}throw t=ie(e)||e,Error(o(306,t,""))}}return t;case 0:return Mc(e,t,t.type,t.pendingProps,n);case 1:return l=t.type,r=Ca(l,t.pendingProps),qm(e,t,l,r,n);case 3:e:{if(Je(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var u=t.memoizedState;r=u.element,ic(e,t),Js(t,l,null,n);var h=t.memoizedState;if(l=h.cache,Qn(t,et,l),l!==u.cache&&ec(t,[et],n,!0),$s(),l=h.element,u.isDehydrated)if(u={element:l,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=zm(e,t,l,n);break e}else if(l!==r){r=Yt(Error(o(424)),t),Ks(r),t=zm(e,t,l,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ke=$t(e.firstChild),dt=t,Me=!0,Hn=null,Vt=!0,n=Rd(t,null,l,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ga(),l===r){t=Sn(e,t,n);break e}ft(e,t,l,n)}t=t.child}return t;case 26:return gi(e,t),e===null?(n=Wf(t.type,null,t.pendingProps,null))?t.memoizedState=n:Me||(n=t.type,e=t.pendingProps,l=qi(_e.current).createElement(n),l[ut]=t,l[bt]=e,ht(l,n,e),ct(l),t.stateNode=l):t.memoizedState=Wf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return re(t),e===null&&Me&&(l=t.stateNode=$f(t.type,t.pendingProps,_e.current),dt=t,Vt=!0,r=Ke,ta(t.type)?(_o=r,Ke=$t(l.firstChild)):Ke=r),ft(e,t,t.pendingProps.children,n),gi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((r=l=Ke)&&(l=a0(l,t.type,t.pendingProps,Vt),l!==null?(t.stateNode=l,dt=t,Ke=$t(l.firstChild),Vt=!1,r=!0):r=!1),r||kn(t)),re(t),r=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,l=u.children,po(r,u)?l=null:h!==null&&po(r,h)&&(t.flags|=32),t.memoizedState!==null&&(r=fc(e,t,gy,null,null,n),xl._currentValue=r),gi(e,t),ft(e,t,l,n),t.child;case 6:return e===null&&Me&&((e=n=Ke)&&(n=s0(n,t.pendingProps,Vt),n!==null?(t.stateNode=n,dt=t,Ke=null,e=!0):e=!1),e||kn(t)),null;case 13:return Lm(e,t,n);case 4:return Je(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Sa(t,null,l,n):ft(e,t,l,n),t.child;case 11:return Tm(e,t,t.type,t.pendingProps,n);case 7:return ft(e,t,t.pendingProps,n),t.child;case 8:return ft(e,t,t.pendingProps.children,n),t.child;case 12:return ft(e,t,t.pendingProps.children,n),t.child;case 10:return l=t.pendingProps,Qn(t,t.type,l.value),ft(e,t,l.children,n),t.child;case 9:return r=t.type._context,l=t.pendingProps.children,_a(t),r=mt(r),l=l(r),t.flags|=1,ft(e,t,l,n),t.child;case 14:return Am(e,t,t.type,t.pendingProps,n);case 15:return Dm(e,t,t.type,t.pendingProps,n);case 19:return Fm(e,t,n);case 31:return Cy(e,t,n);case 22:return Rm(e,t,n,t.pendingProps);case 24:return _a(t),l=mt(et),e===null?(r=ac(),r===null&&(r=Qe,u=tc(),r.pooledCache=u,u.refCount++,u!==null&&(r.pooledCacheLanes|=n),r=u),t.memoizedState={parent:l,cache:r},lc(t),Qn(t,et,r)):((e.lanes&n)!==0&&(ic(e,t),Js(t,null,null,n),$s()),r=e.memoizedState,u=t.memoizedState,r.parent!==l?(r={parent:l,cache:l},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Qn(t,et,l)):(l=u.cache,Qn(t,et,l),l!==r.cache&&ec(t,[et],n,!0))),ft(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function wn(e){e.flags|=4}function kc(e,t,n,l,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(hf())e.flags|=8192;else throw Na=ai,sc}else e.flags&=-16777217}function km(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ah(t))if(hf())e.flags|=8192;else throw Na=ai,sc}function _i(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?_u():536870912,e.lanes|=t,us|=t)}function nl(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,l=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags&65011712,l|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,l|=r.subtreeFlags,l|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=l,e.childLanes=n,t}function Ty(e,t,n){var l=t.pendingProps;switch($r(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return Ye(t),null;case 3:return n=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),vn(et),L(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Pa(t)?wn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Pr())),Ye(t),null;case 26:var r=t.type,u=t.memoizedState;return e===null?(wn(t),u!==null?(Ye(t),km(t,u)):(Ye(t),kc(t,r,null,l,n))):u?u!==e.memoizedState?(wn(t),Ye(t),km(t,u)):(Ye(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&wn(t),Ye(t),kc(t,r,e,l,n)),null;case 27:if(de(t),n=_e.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&wn(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return Ye(t),null}e=ce.current,Pa(t)?_d(t):(e=$f(r,l,n),t.stateNode=e,wn(t))}return Ye(t),null;case 5:if(de(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&wn(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return Ye(t),null}if(u=ce.current,Pa(t))_d(t);else{var h=qi(_e.current);switch(u){case 1:u=h.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:u=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":u=h.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":u=h.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":u=h.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?u.multiple=!0:l.size&&(u.size=l.size);break;default:u=typeof l.is=="string"?h.createElement(r,{is:l.is}):h.createElement(r)}}u[ut]=t,u[bt]=l;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)u.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=u;e:switch(ht(u,r,l),r){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&wn(t)}}return Ye(t),kc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&wn(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=_e.current,Pa(t)){if(e=t.stateNode,n=t.memoizedProps,l=null,r=dt,r!==null)switch(r.tag){case 27:case 5:l=r.memoizedProps}e[ut]=t,e=!!(e.nodeValue===n||l!==null&&l.suppressHydrationWarning===!0||Bf(e.nodeValue,n)),e||kn(t,!0)}else e=qi(e).createTextNode(l),e[ut]=t,t.stateNode=e}return Ye(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(l=Pa(t),n!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[ut]=t}else ga(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),e=!1}else n=Pr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(qt(t),t):(qt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Ye(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Pa(t),l!==null&&l.dehydrated!==null){if(e===null){if(!r)throw Error(o(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(o(317));r[ut]=t}else ga(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ye(t),r=!1}else r=Pr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(qt(t),t):(qt(t),null)}return qt(t),(t.flags&128)!==0?(t.lanes=n,t):(n=l!==null,e=e!==null&&e.memoizedState!==null,n&&(l=t.child,r=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(r=l.alternate.memoizedState.cachePool.pool),u=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(u=l.memoizedState.cachePool.pool),u!==r&&(l.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),_i(t,t.updateQueue),Ye(t),null);case 4:return L(),e===null&&oo(t.stateNode.containerInfo),Ye(t),null;case 10:return vn(t.type),Ye(t),null;case 19:if(I(Pe),l=t.memoizedState,l===null)return Ye(t),null;if(r=(t.flags&128)!==0,u=l.rendering,u===null)if(r)nl(l,!1);else{if($e!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=ri(e),u!==null){for(t.flags|=128,nl(l,!1),e=u.updateQueue,t.updateQueue=e,_i(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)pd(n,e),n=n.sibling;return le(Pe,Pe.current&1|2),Me&&bn(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&At()>wi&&(t.flags|=128,r=!0,nl(l,!1),t.lanes=4194304)}else{if(!r)if(e=ri(u),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,_i(t,e),nl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!Me)return Ye(t),null}else 2*At()-l.renderingStartTime>wi&&n!==536870912&&(t.flags|=128,r=!0,nl(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=At(),e.sibling=null,n=Pe.current,le(Pe,r?n&1|2:n&1),Me&&bn(t,l.treeForkCount),e):(Ye(t),null);case 22:case 23:return qt(t),uc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(n&536870912)!==0&&(t.flags&128)===0&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),n=t.updateQueue,n!==null&&_i(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==n&&(t.flags|=2048),e!==null&&I(va),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vn(et),Ye(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Ay(e,t){switch($r(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vn(et),L(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return de(t),null;case 31:if(t.memoizedState!==null){if(qt(t),t.alternate===null)throw Error(o(340));ga()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(qt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ga()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Pe),null;case 4:return L(),null;case 10:return vn(t.type),null;case 22:case 23:return qt(t),uc(),e!==null&&I(va),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return vn(et),null;case 25:return null;default:return null}}function Qm(e,t){switch($r(t),t.tag){case 3:vn(et),L();break;case 26:case 27:case 5:de(t);break;case 4:L();break;case 31:t.memoizedState!==null&&qt(t);break;case 13:qt(t);break;case 19:I(Pe);break;case 10:vn(t.type);break;case 22:case 23:qt(t),uc(),e!==null&&I(va);break;case 24:vn(et)}}function al(e,t){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var r=l.next;n=r;do{if((n.tag&e)===e){l=void 0;var u=n.create,h=n.inst;l=u(),h.destroy=l}n=n.next}while(n!==r)}}catch(b){Be(t,t.return,b)}}function Zn(e,t,n){try{var l=t.updateQueue,r=l!==null?l.lastEffect:null;if(r!==null){var u=r.next;l=u;do{if((l.tag&e)===e){var h=l.inst,b=h.destroy;if(b!==void 0){h.destroy=void 0,r=t;var E=n,K=b;try{K()}catch(ee){Be(r,E,ee)}}}l=l.next}while(l!==u)}}catch(ee){Be(t,t.return,ee)}}function Km(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Md(t,n)}catch(l){Be(e,e.return,l)}}}function Ym(e,t,n){n.props=Ca(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(l){Be(e,t,l)}}function sl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof n=="function"?e.refCleanup=n(l):n.current=l}}catch(r){Be(e,t,r)}}function un(e,t){var n=e.ref,l=e.refCleanup;if(n!==null)if(typeof l=="function")try{l()}catch(r){Be(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Be(e,t,r)}else n.current=null}function Gm(e){var t=e.type,n=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&l.focus();break e;case"img":n.src?l.src=n.src:n.srcSet&&(l.srcset=n.srcSet)}}catch(r){Be(e,e.return,r)}}function Qc(e,t,n){try{var l=e.stateNode;Py(l,e.type,n,t),l[bt]=t}catch(r){Be(e,e.return,r)}}function Xm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ta(e.type)||e.tag===4}function Kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ta(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yc(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xn));else if(l!==4&&(l===27&&ta(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Yc(e,t,n),e=e.sibling;e!==null;)Yc(e,t,n),e=e.sibling}function vi(e,t,n){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(l!==4&&(l===27&&ta(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(vi(e,t,n),e=e.sibling;e!==null;)vi(e,t,n),e=e.sibling}function Vm(e){var t=e.stateNode,n=e.memoizedProps;try{for(var l=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ht(t,l,n),t[ut]=e,t[bt]=n}catch(u){Be(e,e.return,u)}}var Cn=!1,at=!1,Gc=!1,Zm=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Dy(e,t){if(e=e.containerInfo,fo=Qi,e=id(e),Br(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var l=n.getSelection&&n.getSelection();if(l&&l.rangeCount!==0){n=l.anchorNode;var r=l.anchorOffset,u=l.focusNode;l=l.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,b=-1,E=-1,K=0,ee=0,ae=e,G=null;t:for(;;){for(var J;ae!==n||r!==0&&ae.nodeType!==3||(b=h+r),ae!==u||l!==0&&ae.nodeType!==3||(E=h+l),ae.nodeType===3&&(h+=ae.nodeValue.length),(J=ae.firstChild)!==null;)G=ae,ae=J;for(;;){if(ae===e)break t;if(G===n&&++K===r&&(b=h),G===u&&++ee===l&&(E=h),(J=ae.nextSibling)!==null)break;ae=G,G=ae.parentNode}ae=J}n=b===-1||E===-1?null:{start:b,end:E}}else n=null}n=n||{start:0,end:0}}else n=null;for(ho={focusedElem:e,selectionRange:n},Qi=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){switch(t=ot,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,r=u.memoizedProps,u=u.memoizedState,l=n.stateNode;try{var he=Ca(n.type,r);e=l.getSnapshotBeforeUpdate(he,u),l.__reactInternalSnapshotBeforeUpdate=e}catch(be){Be(n,n.return,be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)yo(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":yo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}}function $m(e,t,n){var l=n.flags;switch(n.tag){case 0:case 11:case 15:Tn(e,n),l&4&&al(5,n);break;case 1:if(Tn(e,n),l&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){Be(n,n.return,h)}else{var r=Ca(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Be(n,n.return,h)}}l&64&&Km(n),l&512&&sl(n,n.return);break;case 3:if(Tn(e,n),l&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Md(e,t)}catch(h){Be(n,n.return,h)}}break;case 27:t===null&&l&4&&Vm(n);case 26:case 5:Tn(e,n),t===null&&l&4&&Gm(n),l&512&&sl(n,n.return);break;case 12:Tn(e,n);break;case 31:Tn(e,n),l&4&&Wm(e,n);break;case 13:Tn(e,n),l&4&&Im(e,n),l&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=Fy.bind(null,n),l0(e,n))));break;case 22:if(l=n.memoizedState!==null||Cn,!l){t=t!==null&&t.memoizedState!==null||at,r=Cn;var u=at;Cn=l,(at=t)&&!u?An(e,n,(n.subtreeFlags&8772)!==0):Tn(e,n),Cn=r,at=u}break;case 30:break;default:Tn(e,n)}}function Jm(e){var t=e.alternate;t!==null&&(e.alternate=null,Jm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&vr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ge=null,vt=!1;function En(e,t,n){for(n=n.child;n!==null;)Pm(e,t,n),n=n.sibling}function Pm(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Ts,n)}catch{}switch(n.tag){case 26:at||un(n,t),En(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:at||un(n,t);var l=Ge,r=vt;ta(n.type)&&(Ge=n.stateNode,vt=!1),En(e,t,n),fl(n.stateNode),Ge=l,vt=r;break;case 5:at||un(n,t);case 6:if(l=Ge,r=vt,Ge=null,En(e,t,n),Ge=l,vt=r,Ge!==null)if(vt)try{(Ge.nodeType===9?Ge.body:Ge.nodeName==="HTML"?Ge.ownerDocument.body:Ge).removeChild(n.stateNode)}catch(u){Be(n,t,u)}else try{Ge.removeChild(n.stateNode)}catch(u){Be(n,t,u)}break;case 18:Ge!==null&&(vt?(e=Ge,Yf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),gs(e)):Yf(Ge,n.stateNode));break;case 4:l=Ge,r=vt,Ge=n.stateNode.containerInfo,vt=!0,En(e,t,n),Ge=l,vt=r;break;case 0:case 11:case 14:case 15:Zn(2,n,t),at||Zn(4,n,t),En(e,t,n);break;case 1:at||(un(n,t),l=n.stateNode,typeof l.componentWillUnmount=="function"&&Ym(n,t,l)),En(e,t,n);break;case 21:En(e,t,n);break;case 22:at=(l=at)||n.memoizedState!==null,En(e,t,n),at=l;break;default:En(e,t,n)}}function Wm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{gs(e)}catch(n){Be(t,t.return,n)}}}function Im(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gs(e)}catch(n){Be(t,t.return,n)}}function Ry(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Zm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Zm),t;default:throw Error(o(435,e.tag))}}function ji(e,t){var n=Ry(e);t.forEach(function(l){if(!n.has(l)){n.add(l);var r=Hy.bind(null,e,l);l.then(r,r)}})}function jt(e,t){var n=t.deletions;if(n!==null)for(var l=0;l<n.length;l++){var r=n[l],u=e,h=t,b=h;e:for(;b!==null;){switch(b.tag){case 27:if(ta(b.type)){Ge=b.stateNode,vt=!1;break e}break;case 5:Ge=b.stateNode,vt=!1;break e;case 3:case 4:Ge=b.stateNode.containerInfo,vt=!0;break e}b=b.return}if(Ge===null)throw Error(o(160));Pm(u,h,r),Ge=null,vt=!1,u=r.alternate,u!==null&&(u.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ef(t,e),t=t.sibling}var It=null;function ef(e,t){var n=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jt(t,e),Nt(e),l&4&&(Zn(3,e,e.return),al(3,e),Zn(5,e,e.return));break;case 1:jt(t,e),Nt(e),l&512&&(at||n===null||un(n,n.return)),l&64&&Cn&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?l:n.concat(l))));break;case 26:var r=It;if(jt(t,e),Nt(e),l&512&&(at||n===null||un(n,n.return)),l&4){var u=n!==null?n.memoizedState:null;if(l=e.memoizedState,n===null)if(l===null)if(e.stateNode===null){e:{l=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(l){case"title":u=r.getElementsByTagName("title")[0],(!u||u[Rs]||u[ut]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=r.createElement(l),r.head.insertBefore(u,r.querySelector("head > title"))),ht(u,l,n),u[ut]=e,ct(u),l=u;break e;case"link":var h=th("link","href",r).get(l+(n.href||""));if(h){for(var b=0;b<h.length;b++)if(u=h[b],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(b,1);break t}}u=r.createElement(l),ht(u,l,n),r.head.appendChild(u);break;case"meta":if(h=th("meta","content",r).get(l+(n.content||""))){for(b=0;b<h.length;b++)if(u=h[b],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(b,1);break t}}u=r.createElement(l),ht(u,l,n),r.head.appendChild(u);break;default:throw Error(o(468,l))}u[ut]=e,ct(u),l=u}e.stateNode=l}else nh(r,e.type,e.stateNode);else e.stateNode=eh(r,l,e.memoizedProps);else u!==l?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,l===null?nh(r,e.type,e.stateNode):eh(r,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Qc(e,e.memoizedProps,n.memoizedProps)}break;case 27:jt(t,e),Nt(e),l&512&&(at||n===null||un(n,n.return)),n!==null&&l&4&&Qc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(jt(t,e),Nt(e),l&512&&(at||n===null||un(n,n.return)),e.flags&32){r=e.stateNode;try{ka(r,"")}catch(he){Be(e,e.return,he)}}l&4&&e.stateNode!=null&&(r=e.memoizedProps,Qc(e,r,n!==null?n.memoizedProps:r)),l&1024&&(Gc=!0);break;case 6:if(jt(t,e),Nt(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,n=e.stateNode;try{n.nodeValue=l}catch(he){Be(e,e.return,he)}}break;case 3:if(Bi=null,r=It,It=zi(t.containerInfo),jt(t,e),It=r,Nt(e),l&4&&n!==null&&n.memoizedState.isDehydrated)try{gs(t.containerInfo)}catch(he){Be(e,e.return,he)}Gc&&(Gc=!1,tf(e));break;case 4:l=It,It=zi(e.stateNode.containerInfo),jt(t,e),Nt(e),It=l;break;case 12:jt(t,e),Nt(e);break;case 31:jt(t,e),Nt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ji(e,l)));break;case 13:jt(t,e),Nt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Si=At()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ji(e,l)));break;case 22:r=e.memoizedState!==null;var E=n!==null&&n.memoizedState!==null,K=Cn,ee=at;if(Cn=K||r,at=ee||E,jt(t,e),at=ee,Cn=K,Nt(e),l&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||E||Cn||at||Ea(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){E=n=t;try{if(u=E.stateNode,r)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{b=E.stateNode;var ae=E.memoizedProps.style,G=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(he){Be(E,E.return,he)}}}else if(t.tag===6){if(n===null){E=t;try{E.stateNode.nodeValue=r?"":E.memoizedProps}catch(he){Be(E,E.return,he)}}}else if(t.tag===18){if(n===null){E=t;try{var J=E.stateNode;r?Gf(J,!0):Gf(E.stateNode,!1)}catch(he){Be(E,E.return,he)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(n=l.retryQueue,n!==null&&(l.retryQueue=null,ji(e,n))));break;case 19:jt(t,e),Nt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,ji(e,l)));break;case 30:break;case 21:break;default:jt(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{for(var n,l=e.return;l!==null;){if(Xm(l)){n=l;break}l=l.return}if(n==null)throw Error(o(160));switch(n.tag){case 27:var r=n.stateNode,u=Kc(e);vi(e,u,r);break;case 5:var h=n.stateNode;n.flags&32&&(ka(h,""),n.flags&=-33);var b=Kc(e);vi(e,b,h);break;case 3:case 4:var E=n.stateNode.containerInfo,K=Kc(e);Yc(e,K,E);break;default:throw Error(o(161))}}catch(ee){Be(e,e.return,ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;tf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Tn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$m(e,t.alternate,t),t=t.sibling}function Ea(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Zn(4,t,t.return),Ea(t);break;case 1:un(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Ym(t,t.return,n),Ea(t);break;case 27:fl(t.stateNode);case 26:case 5:un(t,t.return),Ea(t);break;case 22:t.memoizedState===null&&Ea(t);break;case 30:Ea(t);break;default:Ea(t)}e=e.sibling}}function An(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,r=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:An(r,u,n),al(4,u);break;case 1:if(An(r,u,n),l=u,r=l.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(K){Be(l,l.return,K)}if(l=u,r=l.updateQueue,r!==null){var b=l.stateNode;try{var E=r.shared.hiddenCallbacks;if(E!==null)for(r.shared.hiddenCallbacks=null,r=0;r<E.length;r++)Od(E[r],b)}catch(K){Be(l,l.return,K)}}n&&h&64&&Km(u),sl(u,u.return);break;case 27:Vm(u);case 26:case 5:An(r,u,n),n&&l===null&&h&4&&Gm(u),sl(u,u.return);break;case 12:An(r,u,n);break;case 31:An(r,u,n),n&&h&4&&Wm(r,u);break;case 13:An(r,u,n),n&&h&4&&Im(r,u);break;case 22:u.memoizedState===null&&An(r,u,n),sl(u,u.return);break;case 30:break;default:An(r,u,n)}t=t.sibling}}function Xc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ys(n))}function Vc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ys(e))}function en(e,t,n,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nf(e,t,n,l),t=t.sibling}function nf(e,t,n,l){var r=t.flags;switch(t.tag){case 0:case 11:case 15:en(e,t,n,l),r&2048&&al(9,t);break;case 1:en(e,t,n,l);break;case 3:en(e,t,n,l),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ys(e)));break;case 12:if(r&2048){en(e,t,n,l),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,b=u.onPostCommit;typeof b=="function"&&b(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(E){Be(t,t.return,E)}}else en(e,t,n,l);break;case 31:en(e,t,n,l);break;case 13:en(e,t,n,l);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?en(e,t,n,l):ll(e,t):u._visibility&2?en(e,t,n,l):(u._visibility|=2,rs(e,t,n,l,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Xc(h,t);break;case 24:en(e,t,n,l),r&2048&&Vc(t.alternate,t);break;default:en(e,t,n,l)}}function rs(e,t,n,l,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,h=t,b=n,E=l,K=h.flags;switch(h.tag){case 0:case 11:case 15:rs(u,h,b,E,r),al(8,h);break;case 23:break;case 22:var ee=h.stateNode;h.memoizedState!==null?ee._visibility&2?rs(u,h,b,E,r):ll(u,h):(ee._visibility|=2,rs(u,h,b,E,r)),r&&K&2048&&Xc(h.alternate,h);break;case 24:rs(u,h,b,E,r),r&&K&2048&&Vc(h.alternate,h);break;default:rs(u,h,b,E,r)}t=t.sibling}}function ll(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,l=t,r=l.flags;switch(l.tag){case 22:ll(n,l),r&2048&&Xc(l.alternate,l);break;case 24:ll(n,l),r&2048&&Vc(l.alternate,l);break;default:ll(n,l)}t=t.sibling}}var il=8192;function cs(e,t,n){if(e.subtreeFlags&il)for(e=e.child;e!==null;)af(e,t,n),e=e.sibling}function af(e,t,n){switch(e.tag){case 26:cs(e,t,n),e.flags&il&&e.memoizedState!==null&&y0(n,It,e.memoizedState,e.memoizedProps);break;case 5:cs(e,t,n);break;case 3:case 4:var l=It;It=zi(e.stateNode.containerInfo),cs(e,t,n),It=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=il,il=16777216,cs(e,t,n),il=l):cs(e,t,n));break;default:cs(e,t,n)}}function sf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function rl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ot=l,rf(l,e)}sf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)lf(e),e=e.sibling}function lf(e){switch(e.tag){case 0:case 11:case 15:rl(e),e.flags&2048&&Zn(9,e,e.return);break;case 3:rl(e);break;case 12:rl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ni(e)):rl(e);break;default:rl(e)}}function Ni(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var l=t[n];ot=l,rf(l,e)}sf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Zn(8,t,t.return),Ni(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ni(t));break;default:Ni(t)}e=e.sibling}}function rf(e,t){for(;ot!==null;){var n=ot;switch(n.tag){case 0:case 11:case 15:Zn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var l=n.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ys(n.memoizedState.cache)}if(l=n.child,l!==null)l.return=n,ot=l;else e:for(n=e;ot!==null;){l=ot;var r=l.sibling,u=l.return;if(Jm(l),l===n){ot=null;break e}if(r!==null){r.return=u,ot=r;break e}ot=u}}}var Oy={getCacheForType:function(e){var t=mt(et),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return mt(et).controller.signal}},My=typeof WeakMap=="function"?WeakMap:Map,ze=0,Qe=null,Ae=null,Re=0,Le=0,zt=null,$n=!1,os=!1,Zc=!1,Dn=0,$e=0,Jn=0,Ta=0,$c=0,Lt=0,us=0,cl=null,St=null,Jc=!1,Si=0,cf=0,wi=1/0,Ci=null,Pn=null,st=0,Wn=null,ds=null,Rn=0,Pc=0,Wc=null,of=null,ol=0,Ic=null;function Bt(){return(ze&2)!==0&&Re!==0?Re&-Re:O.T!==null?lo():Su()}function uf(){if(Lt===0)if((Re&536870912)===0||Me){var e=Ul;Ul<<=1,(Ul&3932160)===0&&(Ul=262144),Lt=e}else Lt=536870912;return e=Ut.current,e!==null&&(e.flags|=32),Lt}function wt(e,t,n){(e===Qe&&(Le===2||Le===9)||e.cancelPendingCommit!==null)&&(ms(e,0),In(e,Re,Lt,!1)),Ds(e,n),((ze&2)===0||e!==Qe)&&(e===Qe&&((ze&2)===0&&(Ta|=n),$e===4&&In(e,Re,Lt,!1)),dn(e))}function df(e,t,n){if((ze&6)!==0)throw Error(o(327));var l=!n&&(t&127)===0&&(t&e.expiredLanes)===0||As(e,t),r=l?zy(e,t):to(e,t,!0),u=l;do{if(r===0){os&&!l&&In(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!Uy(n)){r=to(e,t,!1),u=!1;continue}if(r===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var b=e;r=cl;var E=b.current.memoizedState.isDehydrated;if(E&&(ms(b,h).flags|=256),h=to(b,h,!1),h!==2){if(Zc&&!E){b.errorRecoveryDisabledLanes|=u,Ta|=u,r=4;break e}u=St,St=r,u!==null&&(St===null?St=u:St.push.apply(St,u))}r=h}if(u=!1,r!==2)continue}}if(r===1){ms(e,0),In(e,t,0,!0);break}e:{switch(l=e,u=r,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:In(l,t,Lt,!$n);break e;case 2:St=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(r=Si+300-At(),10<r)){if(In(l,t,Lt,!$n),zl(l,0,!0)!==0)break e;Rn=t,l.timeoutHandle=Qf(mf.bind(null,l,n,St,Ci,Jc,t,Lt,Ta,us,$n,u,"Throttled",-0,0),r);break e}mf(l,n,St,Ci,Jc,t,Lt,Ta,us,$n,u,null,-0,0)}}break}while(!0);dn(e)}function mf(e,t,n,l,r,u,h,b,E,K,ee,ae,G,J){if(e.timeoutHandle=-1,ae=t.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xn},af(t,u,ae);var he=(u&62914560)===u?Si-At():(u&4194048)===u?cf-At():0;if(he=g0(ae,he),he!==null){Rn=u,e.cancelPendingCommit=he(_f.bind(null,e,t,u,n,l,r,h,b,E,ee,ae,null,G,J)),In(e,u,h,!K);return}}_f(e,t,u,n,l,r,h,b,E)}function Uy(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var l=0;l<n.length;l++){var r=n[l],u=r.getSnapshot;r=r.value;try{if(!Ot(u(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function In(e,t,n,l){t&=~$c,t&=~Ta,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var r=t;0<r;){var u=31-Rt(r),h=1<<u;l[u]=-1,r&=~h}n!==0&&vu(e,n,t)}function Ei(){return(ze&6)===0?(ul(0),!1):!0}function eo(){if(Ae!==null){if(Le===0)var e=Ae.return;else e=Ae,_n=ba=null,xc(e),ns=null,Xs=0,e=Ae;for(;e!==null;)Qm(e.alternate,e),e=e.return;Ae=null}}function ms(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,e0(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Rn=0,eo(),Qe=e,Ae=n=gn(e.current,null),Re=t,Le=0,zt=null,$n=!1,os=As(e,t),Zc=!1,us=Lt=$c=Ta=Jn=$e=0,St=cl=null,Jc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var r=31-Rt(l),u=1<<r;t|=e[r],l&=~u}return Dn=t,Zl(),n}function ff(e,t){we=null,O.H=el,t===ts||t===ni?(t=Td(),Le=3):t===sc?(t=Td(),Le=4):Le=t===Oc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,zt=t,Ae===null&&($e=1,xi(e,Yt(t,e.current)))}function hf(){var e=Ut.current;return e===null?!0:(Re&4194048)===Re?Zt===null:(Re&62914560)===Re||(Re&536870912)!==0?e===Zt:!1}function pf(){var e=O.H;return O.H=el,e===null?el:e}function xf(){var e=O.A;return O.A=Oy,e}function Ti(){$e=4,$n||(Re&4194048)!==Re&&Ut.current!==null||(os=!0),(Jn&134217727)===0&&(Ta&134217727)===0||Qe===null||In(Qe,Re,Lt,!1)}function to(e,t,n){var l=ze;ze|=2;var r=pf(),u=xf();(Qe!==e||Re!==t)&&(Ci=null,ms(e,t)),t=!1;var h=$e;e:do try{if(Le!==0&&Ae!==null){var b=Ae,E=zt;switch(Le){case 8:eo(),h=6;break e;case 3:case 2:case 9:case 6:Ut.current===null&&(t=!0);var K=Le;if(Le=0,zt=null,fs(e,b,E,K),n&&os){h=0;break e}break;default:K=Le,Le=0,zt=null,fs(e,b,E,K)}}qy(),h=$e;break}catch(ee){ff(e,ee)}while(!0);return t&&e.shellSuspendCounter++,_n=ba=null,ze=l,O.H=r,O.A=u,Ae===null&&(Qe=null,Re=0,Zl()),h}function qy(){for(;Ae!==null;)yf(Ae)}function zy(e,t){var n=ze;ze|=2;var l=pf(),r=xf();Qe!==e||Re!==t?(Ci=null,wi=At()+500,ms(e,t)):os=As(e,t);e:do try{if(Le!==0&&Ae!==null){t=Ae;var u=zt;t:switch(Le){case 1:Le=0,zt=null,fs(e,t,u,1);break;case 2:case 9:if(Cd(u)){Le=0,zt=null,gf(t);break}t=function(){Le!==2&&Le!==9||Qe!==e||(Le=7),dn(e)},u.then(t,t);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Cd(u)?(Le=0,zt=null,gf(t)):(Le=0,zt=null,fs(e,t,u,7));break;case 5:var h=null;switch(Ae.tag){case 26:h=Ae.memoizedState;case 5:case 27:var b=Ae;if(h?ah(h):b.stateNode.complete){Le=0,zt=null;var E=b.sibling;if(E!==null)Ae=E;else{var K=b.return;K!==null?(Ae=K,Ai(K)):Ae=null}break t}}Le=0,zt=null,fs(e,t,u,5);break;case 6:Le=0,zt=null,fs(e,t,u,6);break;case 8:eo(),$e=6;break e;default:throw Error(o(462))}}Ly();break}catch(ee){ff(e,ee)}while(!0);return _n=ba=null,O.H=l,O.A=r,ze=n,Ae!==null?0:(Qe=null,Re=0,Zl(),$e)}function Ly(){for(;Ae!==null&&!ix();)yf(Ae)}function yf(e){var t=Hm(e.alternate,e,Dn);e.memoizedProps=e.pendingProps,t===null?Ai(e):Ae=t}function gf(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Um(n,t,t.pendingProps,t.type,void 0,Re);break;case 11:t=Um(n,t,t.pendingProps,t.type.render,t.ref,Re);break;case 5:xc(t);default:Qm(n,t),t=Ae=pd(t,Dn),t=Hm(n,t,Dn)}e.memoizedProps=e.pendingProps,t===null?Ai(e):Ae=t}function fs(e,t,n,l){_n=ba=null,xc(t),ns=null,Xs=0;var r=t.return;try{if(wy(e,r,t,n,Re)){$e=1,xi(e,Yt(n,e.current)),Ae=null;return}}catch(u){if(r!==null)throw Ae=r,u;$e=1,xi(e,Yt(n,e.current)),Ae=null;return}t.flags&32768?(Me||l===1?e=!0:os||(Re&536870912)!==0?e=!1:($n=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ut.current,l!==null&&l.tag===13&&(l.flags|=16384))),bf(t,e)):Ai(t)}function Ai(e){var t=e;do{if((t.flags&32768)!==0){bf(t,$n);return}e=t.return;var n=Ty(t.alternate,t,Dn);if(n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);$e===0&&($e=5)}function bf(e,t){do{var n=Ay(e.alternate,e);if(n!==null){n.flags&=32767,Ae=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ae=e;return}Ae=e=n}while(e!==null);$e=6,Ae=null}function _f(e,t,n,l,r,u,h,b,E){e.cancelPendingCommit=null;do Di();while(st!==0);if((ze&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=Kr,xx(e,n,u,h,b,E),e===Qe&&(Ae=Qe=null,Re=0),ds=t,Wn=e,Rn=n,Pc=u,Wc=r,of=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,ky(Ol,function(){return wf(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,r=P.p,P.p=2,h=ze,ze|=4;try{Dy(e,t,n)}finally{ze=h,P.p=r,O.T=l}}st=1,vf(),jf(),Nf()}}function vf(){if(st===1){st=0;var e=Wn,t=ds,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=O.T,O.T=null;var l=P.p;P.p=2;var r=ze;ze|=4;try{ef(t,e);var u=ho,h=id(e.containerInfo),b=u.focusedElem,E=u.selectionRange;if(h!==b&&b&&b.ownerDocument&&ld(b.ownerDocument.documentElement,b)){if(E!==null&&Br(b)){var K=E.start,ee=E.end;if(ee===void 0&&(ee=K),"selectionStart"in b)b.selectionStart=K,b.selectionEnd=Math.min(ee,b.value.length);else{var ae=b.ownerDocument||document,G=ae&&ae.defaultView||window;if(G.getSelection){var J=G.getSelection(),he=b.textContent.length,be=Math.min(E.start,he),ke=E.end===void 0?be:Math.min(E.end,he);!J.extend&&be>ke&&(h=ke,ke=be,be=h);var F=sd(b,be),U=sd(b,ke);if(F&&U&&(J.rangeCount!==1||J.anchorNode!==F.node||J.anchorOffset!==F.offset||J.focusNode!==U.node||J.focusOffset!==U.offset)){var Q=ae.createRange();Q.setStart(F.node,F.offset),J.removeAllRanges(),be>ke?(J.addRange(Q),J.extend(U.node,U.offset)):(Q.setEnd(U.node,U.offset),J.addRange(Q))}}}}for(ae=[],J=b;J=J.parentNode;)J.nodeType===1&&ae.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ae.length;b++){var ne=ae[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Qi=!!fo,ho=fo=null}finally{ze=r,P.p=l,O.T=n}}e.current=t,st=2}}function jf(){if(st===2){st=0;var e=Wn,t=ds,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=O.T,O.T=null;var l=P.p;P.p=2;var r=ze;ze|=4;try{$m(e,t.alternate,t)}finally{ze=r,P.p=l,O.T=n}}st=3}}function Nf(){if(st===4||st===3){st=0,rx();var e=Wn,t=ds,n=Rn,l=of;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?st=5:(st=0,ds=Wn=null,Sf(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Pn=null),br(n),t=t.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Ts,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=O.T,r=P.p,P.p=2,O.T=null;try{for(var u=e.onRecoverableError,h=0;h<l.length;h++){var b=l[h];u(b.value,{componentStack:b.stack})}}finally{O.T=t,P.p=r}}(Rn&3)!==0&&Di(),dn(e),r=e.pendingLanes,(n&261930)!==0&&(r&42)!==0?e===Ic?ol++:(ol=0,Ic=e):ol=0,ul(0)}}function Sf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ys(t)))}function Di(){return vf(),jf(),Nf(),wf()}function wf(){if(st!==5)return!1;var e=Wn,t=Pc;Pc=0;var n=br(Rn),l=O.T,r=P.p;try{P.p=32>n?32:n,O.T=null,n=Wc,Wc=null;var u=Wn,h=Rn;if(st=0,ds=Wn=null,Rn=0,(ze&6)!==0)throw Error(o(331));var b=ze;if(ze|=4,lf(u.current),nf(u,u.current,h,n),ze=b,ul(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Ts,u)}catch{}return!0}finally{P.p=r,O.T=l,Sf(e,t)}}function Cf(e,t,n){t=Yt(n,t),t=Rc(e.stateNode,t,2),e=Gn(e,t,2),e!==null&&(Ds(e,2),dn(e))}function Be(e,t,n){if(e.tag===3)Cf(e,e,n);else for(;t!==null;){if(t.tag===3){Cf(t,e,n);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Pn===null||!Pn.has(l))){e=Yt(n,e),n=Cm(2),l=Gn(t,n,2),l!==null&&(Em(n,l,t,e),Ds(l,2),dn(l));break}}t=t.return}}function no(e,t,n){var l=e.pingCache;if(l===null){l=e.pingCache=new My;var r=new Set;l.set(t,r)}else r=l.get(t),r===void 0&&(r=new Set,l.set(t,r));r.has(n)||(Zc=!0,r.add(n),e=By.bind(null,e,t,n),t.then(e,e))}function By(e,t,n){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Qe===e&&(Re&n)===n&&($e===4||$e===3&&(Re&62914560)===Re&&300>At()-Si?(ze&2)===0&&ms(e,0):$c|=n,us===Re&&(us=0)),dn(e)}function Ef(e,t){t===0&&(t=_u()),e=xa(e,t),e!==null&&(Ds(e,t),dn(e))}function Fy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ef(e,n)}function Hy(e,t){var n=0;switch(e.tag){case 31:case 13:var l=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),Ef(e,n)}function ky(e,t){return ua(e,t)}var Ri=null,hs=null,ao=!1,Oi=!1,so=!1,ea=0;function dn(e){e!==hs&&e.next===null&&(hs===null?Ri=hs=e:hs=hs.next=e),Oi=!0,ao||(ao=!0,Ky())}function ul(e,t){if(!so&&Oi){so=!0;do for(var n=!1,l=Ri;l!==null;){if(e!==0){var r=l.pendingLanes;if(r===0)var u=0;else{var h=l.suspendedLanes,b=l.pingedLanes;u=(1<<31-Rt(42|e)+1)-1,u&=r&~(h&~b),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,Rf(l,u))}else u=Re,u=zl(l,l===Qe?u:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(u&3)===0||As(l,u)||(n=!0,Rf(l,u));l=l.next}while(n);so=!1}}function Qy(){Tf()}function Tf(){Oi=ao=!1;var e=0;ea!==0&&Iy()&&(e=ea);for(var t=At(),n=null,l=Ri;l!==null;){var r=l.next,u=Af(l,t);u===0?(l.next=null,n===null?Ri=r:n.next=r,r===null&&(hs=n)):(n=l,(e!==0||(u&3)!==0)&&(Oi=!0)),l=r}st!==0&&st!==5||ul(e),ea!==0&&(ea=0)}function Af(e,t){for(var n=e.suspendedLanes,l=e.pingedLanes,r=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-Rt(u),b=1<<h,E=r[h];E===-1?((b&n)===0||(b&l)!==0)&&(r[h]=px(b,t)):E<=t&&(e.expiredLanes|=b),u&=~b}if(t=Qe,n=Re,n=zl(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,n===0||e===t&&(Le===2||Le===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Es(l),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||As(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(l!==null&&Es(l),br(n)){case 2:case 8:n=gu;break;case 32:n=Ol;break;case 268435456:n=bu;break;default:n=Ol}return l=Df.bind(null,e),n=ua(n,l),e.callbackPriority=t,e.callbackNode=n,t}return l!==null&&l!==null&&Es(l),e.callbackPriority=2,e.callbackNode=null,2}function Df(e,t){if(st!==0&&st!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Di()&&e.callbackNode!==n)return null;var l=Re;return l=zl(e,e===Qe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(df(e,l,t),Af(e,At()),e.callbackNode!=null&&e.callbackNode===n?Df.bind(null,e):null)}function Rf(e,t){if(Di())return null;df(e,t,!0)}function Ky(){t0(function(){(ze&6)!==0?ua(yu,Qy):Tf()})}function lo(){if(ea===0){var e=Ia;e===0&&(e=Ml,Ml<<=1,(Ml&261888)===0&&(Ml=256)),ea=e}return ea}function Of(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hl(""+e)}function Mf(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Yy(e,t,n,l,r){if(t==="submit"&&n&&n.stateNode===r){var u=Of((r[bt]||null).action),h=l.submitter;h&&(t=(t=h[bt]||null)?Of(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var b=new Yl("action","action",null,l,r);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ea!==0){var E=h?Mf(r,h):new FormData(r);wc(n,{pending:!0,data:E,method:r.method,action:u},null,E)}}else typeof u=="function"&&(b.preventDefault(),E=h?Mf(r,h):new FormData(r),wc(n,{pending:!0,data:E,method:r.method,action:u},u,E))},currentTarget:r}]})}}for(var io=0;io<Qr.length;io++){var ro=Qr[io],Gy=ro.toLowerCase(),Xy=ro[0].toUpperCase()+ro.slice(1);Wt(Gy,"on"+Xy)}Wt(od,"onAnimationEnd"),Wt(ud,"onAnimationIteration"),Wt(dd,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(cy,"onTransitionRun"),Wt(oy,"onTransitionStart"),Wt(uy,"onTransitionCancel"),Wt(md,"onTransitionEnd"),Fa("onMouseEnter",["mouseout","mouseover"]),Fa("onMouseLeave",["mouseout","mouseover"]),Fa("onPointerEnter",["pointerout","pointerover"]),Fa("onPointerLeave",["pointerout","pointerover"]),ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function Uf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var l=e[n],r=l.event;l=l.listeners;e:{var u=void 0;if(t)for(var h=l.length-1;0<=h;h--){var b=l[h],E=b.instance,K=b.currentTarget;if(b=b.listener,E!==u&&r.isPropagationStopped())break e;u=b,r.currentTarget=K;try{u(r)}catch(ee){Vl(ee)}r.currentTarget=null,u=E}else for(h=0;h<l.length;h++){if(b=l[h],E=b.instance,K=b.currentTarget,b=b.listener,E!==u&&r.isPropagationStopped())break e;u=b,r.currentTarget=K;try{u(r)}catch(ee){Vl(ee)}r.currentTarget=null,u=E}}}}function De(e,t){var n=t[_r];n===void 0&&(n=t[_r]=new Set);var l=e+"__bubble";n.has(l)||(qf(t,e,2,!1),n.add(l))}function co(e,t,n){var l=0;t&&(l|=4),qf(n,e,l,t)}var Mi="_reactListening"+Math.random().toString(36).slice(2);function oo(e){if(!e[Mi]){e[Mi]=!0,Eu.forEach(function(n){n!=="selectionchange"&&(Vy.has(n)||co(n,!1,e),co(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mi]||(t[Mi]=!0,co("selectionchange",!1,t))}}function qf(e,t,n,l){switch(uh(t)){case 2:var r=v0;break;case 8:r=j0;break;default:r=wo}n=r.bind(null,t,n,e),r=void 0,!Ar||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),l?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function uo(e,t,n,l,r){var u=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var h=l.tag;if(h===3||h===4){var b=l.stateNode.containerInfo;if(b===r)break;if(h===4)for(h=l.return;h!==null;){var E=h.tag;if((E===3||E===4)&&h.stateNode.containerInfo===r)return;h=h.return}for(;b!==null;){if(h=za(b),h===null)return;if(E=h.tag,E===5||E===6||E===26||E===27){l=u=h;continue e}b=b.parentNode}}l=l.return}Fu(function(){var K=u,ee=Er(n),ae=[];e:{var G=fd.get(e);if(G!==void 0){var J=Yl,he=e;switch(e){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":J=Hx;break;case"focusin":he="focus",J=Mr;break;case"focusout":he="blur",J=Mr;break;case"beforeblur":case"afterblur":J=Mr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Tx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Kx;break;case od:case ud:case dd:J=Rx;break;case md:J=Gx;break;case"scroll":case"scrollend":J=Cx;break;case"wheel":J=Vx;break;case"copy":case"cut":case"paste":J=Mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Yu;break;case"toggle":case"beforetoggle":J=$x}var be=(t&4)!==0,ke=!be&&(e==="scroll"||e==="scrollend"),F=be?G!==null?G+"Capture":null:G;be=[];for(var U=K,Q;U!==null;){var ne=U;if(Q=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Q===null||F===null||(ne=Ms(U,F),ne!=null&&be.push(ml(U,ne,Q))),ke)break;U=U.return}0<be.length&&(G=new J(G,he,null,n,ee),ae.push({event:G,listeners:be}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",G&&n!==Cr&&(he=n.relatedTarget||n.fromElement)&&(za(he)||he[qa]))break e;if((J||G)&&(G=ee.window===ee?ee:(G=ee.ownerDocument)?G.defaultView||G.parentWindow:window,J?(he=n.relatedTarget||n.toElement,J=K,he=he?za(he):null,he!==null&&(ke=f(he),be=he.tag,he!==ke||be!==5&&be!==27&&be!==6)&&(he=null)):(J=null,he=K),J!==he)){if(be=Qu,ne="onMouseLeave",F="onMouseEnter",U="mouse",(e==="pointerout"||e==="pointerover")&&(be=Yu,ne="onPointerLeave",F="onPointerEnter",U="pointer"),ke=J==null?G:Os(J),Q=he==null?G:Os(he),G=new be(ne,U+"leave",J,n,ee),G.target=ke,G.relatedTarget=Q,ne=null,za(ee)===K&&(be=new be(F,U+"enter",he,n,ee),be.target=Q,be.relatedTarget=ke,ne=be),ke=ne,J&&he)t:{for(be=Zy,F=J,U=he,Q=0,ne=F;ne;ne=be(ne))Q++;ne=0;for(var ye=U;ye;ye=be(ye))ne++;for(;0<Q-ne;)F=be(F),Q--;for(;0<ne-Q;)U=be(U),ne--;for(;Q--;){if(F===U||U!==null&&F===U.alternate){be=F;break t}F=be(F),U=be(U)}be=null}else be=null;J!==null&&zf(ae,G,J,be,!1),he!==null&&ke!==null&&zf(ae,ke,he,be,!0)}}e:{if(G=K?Os(K):window,J=G.nodeName&&G.nodeName.toLowerCase(),J==="select"||J==="input"&&G.type==="file")var Ue=Wu;else if(Ju(G))if(Iu)Ue=ly;else{Ue=ay;var pe=ny}else J=G.nodeName,!J||J.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?K&&wr(K.elementType)&&(Ue=Wu):Ue=sy;if(Ue&&(Ue=Ue(e,K))){Pu(ae,Ue,n,ee);break e}pe&&pe(e,G,K),e==="focusout"&&K&&G.type==="number"&&K.memoizedProps.value!=null&&Sr(G,"number",G.value)}switch(pe=K?Os(K):window,e){case"focusin":(Ju(pe)||pe.contentEditable==="true")&&(Ga=pe,Fr=K,ks=null);break;case"focusout":ks=Fr=Ga=null;break;case"mousedown":Hr=!0;break;case"contextmenu":case"mouseup":case"dragend":Hr=!1,rd(ae,n,ee);break;case"selectionchange":if(ry)break;case"keydown":case"keyup":rd(ae,n,ee)}var Ee;if(qr)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ya?Zu(e,n)&&(Oe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Oe="onCompositionStart");Oe&&(Gu&&n.locale!=="ko"&&(Ya||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ya&&(Ee=Hu()):(Bn=ee,Dr="value"in Bn?Bn.value:Bn.textContent,Ya=!0)),pe=Ui(K,Oe),0<pe.length&&(Oe=new Ku(Oe,e,null,n,ee),ae.push({event:Oe,listeners:pe}),Ee?Oe.data=Ee:(Ee=$u(n),Ee!==null&&(Oe.data=Ee)))),(Ee=Px?Wx(e,n):Ix(e,n))&&(Oe=Ui(K,"onBeforeInput"),0<Oe.length&&(pe=new Ku("onBeforeInput","beforeinput",null,n,ee),ae.push({event:pe,listeners:Oe}),pe.data=Ee)),Yy(ae,e,K,n,ee)}Uf(ae,t)})}function ml(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ui(e,t){for(var n=t+"Capture",l=[];e!==null;){var r=e,u=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||u===null||(r=Ms(e,n),r!=null&&l.unshift(ml(e,r,u)),r=Ms(e,t),r!=null&&l.push(ml(e,r,u))),e.tag===3)return l;e=e.return}return[]}function Zy(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zf(e,t,n,l,r){for(var u=t._reactName,h=[];n!==null&&n!==l;){var b=n,E=b.alternate,K=b.stateNode;if(b=b.tag,E!==null&&E===l)break;b!==5&&b!==26&&b!==27||K===null||(E=K,r?(K=Ms(n,u),K!=null&&h.unshift(ml(n,K,E))):r||(K=Ms(n,u),K!=null&&h.push(ml(n,K,E)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var $y=/\r\n?/g,Jy=/\u0000|\uFFFD/g;function Lf(e){return(typeof e=="string"?e:""+e).replace($y,`
`).replace(Jy,"")}function Bf(e,t){return t=Lf(t),Lf(e)===t}function He(e,t,n,l,r,u){switch(n){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||ka(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&ka(e,""+l);break;case"className":Bl(e,"class",l);break;case"tabIndex":Bl(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Bl(e,n,l);break;case"style":Lu(e,l,u);break;case"data":if(t!=="object"){Bl(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Hl(""+l),e.setAttribute(n,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&He(e,t,"name",r.name,r,null),He(e,t,"formEncType",r.formEncType,r,null),He(e,t,"formMethod",r.formMethod,r,null),He(e,t,"formTarget",r.formTarget,r,null)):(He(e,t,"encType",r.encType,r,null),He(e,t,"method",r.method,r,null),He(e,t,"target",r.target,r,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(n);break}l=Hl(""+l),e.setAttribute(n,l);break;case"onClick":l!=null&&(e.onclick=xn);break;case"onScroll":l!=null&&De("scroll",e);break;case"onScrollEnd":l!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(r.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}n=Hl(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""+l):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":l===!0?e.setAttribute(n,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(n,l):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(n,l):e.removeAttribute(n);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(n):e.setAttribute(n,l);break;case"popover":De("beforetoggle",e),De("toggle",e),Ll(e,"popover",l);break;case"xlinkActuate":pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":pn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":pn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":pn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":pn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ll(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Sx.get(n)||n,Ll(e,n,l))}}function mo(e,t,n,l,r,u){switch(n){case"style":Lu(e,l,u);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(n=l.__html,n!=null){if(r.children!=null)throw Error(o(60));e.innerHTML=n}}break;case"children":typeof l=="string"?ka(e,l):(typeof l=="number"||typeof l=="bigint")&&ka(e,""+l);break;case"onScroll":l!=null&&De("scroll",e);break;case"onScrollEnd":l!=null&&De("scrollend",e);break;case"onClick":l!=null&&(e.onclick=xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tu.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),u=e[bt]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,r),typeof l=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,l,r);break e}n in e?e[n]=l:l===!0?e.setAttribute(n,""):Ll(e,n,l)}}}function ht(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var l=!1,r=!1,u;for(u in n)if(n.hasOwnProperty(u)){var h=n[u];if(h!=null)switch(u){case"src":l=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:He(e,t,u,h,n,null)}}r&&He(e,t,"srcSet",n.srcSet,n,null),l&&He(e,t,"src",n.src,n,null);return;case"input":De("invalid",e);var b=u=h=r=null,E=null,K=null;for(l in n)if(n.hasOwnProperty(l)){var ee=n[l];if(ee!=null)switch(l){case"name":r=ee;break;case"type":h=ee;break;case"checked":E=ee;break;case"defaultChecked":K=ee;break;case"value":u=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(o(137,t));break;default:He(e,t,l,ee,n,null)}}Mu(e,u,b,E,K,h,r,!1);return;case"select":De("invalid",e),l=h=u=null;for(r in n)if(n.hasOwnProperty(r)&&(b=n[r],b!=null))switch(r){case"value":u=b;break;case"defaultValue":h=b;break;case"multiple":l=b;default:He(e,t,r,b,n,null)}t=u,n=h,e.multiple=!!l,t!=null?Ha(e,!!l,t,!1):n!=null&&Ha(e,!!l,n,!0);return;case"textarea":De("invalid",e),u=r=l=null;for(h in n)if(n.hasOwnProperty(h)&&(b=n[h],b!=null))switch(h){case"value":l=b;break;case"defaultValue":r=b;break;case"children":u=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:He(e,t,h,b,n,null)}qu(e,l,r,u);return;case"option":for(E in n)if(n.hasOwnProperty(E)&&(l=n[E],l!=null))switch(E){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:He(e,t,E,l,n,null)}return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(l=0;l<dl.length;l++)De(dl[l],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in n)if(n.hasOwnProperty(K)&&(l=n[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:He(e,t,K,l,n,null)}return;default:if(wr(t)){for(ee in n)n.hasOwnProperty(ee)&&(l=n[ee],l!==void 0&&mo(e,t,ee,l,n,void 0));return}}for(b in n)n.hasOwnProperty(b)&&(l=n[b],l!=null&&He(e,t,b,l,n,null))}function Py(e,t,n,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,u=null,h=null,b=null,E=null,K=null,ee=null;for(J in n){var ae=n[J];if(n.hasOwnProperty(J)&&ae!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":E=ae;default:l.hasOwnProperty(J)||He(e,t,J,null,l,ae)}}for(var G in l){var J=l[G];if(ae=n[G],l.hasOwnProperty(G)&&(J!=null||ae!=null))switch(G){case"type":u=J;break;case"name":r=J;break;case"checked":K=J;break;case"defaultChecked":ee=J;break;case"value":h=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(o(137,t));break;default:J!==ae&&He(e,t,G,J,l,ae)}}Nr(e,h,b,E,K,ee,u,r);return;case"select":J=h=b=G=null;for(u in n)if(E=n[u],n.hasOwnProperty(u)&&E!=null)switch(u){case"value":break;case"multiple":J=E;default:l.hasOwnProperty(u)||He(e,t,u,null,l,E)}for(r in l)if(u=l[r],E=n[r],l.hasOwnProperty(r)&&(u!=null||E!=null))switch(r){case"value":G=u;break;case"defaultValue":b=u;break;case"multiple":h=u;default:u!==E&&He(e,t,r,u,l,E)}t=b,n=h,l=J,G!=null?Ha(e,!!n,G,!1):!!l!=!!n&&(t!=null?Ha(e,!!n,t,!0):Ha(e,!!n,n?[]:"",!1));return;case"textarea":J=G=null;for(b in n)if(r=n[b],n.hasOwnProperty(b)&&r!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:He(e,t,b,null,l,r)}for(h in l)if(r=l[h],u=n[h],l.hasOwnProperty(h)&&(r!=null||u!=null))switch(h){case"value":G=r;break;case"defaultValue":J=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(o(91));break;default:r!==u&&He(e,t,h,r,l,u)}Uu(e,G,J);return;case"option":for(var he in n)if(G=n[he],n.hasOwnProperty(he)&&G!=null&&!l.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:He(e,t,he,null,l,G)}for(E in l)if(G=l[E],J=n[E],l.hasOwnProperty(E)&&G!==J&&(G!=null||J!=null))switch(E){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:He(e,t,E,G,l,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in n)G=n[be],n.hasOwnProperty(be)&&G!=null&&!l.hasOwnProperty(be)&&He(e,t,be,null,l,G);for(K in l)if(G=l[K],J=n[K],l.hasOwnProperty(K)&&G!==J&&(G!=null||J!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,t));break;default:He(e,t,K,G,l,J)}return;default:if(wr(t)){for(var ke in n)G=n[ke],n.hasOwnProperty(ke)&&G!==void 0&&!l.hasOwnProperty(ke)&&mo(e,t,ke,void 0,l,G);for(ee in l)G=l[ee],J=n[ee],!l.hasOwnProperty(ee)||G===J||G===void 0&&J===void 0||mo(e,t,ee,G,l,J);return}}for(var F in n)G=n[F],n.hasOwnProperty(F)&&G!=null&&!l.hasOwnProperty(F)&&He(e,t,F,null,l,G);for(ae in l)G=l[ae],J=n[ae],!l.hasOwnProperty(ae)||G===J||G==null&&J==null||He(e,t,ae,G,l,J)}function Ff(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Wy(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),l=0;l<n.length;l++){var r=n[l],u=r.transferSize,h=r.initiatorType,b=r.duration;if(u&&b&&Ff(h)){for(h=0,b=r.responseEnd,l+=1;l<n.length;l++){var E=n[l],K=E.startTime;if(K>b)break;var ee=E.transferSize,ae=E.initiatorType;ee&&Ff(ae)&&(E=E.responseEnd,h+=ee*(E<b?1:(b-K)/(E-K)))}if(--l,t+=8*(u+h)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var fo=null,ho=null;function qi(e){return e.nodeType===9?e:e.ownerDocument}function Hf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function po(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xo=null;function Iy(){var e=window.event;return e&&e.type==="popstate"?e===xo?!1:(xo=e,!0):(xo=null,!1)}var Qf=typeof setTimeout=="function"?setTimeout:void 0,e0=typeof clearTimeout=="function"?clearTimeout:void 0,Kf=typeof Promise=="function"?Promise:void 0,t0=typeof queueMicrotask=="function"?queueMicrotask:typeof Kf<"u"?function(e){return Kf.resolve(null).then(e).catch(n0)}:Qf;function n0(e){setTimeout(function(){throw e})}function ta(e){return e==="head"}function Yf(e,t){var n=t,l=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(l===0){e.removeChild(r),gs(t);return}l--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")l++;else if(n==="html")fl(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,fl(n);for(var u=n.firstChild;u;){var h=u.nextSibling,b=u.nodeName;u[Rs]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&u.rel.toLowerCase()==="stylesheet"||n.removeChild(u),u=h}}else n==="body"&&fl(e.ownerDocument.body);n=r}while(n);gs(t)}function Gf(e,t){var n=e;e=0;do{var l=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=l}while(n)}function yo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":yo(n),vr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function a0(e,t,n,l){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Rs])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function s0(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=$t(e.nextSibling),e===null))return null;return e}function Xf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=$t(e.nextSibling),e===null))return null;return e}function go(e){return e.data==="$?"||e.data==="$~"}function bo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function l0(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var l=function(){t(),n.removeEventListener("DOMContentLoaded",l)};n.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var _o=null;function Vf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return $t(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Zf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function $f(e,t,n){switch(t=qi(n),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function fl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);vr(e)}var Jt=new Map,Jf=new Set;function zi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var On=P.d;P.d={f:i0,r:r0,D:c0,C:o0,L:u0,m:d0,X:f0,S:m0,M:h0};function i0(){var e=On.f(),t=Ei();return e||t}function r0(e){var t=La(e);t!==null&&t.tag===5&&t.type==="form"?mm(t):On.r(e)}var ps=typeof document>"u"?null:document;function Pf(e,t,n){var l=ps;if(l&&typeof t=="string"&&t){var r=Qt(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Jf.has(r)||(Jf.add(r),e={rel:e,crossOrigin:n,href:t},l.querySelector(r)===null&&(t=l.createElement("link"),ht(t,"link",e),ct(t),l.head.appendChild(t)))}}function c0(e){On.D(e),Pf("dns-prefetch",e,null)}function o0(e,t){On.C(e,t),Pf("preconnect",e,t)}function u0(e,t,n){On.L(e,t,n);var l=ps;if(l&&e&&t){var r='link[rel="preload"][as="'+Qt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Qt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Qt(n.imageSizes)+'"]')):r+='[href="'+Qt(e)+'"]';var u=r;switch(t){case"style":u=xs(e);break;case"script":u=ys(e)}Jt.has(u)||(e=_({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Jt.set(u,e),l.querySelector(r)!==null||t==="style"&&l.querySelector(hl(u))||t==="script"&&l.querySelector(pl(u))||(t=l.createElement("link"),ht(t,"link",e),ct(t),l.head.appendChild(t)))}}function d0(e,t){On.m(e,t);var n=ps;if(n&&e){var l=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Qt(l)+'"][href="'+Qt(e)+'"]',u=r;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=ys(e)}if(!Jt.has(u)&&(e=_({rel:"modulepreload",href:e},t),Jt.set(u,e),n.querySelector(r)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(pl(u)))return}l=n.createElement("link"),ht(l,"link",e),ct(l),n.head.appendChild(l)}}}function m0(e,t,n){On.S(e,t,n);var l=ps;if(l&&e){var r=Ba(l).hoistableStyles,u=xs(e);t=t||"default";var h=r.get(u);if(!h){var b={loading:0,preload:null};if(h=l.querySelector(hl(u)))b.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Jt.get(u))&&vo(e,n);var E=h=l.createElement("link");ct(E),ht(E,"link",e),E._p=new Promise(function(K,ee){E.onload=K,E.onerror=ee}),E.addEventListener("load",function(){b.loading|=1}),E.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Li(h,t,l)}h={type:"stylesheet",instance:h,count:1,state:b},r.set(u,h)}}}function f0(e,t){On.X(e,t);var n=ps;if(n&&e){var l=Ba(n).hoistableScripts,r=ys(e),u=l.get(r);u||(u=n.querySelector(pl(r)),u||(e=_({src:e,async:!0},t),(t=Jt.get(r))&&jo(e,t),u=n.createElement("script"),ct(u),ht(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(r,u))}}function h0(e,t){On.M(e,t);var n=ps;if(n&&e){var l=Ba(n).hoistableScripts,r=ys(e),u=l.get(r);u||(u=n.querySelector(pl(r)),u||(e=_({src:e,async:!0,type:"module"},t),(t=Jt.get(r))&&jo(e,t),u=n.createElement("script"),ct(u),ht(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},l.set(r,u))}}function Wf(e,t,n,l){var r=(r=_e.current)?zi(r):null;if(!r)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=xs(n.href),n=Ba(r).hoistableStyles,l=n.get(t),l||(l={type:"style",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=xs(n.href);var u=Ba(r).hoistableStyles,h=u.get(e);if(h||(r=r.ownerDocument||r,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=r.querySelector(hl(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Jt.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Jt.set(e,n),u||p0(r,e,n,h.state))),t&&l===null)throw Error(o(528,""));return h}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ys(n),n=Ba(r).hoistableScripts,l=n.get(t),l||(l={type:"script",instance:null,count:0,state:null},n.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function xs(e){return'href="'+Qt(e)+'"'}function hl(e){return'link[rel="stylesheet"]['+e+"]"}function If(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function p0(e,t,n,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),ht(t,"link",n),ct(t),e.head.appendChild(t))}function ys(e){return'[src="'+Qt(e)+'"]'}function pl(e){return"script[async]"+e}function eh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Qt(n.href)+'"]');if(l)return t.instance=l,ct(l),l;var r=_({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ct(l),ht(l,"style",r),Li(l,n.precedence,e),t.instance=l;case"stylesheet":r=xs(n.href);var u=e.querySelector(hl(r));if(u)return t.state.loading|=4,t.instance=u,ct(u),u;l=If(n),(r=Jt.get(r))&&vo(l,r),u=(e.ownerDocument||e).createElement("link"),ct(u);var h=u;return h._p=new Promise(function(b,E){h.onload=b,h.onerror=E}),ht(u,"link",l),t.state.loading|=4,Li(u,n.precedence,e),t.instance=u;case"script":return u=ys(n.src),(r=e.querySelector(pl(u)))?(t.instance=r,ct(r),r):(l=n,(r=Jt.get(u))&&(l=_({},n),jo(l,r)),e=e.ownerDocument||e,r=e.createElement("script"),ct(r),ht(r,"link",l),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Li(l,n.precedence,e));return t.instance}function Li(e,t,n){for(var l=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=l.length?l[l.length-1]:null,u=r,h=0;h<l.length;h++){var b=l[h];if(b.dataset.precedence===t)u=b;else if(u!==r)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function vo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function jo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Bi=null;function th(e,t,n){if(Bi===null){var l=new Map,r=Bi=new Map;r.set(n,l)}else r=Bi,l=r.get(n),l||(l=new Map,r.set(n,l));if(l.has(e))return l;for(l.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var u=n[r];if(!(u[Rs]||u[ut]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var b=l.get(h);b?b.push(u):l.set(h,[u])}}return l}function nh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function x0(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ah(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function y0(e,t,n,l){if(n.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var r=xs(l.href),u=t.querySelector(hl(r));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Fi.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=u,ct(u);return}u=t.ownerDocument||t,l=If(l),(r=Jt.get(r))&&vo(l,r),u=u.createElement("link"),ct(u);var h=u;h._p=new Promise(function(b,E){h.onload=b,h.onerror=E}),ht(u,"link",l),n.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=Fi.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var No=0;function g0(e,t){return e.stylesheets&&e.count===0&&ki(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var l=setTimeout(function(){if(e.stylesheets&&ki(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&No===0&&(No=62500*Wy());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ki(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>No?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(r)}}:null}function Fi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ki(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hi=null;function ki(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hi=new Map,t.forEach(b0,e),Hi=null,Fi.call(e))}function b0(e,t){if(!(t.state.loading&4)){var n=Hi.get(e);if(n)var l=n.get(null);else{n=new Map,Hi.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<r.length;u++){var h=r[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),l=h)}l&&n.set(null,l)}r=t.instance,h=r.getAttribute("data-precedence"),u=n.get(h)||l,u===l&&n.set(null,r),n.set(h,r),this.count++,l=Fi.bind(this),r.addEventListener("load",l),r.addEventListener("error",l),u?u.parentNode.insertBefore(r,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var xl={$$typeof:j,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function _0(e,t,n,l,r,u,h,b,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yr(0),this.hiddenUpdates=yr(null),this.identifierPrefix=l,this.onUncaughtError=r,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function sh(e,t,n,l,r,u,h,b,E,K,ee,ae){return e=new _0(e,t,n,h,E,K,ee,ae,b),t=1,u===!0&&(t|=24),u=Mt(3,null,null,t),e.current=u,u.stateNode=e,t=tc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:l,isDehydrated:n,cache:t},lc(u),e}function lh(e){return e?(e=Za,e):Za}function ih(e,t,n,l,r,u){r=lh(r),l.context===null?l.context=r:l.pendingContext=r,l=Yn(t),l.payload={element:n},u=u===void 0?null:u,u!==null&&(l.callback=u),n=Gn(e,l,t),n!==null&&(wt(n,e,t),Zs(n,e,t))}function rh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function So(e,t){rh(e,t),(e=e.alternate)&&rh(e,t)}function ch(e){if(e.tag===13||e.tag===31){var t=xa(e,67108864);t!==null&&wt(t,e,67108864),So(e,67108864)}}function oh(e){if(e.tag===13||e.tag===31){var t=Bt();t=gr(t);var n=xa(e,t);n!==null&&wt(n,e,t),So(e,t)}}var Qi=!0;function v0(e,t,n,l){var r=O.T;O.T=null;var u=P.p;try{P.p=2,wo(e,t,n,l)}finally{P.p=u,O.T=r}}function j0(e,t,n,l){var r=O.T;O.T=null;var u=P.p;try{P.p=8,wo(e,t,n,l)}finally{P.p=u,O.T=r}}function wo(e,t,n,l){if(Qi){var r=Co(l);if(r===null)uo(e,t,l,Ki,n),dh(e,l);else if(S0(r,e,t,n,l))l.stopPropagation();else if(dh(e,l),t&4&&-1<N0.indexOf(e)){for(;r!==null;){var u=La(r);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=da(u.pendingLanes);if(h!==0){var b=u;for(b.pendingLanes|=2,b.entangledLanes|=2;h;){var E=1<<31-Rt(h);b.entanglements[1]|=E,h&=~E}dn(u),(ze&6)===0&&(wi=At()+500,ul(0))}}break;case 31:case 13:b=xa(u,2),b!==null&&wt(b,u,2),Ei(),So(u,2)}if(u=Co(l),u===null&&uo(e,t,l,Ki,n),u===r)break;r=u}r!==null&&l.stopPropagation()}else uo(e,t,l,null,n)}}function Co(e){return e=Er(e),Eo(e)}var Ki=null;function Eo(e){if(Ki=null,e=za(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=m(t),e!==null)return e;e=null}else if(n===31){if(e=x(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ki=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cx()){case yu:return 2;case gu:return 8;case Ol:case ox:return 32;case bu:return 268435456;default:return 32}default:return 32}}var To=!1,na=null,aa=null,sa=null,yl=new Map,gl=new Map,la=[],N0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dh(e,t){switch(e){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":sa=null;break;case"pointerover":case"pointerout":yl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(t.pointerId)}}function bl(e,t,n,l,r,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:l,nativeEvent:u,targetContainers:[r]},t!==null&&(t=La(t),t!==null&&ch(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function S0(e,t,n,l,r){switch(t){case"focusin":return na=bl(na,e,t,n,l,r),!0;case"dragenter":return aa=bl(aa,e,t,n,l,r),!0;case"mouseover":return sa=bl(sa,e,t,n,l,r),!0;case"pointerover":var u=r.pointerId;return yl.set(u,bl(yl.get(u)||null,e,t,n,l,r)),!0;case"gotpointercapture":return u=r.pointerId,gl.set(u,bl(gl.get(u)||null,e,t,n,l,r)),!0}return!1}function mh(e){var t=za(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=m(n),t!==null){e.blockedOn=t,wu(e.priority,function(){oh(n)});return}}else if(t===31){if(t=x(n),t!==null){e.blockedOn=t,wu(e.priority,function(){oh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Co(e.nativeEvent);if(n===null){n=e.nativeEvent;var l=new n.constructor(n.type,n);Cr=l,n.target.dispatchEvent(l),Cr=null}else return t=La(n),t!==null&&ch(t),e.blockedOn=n,!1;t.shift()}return!0}function fh(e,t,n){Yi(e)&&n.delete(t)}function w0(){To=!1,na!==null&&Yi(na)&&(na=null),aa!==null&&Yi(aa)&&(aa=null),sa!==null&&Yi(sa)&&(sa=null),yl.forEach(fh),gl.forEach(fh)}function Gi(e,t){e.blockedOn===t&&(e.blockedOn=null,To||(To=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,w0)))}var Xi=null;function hh(e){Xi!==e&&(Xi=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Xi===e&&(Xi=null);for(var t=0;t<e.length;t+=3){var n=e[t],l=e[t+1],r=e[t+2];if(typeof l!="function"){if(Eo(l||n)===null)continue;break}var u=La(n);u!==null&&(e.splice(t,3),t-=3,wc(u,{pending:!0,data:r,method:n.method,action:l},l,r))}}))}function gs(e){function t(E){return Gi(E,e)}na!==null&&Gi(na,e),aa!==null&&Gi(aa,e),sa!==null&&Gi(sa,e),yl.forEach(t),gl.forEach(t);for(var n=0;n<la.length;n++){var l=la[n];l.blockedOn===e&&(l.blockedOn=null)}for(;0<la.length&&(n=la[0],n.blockedOn===null);)mh(n),n.blockedOn===null&&la.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(l=0;l<n.length;l+=3){var r=n[l],u=n[l+1],h=r[bt]||null;if(typeof u=="function")h||hh(n);else if(h){var b=null;if(u&&u.hasAttribute("formAction")){if(r=u,h=u[bt]||null)b=h.formAction;else if(Eo(r)!==null)continue}else b=h.action;typeof b=="function"?n[l+1]=b:(n.splice(l,3),l-=3),hh(n)}}}function ph(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(h){return r=h})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),l||setTimeout(n,20)}function n(){if(!l&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Ao(e){this._internalRoot=e}Vi.prototype.render=Ao.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var n=t.current,l=Bt();ih(n,l,e,t,null,null)},Vi.prototype.unmount=Ao.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ih(e.current,2,null,e,null,null),Ei(),t[qa]=null}};function Vi(e){this._internalRoot=e}Vi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Su();e={blockedOn:null,target:e,priority:t};for(var n=0;n<la.length&&t!==0&&t<la[n].priority;n++);la.splice(n,0,e),n===0&&mh(e)}};var xh=i.version;if(xh!=="19.2.0")throw Error(o(527,xh,"19.2.0"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var C0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zi.isDisabled&&Zi.supportsFiber)try{Ts=Zi.inject(C0),Dt=Zi}catch{}}return vl.createRoot=function(e,t){if(!d(e))throw Error(o(299));var n=!1,l="",r=jm,u=Nm,h=Sm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=sh(e,1,!1,null,null,n,l,null,r,u,h,ph),e[qa]=t.current,oo(e),new Ao(t)},vl.hydrateRoot=function(e,t,n){if(!d(e))throw Error(o(299));var l=!1,r="",u=jm,h=Nm,b=Sm,E=null;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.formState!==void 0&&(E=n.formState)),t=sh(e,1,!0,t,n??null,l,r,E,u,h,b,ph),t.context=lh(null),n=t.current,l=Bt(),l=gr(l),r=Yn(l),r.callback=null,Gn(n,r,l),n=l,t.current.lanes=n,Ds(t,n),dn(t),e[qa]=t.current,oo(e),new Vi(t)},vl.version="19.2.0",vl}var Ch;function B0(){if(Ch)return Oo.exports;Ch=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(i){console.error(i)}}return s(),Oo.exports=L0(),Oo.exports}var F0=B0();var Eh="popstate";function H0(s={}){function i(o,d){let{pathname:f,search:m,hash:x}=o.location;return ko("",{pathname:f,search:m,hash:x},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function c(o,d){return typeof d=="string"?d:Sl(d)}return Q0(i,c,null,s)}function Xe(s,i){if(s===!1||s===null||typeof s>"u")throw new Error(i)}function Ft(s,i){if(!s){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function k0(){return Math.random().toString(36).substring(2,10)}function Th(s,i){return{usr:s.state,key:s.key,idx:i}}function ko(s,i,c=null,o){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof i=="string"?_s(i):i,state:c,key:i&&i.key||o||k0()}}function Sl({pathname:s="/",search:i="",hash:c=""}){return i&&i!=="?"&&(s+=i.charAt(0)==="?"?i:"?"+i),c&&c!=="#"&&(s+=c.charAt(0)==="#"?c:"#"+c),s}function _s(s){let i={};if(s){let c=s.indexOf("#");c>=0&&(i.hash=s.substring(c),s=s.substring(0,c));let o=s.indexOf("?");o>=0&&(i.search=s.substring(o),s=s.substring(0,o)),s&&(i.pathname=s)}return i}function Q0(s,i,c,o={}){let{window:d=document.defaultView,v5Compat:f=!1}=o,m=d.history,x="POP",g=null,p=y();p==null&&(p=0,m.replaceState({...m.state,idx:p},""));function y(){return(m.state||{idx:null}).idx}function _(){x="POP";let S=y(),z=S==null?null:S-p;p=S,g&&g({action:x,location:M.location,delta:z})}function T(S,z){x="PUSH";let q=ko(M.location,S,z);p=y()+1;let j=Th(q,p),k=M.createHref(q);try{m.pushState(j,"",k)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;d.location.assign(k)}f&&g&&g({action:x,location:M.location,delta:1})}function A(S,z){x="REPLACE";let q=ko(M.location,S,z);p=y();let j=Th(q,p),k=M.createHref(q);m.replaceState(j,"",k),f&&g&&g({action:x,location:M.location,delta:0})}function w(S){return K0(S)}let M={get action(){return x},get location(){return s(d,m)},listen(S){if(g)throw new Error("A history only accepts one active listener");return d.addEventListener(Eh,_),g=S,()=>{d.removeEventListener(Eh,_),g=null}},createHref(S){return i(d,S)},createURL:w,encodeLocation(S){let z=w(S);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:T,replace:A,go(S){return m.go(S)}};return M}function K0(s,i=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(c,"No window.location.(origin|href) available to create URL");let o=typeof s=="string"?s:Sl(s);return o=o.replace(/ $/,"%20"),!i&&o.startsWith("//")&&(o=c+o),new URL(o,c)}function cp(s,i,c="/"){return Y0(s,i,c,!1)}function Y0(s,i,c,o){let d=typeof i=="string"?_s(i):i,f=Un(d.pathname||"/",c);if(f==null)return null;let m=op(s);G0(m);let x=null;for(let g=0;x==null&&g<m.length;++g){let p=ng(f);x=eg(m[g],p,o)}return x}function op(s,i=[],c=[],o="",d=!1){let f=(m,x,g=d,p)=>{let y={relativePath:p===void 0?m.path||"":p,caseSensitive:m.caseSensitive===!0,childrenIndex:x,route:m};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&g)return;Xe(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let _=Mn([o,y.relativePath]),T=c.concat(y);m.children&&m.children.length>0&&(Xe(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),op(m.children,i,T,_,g)),!(m.path==null&&!m.index)&&i.push({path:_,score:W0(_,m.index),routesMeta:T})};return s.forEach((m,x)=>{if(m.path===""||!m.path?.includes("?"))f(m,x);else for(let g of up(m.path))f(m,x,!0,g)}),i}function up(s){let i=s.split("/");if(i.length===0)return[];let[c,...o]=i,d=c.endsWith("?"),f=c.replace(/\?$/,"");if(o.length===0)return d?[f,""]:[f];let m=up(o.join("/")),x=[];return x.push(...m.map(g=>g===""?f:[f,g].join("/"))),d&&x.push(...m),x.map(g=>s.startsWith("/")&&g===""?"/":g)}function G0(s){s.sort((i,c)=>i.score!==c.score?c.score-i.score:I0(i.routesMeta.map(o=>o.childrenIndex),c.routesMeta.map(o=>o.childrenIndex)))}var X0=/^:[\w-]+$/,V0=3,Z0=2,$0=1,J0=10,P0=-2,Ah=s=>s==="*";function W0(s,i){let c=s.split("/"),o=c.length;return c.some(Ah)&&(o+=P0),i&&(o+=Z0),c.filter(d=>!Ah(d)).reduce((d,f)=>d+(X0.test(f)?V0:f===""?$0:J0),o)}function I0(s,i){return s.length===i.length&&s.slice(0,-1).every((o,d)=>o===i[d])?s[s.length-1]-i[i.length-1]:0}function eg(s,i,c=!1){let{routesMeta:o}=s,d={},f="/",m=[];for(let x=0;x<o.length;++x){let g=o[x],p=x===o.length-1,y=f==="/"?i:i.slice(f.length)||"/",_=lr({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},y),T=g.route;if(!_&&p&&c&&!o[o.length-1].route.index&&(_=lr({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!_)return null;Object.assign(d,_.params),m.push({params:d,pathname:Mn([f,_.pathname]),pathnameBase:rg(Mn([f,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(f=Mn([f,_.pathnameBase]))}return m}function lr(s,i){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[c,o]=tg(s.path,s.caseSensitive,s.end),d=i.match(c);if(!d)return null;let f=d[0],m=f.replace(/(.)\/+$/,"$1"),x=d.slice(1);return{params:o.reduce((p,{paramName:y,isOptional:_},T)=>{if(y==="*"){let w=x[T]||"";m=f.slice(0,f.length-w.length).replace(/(.)\/+$/,"$1")}const A=x[T];return _&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:f,pathnameBase:m,pattern:s}}function tg(s,i=!1,c=!0){Ft(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let o=[],d="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,x,g)=>(o.push({paramName:x,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(o.push({paramName:"*"}),d+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?d+="\\/*$":s!==""&&s!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,i?void 0:"i"),o]}function ng(s){try{return s.split("/").map(i=>decodeURIComponent(i).replace(/\//g,"%2F")).join("/")}catch(i){return Ft(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${i}).`),s}}function Un(s,i){if(i==="/")return s;if(!s.toLowerCase().startsWith(i.toLowerCase()))return null;let c=i.endsWith("/")?i.length-1:i.length,o=s.charAt(c);return o&&o!=="/"?null:s.slice(c)||"/"}var ag=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sg=s=>ag.test(s);function lg(s,i="/"){let{pathname:c,search:o="",hash:d=""}=typeof s=="string"?_s(s):s,f;if(c)if(sg(c))f=c;else{if(c.includes("//")){let m=c;c=c.replace(/\/\/+/g,"/"),Ft(!1,`Pathnames cannot have embedded double slashes - normalizing ${m} -> ${c}`)}c.startsWith("/")?f=Dh(c.substring(1),"/"):f=Dh(c,i)}else f=i;return{pathname:f,search:cg(o),hash:og(d)}}function Dh(s,i){let c=i.replace(/\/+$/,"").split("/");return s.split("/").forEach(d=>{d===".."?c.length>1&&c.pop():d!=="."&&c.push(d)}),c.length>1?c.join("/"):"/"}function zo(s,i,c,o){return`Cannot include a '${s}' character in a manually specified \`to.${i}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ig(s){return s.filter((i,c)=>c===0||i.route.path&&i.route.path.length>0)}function tu(s){let i=ig(s);return i.map((c,o)=>o===i.length-1?c.pathname:c.pathnameBase)}function nu(s,i,c,o=!1){let d;typeof s=="string"?d=_s(s):(d={...s},Xe(!d.pathname||!d.pathname.includes("?"),zo("?","pathname","search",d)),Xe(!d.pathname||!d.pathname.includes("#"),zo("#","pathname","hash",d)),Xe(!d.search||!d.search.includes("#"),zo("#","search","hash",d)));let f=s===""||d.pathname==="",m=f?"/":d.pathname,x;if(m==null)x=c;else{let _=i.length-1;if(!o&&m.startsWith("..")){let T=m.split("/");for(;T[0]==="..";)T.shift(),_-=1;d.pathname=T.join("/")}x=_>=0?i[_]:"/"}let g=lg(d,x),p=m&&m!=="/"&&m.endsWith("/"),y=(f||m===".")&&c.endsWith("/");return!g.pathname.endsWith("/")&&(p||y)&&(g.pathname+="/"),g}var Mn=s=>s.join("/").replace(/\/\/+/g,"/"),rg=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),cg=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,og=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function ug(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dp=["POST","PUT","PATCH","DELETE"];new Set(dp);var dg=["GET",...dp];new Set(dg);var vs=N.createContext(null);vs.displayName="DataRouter";var ur=N.createContext(null);ur.displayName="DataRouterState";N.createContext(!1);var mp=N.createContext({isTransitioning:!1});mp.displayName="ViewTransition";var mg=N.createContext(new Map);mg.displayName="Fetchers";var fg=N.createContext(null);fg.displayName="Await";var sn=N.createContext(null);sn.displayName="Navigation";var Cl=N.createContext(null);Cl.displayName="Location";var ln=N.createContext({outlet:null,matches:[],isDataRoute:!1});ln.displayName="Route";var au=N.createContext(null);au.displayName="RouteError";function hg(s,{relative:i}={}){Xe(js(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:o}=N.useContext(sn),{hash:d,pathname:f,search:m}=El(s,{relative:i}),x=f;return c!=="/"&&(x=f==="/"?c:Mn([c,f])),o.createHref({pathname:x,search:m,hash:d})}function js(){return N.useContext(Cl)!=null}function fn(){return Xe(js(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Cl).location}var fp="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hp(s){N.useContext(sn).static||N.useLayoutEffect(s)}function ca(){let{isDataRoute:s}=N.useContext(ln);return s?Eg():pg()}function pg(){Xe(js(),"useNavigate() may be used only in the context of a <Router> component.");let s=N.useContext(vs),{basename:i,navigator:c}=N.useContext(sn),{matches:o}=N.useContext(ln),{pathname:d}=fn(),f=JSON.stringify(tu(o)),m=N.useRef(!1);return hp(()=>{m.current=!0}),N.useCallback((g,p={})=>{if(Ft(m.current,fp),!m.current)return;if(typeof g=="number"){c.go(g);return}let y=nu(g,JSON.parse(f),d,p.relative==="path");s==null&&i!=="/"&&(y.pathname=y.pathname==="/"?i:Mn([i,y.pathname])),(p.replace?c.replace:c.push)(y,p.state,p)},[i,c,f,d,s])}N.createContext(null);function pp(){let{matches:s}=N.useContext(ln),i=s[s.length-1];return i?i.params:{}}function El(s,{relative:i}={}){let{matches:c}=N.useContext(ln),{pathname:o}=fn(),d=JSON.stringify(tu(c));return N.useMemo(()=>nu(s,JSON.parse(d),o,i==="path"),[s,d,o,i])}function xg(s,i){return xp(s,i)}function xp(s,i,c,o,d){Xe(js(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=N.useContext(sn),{matches:m}=N.useContext(ln),x=m[m.length-1],g=x?x.params:{},p=x?x.pathname:"/",y=x?x.pathnameBase:"/",_=x&&x.route;{let q=_&&_.path||"";yp(p,!_||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let T=fn(),A;if(i){let q=typeof i=="string"?_s(i):i;Xe(y==="/"||q.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${q.pathname}" was given in the \`location\` prop.`),A=q}else A=T;let w=A.pathname||"/",M=w;if(y!=="/"){let q=y.replace(/^\//,"").split("/");M="/"+w.replace(/^\//,"").split("/").slice(q.length).join("/")}let S=cp(s,{pathname:M});Ft(_||S!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Ft(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=vg(S&&S.map(q=>Object.assign({},q,{params:Object.assign({},g,q.params),pathname:Mn([y,f.encodeLocation?f.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?y:Mn([y,f.encodeLocation?f.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),m,c,o,d);return i&&z?N.createElement(Cl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},z):z}function yg(){let s=Cg(),i=ug(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),c=s instanceof Error?s.stack:null,o="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:o},f={padding:"2px 4px",backgroundColor:o},m=null;return console.error("Error handled by React Router default ErrorBoundary:",s),m=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:f},"ErrorBoundary")," or"," ",N.createElement("code",{style:f},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},i),c?N.createElement("pre",{style:d},c):null,m)}var gg=N.createElement(yg,null),bg=class extends N.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,i){return i.location!==s.location||i.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:i.error,location:i.location,revalidation:s.revalidation||i.revalidation}}componentDidCatch(s,i){this.props.onError?this.props.onError(s,i):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?N.createElement(ln.Provider,{value:this.props.routeContext},N.createElement(au.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _g({routeContext:s,match:i,children:c}){let o=N.useContext(vs);return o&&o.static&&o.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=i.route.id),N.createElement(ln.Provider,{value:s},c)}function vg(s,i=[],c=null,o=null,d=null){if(s==null){if(!c)return null;if(c.errors)s=c.matches;else if(i.length===0&&!c.initialized&&c.matches.length>0)s=c.matches;else return null}let f=s,m=c?.errors;if(m!=null){let y=f.findIndex(_=>_.route.id&&m?.[_.route.id]!==void 0);Xe(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),f=f.slice(0,Math.min(f.length,y+1))}let x=!1,g=-1;if(c)for(let y=0;y<f.length;y++){let _=f[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(g=y),_.route.id){let{loaderData:T,errors:A}=c,w=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||w){x=!0,g>=0?f=f.slice(0,g+1):f=[f[0]];break}}}let p=c&&o?(y,_)=>{o(y,{location:c.location,params:c.matches?.[0]?.params??{},errorInfo:_})}:void 0;return f.reduceRight((y,_,T)=>{let A,w=!1,M=null,S=null;c&&(A=m&&_.route.id?m[_.route.id]:void 0,M=_.route.errorElement||gg,x&&(g<0&&T===0?(yp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):g===T&&(w=!0,S=_.route.hydrateFallbackElement||null)));let z=i.concat(f.slice(0,T+1)),q=()=>{let j;return A?j=M:w?j=S:_.route.Component?j=N.createElement(_.route.Component,null):_.route.element?j=_.route.element:j=y,N.createElement(_g,{match:_,routeContext:{outlet:y,matches:z,isDataRoute:c!=null},children:j})};return c&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?N.createElement(bg,{location:c.location,revalidation:c.revalidation,component:M,error:A,children:q(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:p}):q()},null)}function su(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jg(s){let i=N.useContext(vs);return Xe(i,su(s)),i}function Ng(s){let i=N.useContext(ur);return Xe(i,su(s)),i}function Sg(s){let i=N.useContext(ln);return Xe(i,su(s)),i}function lu(s){let i=Sg(s),c=i.matches[i.matches.length-1];return Xe(c.route.id,`${s} can only be used on routes that contain a unique "id"`),c.route.id}function wg(){return lu("useRouteId")}function Cg(){let s=N.useContext(au),i=Ng("useRouteError"),c=lu("useRouteError");return s!==void 0?s:i.errors?.[c]}function Eg(){let{router:s}=jg("useNavigate"),i=lu("useNavigate"),c=N.useRef(!1);return hp(()=>{c.current=!0}),N.useCallback(async(d,f={})=>{Ft(c.current,fp),c.current&&(typeof d=="number"?s.navigate(d):await s.navigate(d,{fromRouteId:i,...f}))},[s,i])}var Rh={};function yp(s,i,c){!i&&!Rh[s]&&(Rh[s]=!0,Ft(!1,c))}N.memo(Tg);function Tg({routes:s,future:i,state:c,unstable_onError:o}){return xp(s,void 0,c,o,i)}function ir({to:s,replace:i,state:c,relative:o}){Xe(js(),"<Navigate> may be used only in the context of a <Router> component.");let{static:d}=N.useContext(sn);Ft(!d,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:f}=N.useContext(ln),{pathname:m}=fn(),x=ca(),g=nu(s,tu(f),m,o==="path"),p=JSON.stringify(g);return N.useEffect(()=>{x(JSON.parse(p),{replace:i,state:c,relative:o})},[x,p,o,i,c]),null}function Ct(s){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ag({basename:s="/",children:i=null,location:c,navigationType:o="POP",navigator:d,static:f=!1}){Xe(!js(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),x=N.useMemo(()=>({basename:m,navigator:d,static:f,future:{}}),[m,d,f]);typeof c=="string"&&(c=_s(c));let{pathname:g="/",search:p="",hash:y="",state:_=null,key:T="default"}=c,A=N.useMemo(()=>{let w=Un(g,m);return w==null?null:{location:{pathname:w,search:p,hash:y,state:_,key:T},navigationType:o}},[m,g,p,y,_,T,o]);return Ft(A!=null,`<Router basename="${m}"> is not able to match the URL "${g}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:N.createElement(sn.Provider,{value:x},N.createElement(Cl.Provider,{children:i,value:A}))}function Dg({children:s,location:i}){return xg(Qo(s),i)}function Qo(s,i=[]){let c=[];return N.Children.forEach(s,(o,d)=>{if(!N.isValidElement(o))return;let f=[...i,d];if(o.type===N.Fragment){c.push.apply(c,Qo(o.props.children,f));return}Xe(o.type===Ct,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!o.props.index||!o.props.children,"An index route cannot have child routes.");let m={id:o.props.id||f.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=Qo(o.props.children,f)),c.push(m)}),c}var er="get",tr="application/x-www-form-urlencoded";function dr(s){return s!=null&&typeof s.tagName=="string"}function Rg(s){return dr(s)&&s.tagName.toLowerCase()==="button"}function Og(s){return dr(s)&&s.tagName.toLowerCase()==="form"}function Mg(s){return dr(s)&&s.tagName.toLowerCase()==="input"}function Ug(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function qg(s,i){return s.button===0&&(!i||i==="_self")&&!Ug(s)}function Ko(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((i,c)=>{let o=s[c];return i.concat(Array.isArray(o)?o.map(d=>[c,d]):[[c,o]])},[]))}function zg(s,i){let c=Ko(s);return i&&i.forEach((o,d)=>{c.has(d)||i.getAll(d).forEach(f=>{c.append(d,f)})}),c}var $i=null;function Lg(){if($i===null)try{new FormData(document.createElement("form"),0),$i=!1}catch{$i=!0}return $i}var Bg=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lo(s){return s!=null&&!Bg.has(s)?(Ft(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tr}"`),null):s}function Fg(s,i){let c,o,d,f,m;if(Og(s)){let x=s.getAttribute("action");o=x?Un(x,i):null,c=s.getAttribute("method")||er,d=Lo(s.getAttribute("enctype"))||tr,f=new FormData(s)}else if(Rg(s)||Mg(s)&&(s.type==="submit"||s.type==="image")){let x=s.form;if(x==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||x.getAttribute("action");if(o=g?Un(g,i):null,c=s.getAttribute("formmethod")||x.getAttribute("method")||er,d=Lo(s.getAttribute("formenctype"))||Lo(x.getAttribute("enctype"))||tr,f=new FormData(x,s),!Lg()){let{name:p,type:y,value:_}=s;if(y==="image"){let T=p?`${p}.`:"";f.append(`${T}x`,"0"),f.append(`${T}y`,"0")}else p&&f.append(p,_)}}else{if(dr(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=er,o=null,d=tr,m=s}return f&&d==="text/plain"&&(m=f,f=void 0),{action:o,method:c.toLowerCase(),encType:d,formData:f,body:m}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iu(s,i){if(s===!1||s===null||typeof s>"u")throw new Error(i)}function Hg(s,i,c){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return o.pathname==="/"?o.pathname=`_root.${c}`:i&&Un(o.pathname,i)==="/"?o.pathname=`${i.replace(/\/$/,"")}/_root.${c}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${c}`,o}async function kg(s,i){if(s.id in i)return i[s.id];try{let c=await import(s.module);return i[s.id]=c,c}catch(c){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qg(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Kg(s,i,c){let o=await Promise.all(s.map(async d=>{let f=i.routes[d.route.id];if(f){let m=await kg(f,c);return m.links?m.links():[]}return[]}));return Vg(o.flat(1).filter(Qg).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function Oh(s,i,c,o,d,f){let m=(g,p)=>c[p]?g.route.id!==c[p].route.id:!0,x=(g,p)=>c[p].pathname!==g.pathname||c[p].route.path?.endsWith("*")&&c[p].params["*"]!==g.params["*"];return f==="assets"?i.filter((g,p)=>m(g,p)||x(g,p)):f==="data"?i.filter((g,p)=>{let y=o.routes[g.route.id];if(!y||!y.hasLoader)return!1;if(m(g,p)||x(g,p))return!0;if(g.route.shouldRevalidate){let _=g.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:c[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function Yg(s,i,{includeHydrateFallback:c}={}){return Gg(s.map(o=>{let d=i.routes[o.route.id];if(!d)return[];let f=[d.module];return d.clientActionModule&&(f=f.concat(d.clientActionModule)),d.clientLoaderModule&&(f=f.concat(d.clientLoaderModule)),c&&d.hydrateFallbackModule&&(f=f.concat(d.hydrateFallbackModule)),d.imports&&(f=f.concat(d.imports)),f}).flat(1))}function Gg(s){return[...new Set(s)]}function Xg(s){let i={},c=Object.keys(s).sort();for(let o of c)i[o]=s[o];return i}function Vg(s,i){let c=new Set;return new Set(i),s.reduce((o,d)=>{let f=JSON.stringify(Xg(d));return c.has(f)||(c.add(f),o.push({key:f,link:d})),o},[])}function gp(){let s=N.useContext(vs);return iu(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function Zg(){let s=N.useContext(ur);return iu(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ru=N.createContext(void 0);ru.displayName="FrameworkContext";function bp(){let s=N.useContext(ru);return iu(s,"You must render this element inside a <HydratedRouter> element"),s}function $g(s,i){let c=N.useContext(ru),[o,d]=N.useState(!1),[f,m]=N.useState(!1),{onFocus:x,onBlur:g,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=i,T=N.useRef(null);N.useEffect(()=>{if(s==="render"&&m(!0),s==="viewport"){let M=z=>{z.forEach(q=>{m(q.isIntersecting)})},S=new IntersectionObserver(M,{threshold:.5});return T.current&&S.observe(T.current),()=>{S.disconnect()}}},[s]),N.useEffect(()=>{if(o){let M=setTimeout(()=>{m(!0)},100);return()=>{clearTimeout(M)}}},[o]);let A=()=>{d(!0)},w=()=>{d(!1),m(!1)};return c?s!=="intent"?[f,T,{}]:[f,T,{onFocus:jl(x,A),onBlur:jl(g,w),onMouseEnter:jl(p,A),onMouseLeave:jl(y,w),onTouchStart:jl(_,A)}]:[!1,T,{}]}function jl(s,i){return c=>{s&&s(c),c.defaultPrevented||i(c)}}function Jg({page:s,...i}){let{router:c}=gp(),o=N.useMemo(()=>cp(c.routes,s,c.basename),[c.routes,s,c.basename]);return o?N.createElement(Wg,{page:s,matches:o,...i}):null}function Pg(s){let{manifest:i,routeModules:c}=bp(),[o,d]=N.useState([]);return N.useEffect(()=>{let f=!1;return Kg(s,i,c).then(m=>{f||d(m)}),()=>{f=!0}},[s,i,c]),o}function Wg({page:s,matches:i,...c}){let o=fn(),{manifest:d,routeModules:f}=bp(),{basename:m}=gp(),{loaderData:x,matches:g}=Zg(),p=N.useMemo(()=>Oh(s,i,g,d,o,"data"),[s,i,g,d,o]),y=N.useMemo(()=>Oh(s,i,g,d,o,"assets"),[s,i,g,d,o]),_=N.useMemo(()=>{if(s===o.pathname+o.search+o.hash)return[];let w=new Set,M=!1;if(i.forEach(z=>{let q=d.routes[z.route.id];!q||!q.hasLoader||(!p.some(j=>j.route.id===z.route.id)&&z.route.id in x&&f[z.route.id]?.shouldRevalidate||q.hasClientLoader?M=!0:w.add(z.route.id))}),w.size===0)return[];let S=Hg(s,m,"data");return M&&w.size>0&&S.searchParams.set("_routes",i.filter(z=>w.has(z.route.id)).map(z=>z.route.id).join(",")),[S.pathname+S.search]},[m,x,o,d,p,i,s,f]),T=N.useMemo(()=>Yg(y,d),[y,d]),A=Pg(y);return N.createElement(N.Fragment,null,_.map(w=>N.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...c})),T.map(w=>N.createElement("link",{key:w,rel:"modulepreload",href:w,...c})),A.map(({key:w,link:M})=>N.createElement("link",{key:w,nonce:c.nonce,...M})))}function Ig(...s){return i=>{s.forEach(c=>{typeof c=="function"?c(i):c!=null&&(c.current=i)})}}var _p=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_p&&(window.__reactRouterVersion="7.9.6")}catch{}function eb({basename:s,children:i,window:c}){let o=N.useRef();o.current==null&&(o.current=H0({window:c,v5Compat:!0}));let d=o.current,[f,m]=N.useState({action:d.action,location:d.location}),x=N.useCallback(g=>{N.startTransition(()=>m(g))},[m]);return N.useLayoutEffect(()=>d.listen(x),[d,x]),N.createElement(Ag,{basename:s,children:i,location:f.location,navigationType:f.action,navigator:d})}var vp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,an=N.forwardRef(function({onClick:i,discover:c="render",prefetch:o="none",relative:d,reloadDocument:f,replace:m,state:x,target:g,to:p,preventScrollReset:y,viewTransition:_,...T},A){let{basename:w}=N.useContext(sn),M=typeof p=="string"&&vp.test(p),S,z=!1;if(typeof p=="string"&&M&&(S=p,_p))try{let C=new URL(window.location.href),B=p.startsWith("//")?new URL(C.protocol+p):new URL(p),V=Un(B.pathname,w);B.origin===C.origin&&V!=null?p=V+B.search+B.hash:z=!0}catch{Ft(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=hg(p,{relative:d}),[j,k,H]=$g(o,T),ue=sb(p,{replace:m,state:x,target:g,preventScrollReset:y,relative:d,viewTransition:_});function X(C){i&&i(C),C.defaultPrevented||ue(C)}let Z=N.createElement("a",{...T,...H,href:S||q,onClick:z||f?i:X,ref:Ig(A,k),target:g,"data-discover":!M&&c==="render"?"true":void 0});return j&&!M?N.createElement(N.Fragment,null,Z,N.createElement(Jg,{page:q})):Z});an.displayName="Link";var tb=N.forwardRef(function({"aria-current":i="page",caseSensitive:c=!1,className:o="",end:d=!1,style:f,to:m,viewTransition:x,children:g,...p},y){let _=El(m,{relative:p.relative}),T=fn(),A=N.useContext(ur),{navigator:w,basename:M}=N.useContext(sn),S=A!=null&&ub(_)&&x===!0,z=w.encodeLocation?w.encodeLocation(_).pathname:_.pathname,q=T.pathname,j=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;c||(q=q.toLowerCase(),j=j?j.toLowerCase():null,z=z.toLowerCase()),j&&M&&(j=Un(j,M)||j);const k=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let H=q===z||!d&&q.startsWith(z)&&q.charAt(k)==="/",ue=j!=null&&(j===z||!d&&j.startsWith(z)&&j.charAt(z.length)==="/"),X={isActive:H,isPending:ue,isTransitioning:S},Z=H?i:void 0,C;typeof o=="function"?C=o(X):C=[o,H?"active":null,ue?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let B=typeof f=="function"?f(X):f;return N.createElement(an,{...p,"aria-current":Z,className:C,ref:y,style:B,to:m,viewTransition:x},typeof g=="function"?g(X):g)});tb.displayName="NavLink";var nb=N.forwardRef(({discover:s="render",fetcherKey:i,navigate:c,reloadDocument:o,replace:d,state:f,method:m=er,action:x,onSubmit:g,relative:p,preventScrollReset:y,viewTransition:_,...T},A)=>{let w=cb(),M=ob(x,{relative:p}),S=m.toLowerCase()==="get"?"get":"post",z=typeof x=="string"&&vp.test(x),q=j=>{if(g&&g(j),j.defaultPrevented)return;j.preventDefault();let k=j.nativeEvent.submitter,H=k?.getAttribute("formmethod")||m;w(k||j.currentTarget,{fetcherKey:i,method:H,navigate:c,replace:d,state:f,relative:p,preventScrollReset:y,viewTransition:_})};return N.createElement("form",{ref:A,method:S,action:M,onSubmit:o?g:q,...T,"data-discover":!z&&s==="render"?"true":void 0})});nb.displayName="Form";function ab(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jp(s){let i=N.useContext(vs);return Xe(i,ab(s)),i}function sb(s,{target:i,replace:c,state:o,preventScrollReset:d,relative:f,viewTransition:m}={}){let x=ca(),g=fn(),p=El(s,{relative:f});return N.useCallback(y=>{if(qg(y,i)){y.preventDefault();let _=c!==void 0?c:Sl(g)===Sl(p);x(s,{replace:_,state:o,preventScrollReset:d,relative:f,viewTransition:m})}},[g,x,p,c,o,i,s,d,f,m])}function lb(s){Ft(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let i=N.useRef(Ko(s)),c=N.useRef(!1),o=fn(),d=N.useMemo(()=>zg(o.search,c.current?null:i.current),[o.search]),f=ca(),m=N.useCallback((x,g)=>{const p=Ko(typeof x=="function"?x(new URLSearchParams(d)):x);c.current=!0,f("?"+p,g)},[f,d]);return[d,m]}var ib=0,rb=()=>`__${String(++ib)}__`;function cb(){let{router:s}=jp("useSubmit"),{basename:i}=N.useContext(sn),c=wg();return N.useCallback(async(o,d={})=>{let{action:f,method:m,encType:x,formData:g,body:p}=Fg(o,i);if(d.navigate===!1){let y=d.fetcherKey||rb();await s.fetch(y,c,d.action||f,{preventScrollReset:d.preventScrollReset,formData:g,body:p,formMethod:d.method||m,formEncType:d.encType||x,flushSync:d.flushSync})}else await s.navigate(d.action||f,{preventScrollReset:d.preventScrollReset,formData:g,body:p,formMethod:d.method||m,formEncType:d.encType||x,replace:d.replace,state:d.state,fromRouteId:c,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,i,c])}function ob(s,{relative:i}={}){let{basename:c}=N.useContext(sn),o=N.useContext(ln);Xe(o,"useFormAction must be used inside a RouteContext");let[d]=o.matches.slice(-1),f={...El(s||".",{relative:i})},m=fn();if(s==null){f.search=m.search;let x=new URLSearchParams(f.search),g=x.getAll("index");if(g.some(y=>y==="")){x.delete("index"),g.filter(_=>_).forEach(_=>x.append("index",_));let y=x.toString();f.search=y?`?${y}`:""}}return(!s||s===".")&&d.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(f.pathname=f.pathname==="/"?c:Mn([c,f.pathname])),Sl(f)}function ub(s,{relative:i}={}){let c=N.useContext(mp);Xe(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=jp("useViewTransitionState"),d=El(s,{relative:i});if(!c.isTransitioning)return!1;let f=Un(c.currentLocation.pathname,o)||c.currentLocation.pathname,m=Un(c.nextLocation.pathname,o)||c.nextLocation.pathname;return lr(d.pathname,m)!=null||lr(d.pathname,f)!=null}var Ns=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},db={setTimeout:(s,i)=>setTimeout(s,i),clearTimeout:s=>clearTimeout(s),setInterval:(s,i)=>setInterval(s,i),clearInterval:s=>clearInterval(s)},mb=class{#e=db;#t=!1;setTimeoutProvider(s){this.#e=s}setTimeout(s,i){return this.#e.setTimeout(s,i)}clearTimeout(s){this.#e.clearTimeout(s)}setInterval(s,i){return this.#e.setInterval(s,i)}clearInterval(s){this.#e.clearInterval(s)}},Aa=new mb;function fb(s){setTimeout(s,0)}var Oa=typeof window>"u"||"Deno"in globalThis;function gt(){}function hb(s,i){return typeof s=="function"?s(i):s}function Yo(s){return typeof s=="number"&&s>=0&&s!==1/0}function Np(s,i){return Math.max(s+(i||0)-Date.now(),0)}function ra(s,i){return typeof s=="function"?s(i):s}function Pt(s,i){return typeof s=="function"?s(i):s}function Mh(s,i){const{type:c="all",exact:o,fetchStatus:d,predicate:f,queryKey:m,stale:x}=s;if(m){if(o){if(i.queryHash!==cu(m,i.options))return!1}else if(!wl(i.queryKey,m))return!1}if(c!=="all"){const g=i.isActive();if(c==="active"&&!g||c==="inactive"&&g)return!1}return!(typeof x=="boolean"&&i.isStale()!==x||d&&d!==i.state.fetchStatus||f&&!f(i))}function Uh(s,i){const{exact:c,status:o,predicate:d,mutationKey:f}=s;if(f){if(!i.options.mutationKey)return!1;if(c){if(Ma(i.options.mutationKey)!==Ma(f))return!1}else if(!wl(i.options.mutationKey,f))return!1}return!(o&&i.state.status!==o||d&&!d(i))}function cu(s,i){return(i?.queryKeyHashFn||Ma)(s)}function Ma(s){return JSON.stringify(s,(i,c)=>Go(c)?Object.keys(c).sort().reduce((o,d)=>(o[d]=c[d],o),{}):c)}function wl(s,i){return s===i?!0:typeof s!=typeof i?!1:s&&i&&typeof s=="object"&&typeof i=="object"?Object.keys(i).every(c=>wl(s[c],i[c])):!1}var pb=Object.prototype.hasOwnProperty;function Sp(s,i){if(s===i)return s;const c=qh(s)&&qh(i);if(!c&&!(Go(s)&&Go(i)))return i;const d=(c?s:Object.keys(s)).length,f=c?i:Object.keys(i),m=f.length,x=c?new Array(m):{};let g=0;for(let p=0;p<m;p++){const y=c?p:f[p],_=s[y],T=i[y];if(_===T){x[y]=_,(c?p<d:pb.call(s,y))&&g++;continue}if(_===null||T===null||typeof _!="object"||typeof T!="object"){x[y]=T;continue}const A=Sp(_,T);x[y]=A,A===_&&g++}return d===m&&g===d?s:x}function rr(s,i){if(!i||Object.keys(s).length!==Object.keys(i).length)return!1;for(const c in s)if(s[c]!==i[c])return!1;return!0}function qh(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Go(s){if(!zh(s))return!1;const i=s.constructor;if(i===void 0)return!0;const c=i.prototype;return!(!zh(c)||!c.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function zh(s){return Object.prototype.toString.call(s)==="[object Object]"}function xb(s){return new Promise(i=>{Aa.setTimeout(i,s)})}function Xo(s,i,c){return typeof c.structuralSharing=="function"?c.structuralSharing(s,i):c.structuralSharing!==!1?Sp(s,i):i}function yb(s,i,c=0){const o=[...s,i];return c&&o.length>c?o.slice(1):o}function gb(s,i,c=0){const o=[i,...s];return c&&o.length>c?o.slice(0,-1):o}var ou=Symbol();function wp(s,i){return!s.queryFn&&i?.initialPromise?()=>i.initialPromise:!s.queryFn||s.queryFn===ou?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function Cp(s,i){return typeof s=="function"?s(...i):!!s}var bb=class extends Ns{#e;#t;#n;constructor(){super(),this.#n=s=>{if(!Oa&&window.addEventListener){const i=()=>s();return window.addEventListener("visibilitychange",i,!1),()=>{window.removeEventListener("visibilitychange",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#n=s,this.#t?.(),this.#t=s(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(i=>{i(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},uu=new bb;function Vo(){let s,i;const c=new Promise((d,f)=>{s=d,i=f});c.status="pending",c.catch(()=>{});function o(d){Object.assign(c,d),delete c.resolve,delete c.reject}return c.resolve=d=>{o({status:"fulfilled",value:d}),s(d)},c.reject=d=>{o({status:"rejected",reason:d}),i(d)},c}var _b=fb;function vb(){let s=[],i=0,c=x=>{x()},o=x=>{x()},d=_b;const f=x=>{i?s.push(x):d(()=>{c(x)})},m=()=>{const x=s;s=[],x.length&&d(()=>{o(()=>{x.forEach(g=>{c(g)})})})};return{batch:x=>{let g;i++;try{g=x()}finally{i--,i||m()}return g},batchCalls:x=>(...g)=>{f(()=>{x(...g)})},schedule:f,setNotifyFunction:x=>{c=x},setBatchNotifyFunction:x=>{o=x},setScheduler:x=>{d=x}}}var lt=vb(),jb=class extends Ns{#e=!0;#t;#n;constructor(){super(),this.#n=s=>{if(!Oa&&window.addEventListener){const i=()=>s(!0),c=()=>s(!1);return window.addEventListener("online",i,!1),window.addEventListener("offline",c,!1),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",c)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#n=s,this.#t?.(),this.#t=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(c=>{c(s)}))}isOnline(){return this.#e}},cr=new jb;function Nb(s){return Math.min(1e3*2**s,3e4)}function Ep(s){return(s??"online")==="online"?cr.isOnline():!0}var Zo=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function Tp(s){let i=!1,c=0,o;const d=Vo(),f=()=>d.status!=="pending",m=M=>{if(!f()){const S=new Zo(M);T(S),s.onCancel?.(S)}},x=()=>{i=!0},g=()=>{i=!1},p=()=>uu.isFocused()&&(s.networkMode==="always"||cr.isOnline())&&s.canRun(),y=()=>Ep(s.networkMode)&&s.canRun(),_=M=>{f()||(o?.(),d.resolve(M))},T=M=>{f()||(o?.(),d.reject(M))},A=()=>new Promise(M=>{o=S=>{(f()||p())&&M(S)},s.onPause?.()}).then(()=>{o=void 0,f()||s.onContinue?.()}),w=()=>{if(f())return;let M;const S=c===0?s.initialPromise:void 0;try{M=S??s.fn()}catch(z){M=Promise.reject(z)}Promise.resolve(M).then(_).catch(z=>{if(f())return;const q=s.retry??(Oa?0:3),j=s.retryDelay??Nb,k=typeof j=="function"?j(c,z):j,H=q===!0||typeof q=="number"&&c<q||typeof q=="function"&&q(c,z);if(i||!H){T(z);return}c++,s.onFail?.(c,z),xb(k).then(()=>p()?void 0:A()).then(()=>{i?T(z):w()})})};return{promise:d,status:()=>d.status,cancel:m,continue:()=>(o?.(),d),cancelRetry:x,continueRetry:g,canStart:y,start:()=>(y()?w():A().then(w),d)}}var Ap=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Yo(this.gcTime)&&(this.#e=Aa.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Oa?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Aa.clearTimeout(this.#e),this.#e=void 0)}},Sb=class extends Ap{#e;#t;#n;#s;#a;#i;#r;constructor(s){super(),this.#r=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#s=s.client,this.#n=this.#s.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=Bh(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(s){if(this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const i=Bh(this.options);i.data!==void 0&&(this.setState(Lh(i.data,i.dataUpdatedAt)),this.#e=i)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(s,i){const c=Xo(this.state.data,s,this.options);return this.#l({data:c,type:"success",dataUpdatedAt:i?.updatedAt,manual:i?.manual}),c}setState(s,i){this.#l({type:"setState",state:s,setStateOptions:i})}cancel(s){const i=this.#a?.promise;return this.#a?.cancel(s),i?i.then(gt).catch(gt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>Pt(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ou||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>ra(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!Np(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(i=>i.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(i=>i.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(i=>i!==s),this.observers.length||(this.#a&&(this.#r?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#l({type:"invalidate"})}async fetch(s,i){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&i?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(s&&this.setOptions(s),!this.options.queryFn){const x=this.observers.find(g=>g.options.queryFn);x&&this.setOptions(x.options)}const c=new AbortController,o=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(this.#r=!0,c.signal)})},d=()=>{const x=wp(this.options,i),p=(()=>{const y={client:this.#s,queryKey:this.queryKey,meta:this.meta};return o(y),y})();return this.#r=!1,this.options.persister?this.options.persister(x,p,this):x(p)},m=(()=>{const x={fetchOptions:i,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:d};return o(x),x})();this.options.behavior?.onFetch(m,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==m.fetchOptions?.meta)&&this.#l({type:"fetch",meta:m.fetchOptions?.meta}),this.#a=Tp({initialPromise:i?.initialPromise,fn:m.fetchFn,onCancel:x=>{x instanceof Zo&&x.revert&&this.setState({...this.#t,fetchStatus:"idle"}),c.abort()},onFail:(x,g)=>{this.#l({type:"failed",failureCount:x,error:g})},onPause:()=>{this.#l({type:"pause"})},onContinue:()=>{this.#l({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0});try{const x=await this.#a.start();if(x===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(x),this.#n.config.onSuccess?.(x,this),this.#n.config.onSettled?.(x,this.state.error,this),x}catch(x){if(x instanceof Zo){if(x.silent)return this.#a.promise;if(x.revert){if(this.state.data===void 0)throw x;return this.state.data}}throw this.#l({type:"error",error:x}),this.#n.config.onError?.(x,this),this.#n.config.onSettled?.(this.state.data,x,this),x}finally{this.scheduleGc()}}#l(s){const i=c=>{switch(s.type){case"failed":return{...c,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...c,fetchStatus:"paused"};case"continue":return{...c,fetchStatus:"fetching"};case"fetch":return{...c,...Dp(c.data,this.options),fetchMeta:s.meta??null};case"success":const o={...c,...Lh(s.data,s.dataUpdatedAt),dataUpdateCount:c.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=s.manual?o:void 0,o;case"error":const d=s.error;return{...c,error:d,errorUpdateCount:c.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:c.fetchFailureCount+1,fetchFailureReason:d,fetchStatus:"idle",status:"error"};case"invalidate":return{...c,isInvalidated:!0};case"setState":return{...c,...s.state}}};this.state=i(this.state),lt.batch(()=>{this.observers.forEach(c=>{c.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:s})})}};function Dp(s,i){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ep(i.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Lh(s,i){return{data:s,dataUpdatedAt:i??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Bh(s){const i=typeof s.initialData=="function"?s.initialData():s.initialData,c=i!==void 0,o=c?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:i,dataUpdateCount:0,dataUpdatedAt:c?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}var wb=class extends Ns{constructor(s,i){super(),this.options=i,this.#e=s,this.#l=null,this.#r=Vo(),this.bindMethods(),this.setOptions(i)}#e;#t=void 0;#n=void 0;#s=void 0;#a;#i;#r;#l;#p;#m;#f;#o;#u;#c;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Fh(this.#t,this.options)?this.#d():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $o(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $o(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#v(),this.#t.removeObserver(this)}setOptions(s){const i=this.options,c=this.#t;if(this.options=this.#e.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Pt(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),i._defaulted&&!rr(this.options,i)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const o=this.hasListeners();o&&Hh(this.#t,c,this.options,i)&&this.#d(),this.updateResult(),o&&(this.#t!==c||Pt(this.options.enabled,this.#t)!==Pt(i.enabled,this.#t)||ra(this.options.staleTime,this.#t)!==ra(i.staleTime,this.#t))&&this.#x();const d=this.#y();o&&(this.#t!==c||Pt(this.options.enabled,this.#t)!==Pt(i.enabled,this.#t)||d!==this.#c)&&this.#g(d)}getOptimisticResult(s){const i=this.#e.getQueryCache().build(this.#e,s),c=this.createResult(i,s);return Eb(this,c)&&(this.#s=c,this.#i=this.options,this.#a=this.#t.state),c}getCurrentResult(){return this.#s}trackResult(s,i){return new Proxy(s,{get:(c,o)=>(this.trackProp(o),i?.(o),o==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#r.status==="pending"&&this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(c,o))})}trackProp(s){this.#h.add(s)}getCurrentQuery(){return this.#t}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const i=this.#e.defaultQueryOptions(s),c=this.#e.getQueryCache().build(this.#e,i);return c.fetch().then(()=>this.createResult(c,i))}fetch(s){return this.#d({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(s){this.#j();let i=this.#t.fetch(this.options,s);return s?.throwOnError||(i=i.catch(gt)),i}#x(){this.#_();const s=ra(this.options.staleTime,this.#t);if(Oa||this.#s.isStale||!Yo(s))return;const c=Np(this.#s.dataUpdatedAt,s)+1;this.#o=Aa.setTimeout(()=>{this.#s.isStale||this.updateResult()},c)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#g(s){this.#v(),this.#c=s,!(Oa||Pt(this.options.enabled,this.#t)===!1||!Yo(this.#c)||this.#c===0)&&(this.#u=Aa.setInterval(()=>{(this.options.refetchIntervalInBackground||uu.isFocused())&&this.#d()},this.#c))}#b(){this.#x(),this.#g(this.#y())}#_(){this.#o&&(Aa.clearTimeout(this.#o),this.#o=void 0)}#v(){this.#u&&(Aa.clearInterval(this.#u),this.#u=void 0)}createResult(s,i){const c=this.#t,o=this.options,d=this.#s,f=this.#a,m=this.#i,g=s!==c?s.state:this.#n,{state:p}=s;let y={...p},_=!1,T;if(i._optimisticResults){const Z=this.hasListeners(),C=!Z&&Fh(s,i),B=Z&&Hh(s,c,i,o);(C||B)&&(y={...y,...Dp(p.data,s.options)}),i._optimisticResults==="isRestoring"&&(y.fetchStatus="idle")}let{error:A,errorUpdatedAt:w,status:M}=y;T=y.data;let S=!1;if(i.placeholderData!==void 0&&T===void 0&&M==="pending"){let Z;d?.isPlaceholderData&&i.placeholderData===m?.placeholderData?(Z=d.data,S=!0):Z=typeof i.placeholderData=="function"?i.placeholderData(this.#f?.state.data,this.#f):i.placeholderData,Z!==void 0&&(M="success",T=Xo(d?.data,Z,i),_=!0)}if(i.select&&T!==void 0&&!S)if(d&&T===f?.data&&i.select===this.#p)T=this.#m;else try{this.#p=i.select,T=i.select(T),T=Xo(d?.data,T,i),this.#m=T,this.#l=null}catch(Z){this.#l=Z}this.#l&&(A=this.#l,T=this.#m,w=Date.now(),M="error");const z=y.fetchStatus==="fetching",q=M==="pending",j=M==="error",k=q&&z,H=T!==void 0,X={status:M,fetchStatus:y.fetchStatus,isPending:q,isSuccess:M==="success",isError:j,isInitialLoading:k,isLoading:k,data:T,dataUpdatedAt:y.dataUpdatedAt,error:A,errorUpdatedAt:w,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>g.dataUpdateCount||y.errorUpdateCount>g.errorUpdateCount,isFetching:z,isRefetching:z&&!q,isLoadingError:j&&!H,isPaused:y.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:j&&H,isStale:du(s,i),refetch:this.refetch,promise:this.#r,isEnabled:Pt(i.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const Z=V=>{X.status==="error"?V.reject(X.error):X.data!==void 0&&V.resolve(X.data)},C=()=>{const V=this.#r=X.promise=Vo();Z(V)},B=this.#r;switch(B.status){case"pending":s.queryHash===c.queryHash&&Z(B);break;case"fulfilled":(X.status==="error"||X.data!==B.value)&&C();break;case"rejected":(X.status!=="error"||X.error!==B.reason)&&C();break}}return X}updateResult(){const s=this.#s,i=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#f=this.#t),rr(i,s))return;this.#s=i;const c=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,d=typeof o=="function"?o():o;if(d==="all"||!d&&!this.#h.size)return!0;const f=new Set(d??this.#h);return this.options.throwOnError&&f.add("error"),Object.keys(this.#s).some(m=>{const x=m;return this.#s[x]!==s[x]&&f.has(x)})};this.#N({listeners:c()})}#j(){const s=this.#e.getQueryCache().build(this.#e,this.options);if(s===this.#t)return;const i=this.#t;this.#t=s,this.#n=s.state,this.hasListeners()&&(i?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#N(s){lt.batch(()=>{s.listeners&&this.listeners.forEach(i=>{i(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Cb(s,i){return Pt(i.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&i.retryOnMount===!1)}function Fh(s,i){return Cb(s,i)||s.state.data!==void 0&&$o(s,i,i.refetchOnMount)}function $o(s,i,c){if(Pt(i.enabled,s)!==!1&&ra(i.staleTime,s)!=="static"){const o=typeof c=="function"?c(s):c;return o==="always"||o!==!1&&du(s,i)}return!1}function Hh(s,i,c,o){return(s!==i||Pt(o.enabled,s)===!1)&&(!c.suspense||s.state.status!=="error")&&du(s,c)}function du(s,i){return Pt(i.enabled,s)!==!1&&s.isStaleByTime(ra(i.staleTime,s))}function Eb(s,i){return!rr(s.getCurrentResult(),i)}function kh(s){return{onFetch:(i,c)=>{const o=i.options,d=i.fetchOptions?.meta?.fetchMore?.direction,f=i.state.data?.pages||[],m=i.state.data?.pageParams||[];let x={pages:[],pageParams:[]},g=0;const p=async()=>{let y=!1;const _=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(i.signal.aborted?y=!0:i.signal.addEventListener("abort",()=>{y=!0}),i.signal)})},T=wp(i.options,i.fetchOptions),A=async(w,M,S)=>{if(y)return Promise.reject();if(M==null&&w.pages.length)return Promise.resolve(w);const q=(()=>{const ue={client:i.client,queryKey:i.queryKey,pageParam:M,direction:S?"backward":"forward",meta:i.options.meta};return _(ue),ue})(),j=await T(q),{maxPages:k}=i.options,H=S?gb:yb;return{pages:H(w.pages,j,k),pageParams:H(w.pageParams,M,k)}};if(d&&f.length){const w=d==="backward",M=w?Tb:Qh,S={pages:f,pageParams:m},z=M(o,S);x=await A(S,z,w)}else{const w=s??f.length;do{const M=g===0?m[0]??o.initialPageParam:Qh(o,x);if(g>0&&M==null)break;x=await A(x,M),g++}while(g<w)}return x};i.options.persister?i.fetchFn=()=>i.options.persister?.(p,{client:i.client,queryKey:i.queryKey,meta:i.options.meta,signal:i.signal},c):i.fetchFn=p}}}function Qh(s,{pages:i,pageParams:c}){const o=i.length-1;return i.length>0?s.getNextPageParam(i[o],i,c[o],c):void 0}function Tb(s,{pages:i,pageParams:c}){return i.length>0?s.getPreviousPageParam?.(i[0],i,c[0],c):void 0}var Ab=class extends Ap{#e;#t;#n;#s;constructor(s){super(),this.#e=s.client,this.mutationId=s.mutationId,this.#n=s.mutationCache,this.#t=[],this.state=s.state||Rp(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(i=>i!==s),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(s){const i=()=>{this.#a({type:"continue"})},c={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Tp({fn:()=>this.options.mutationFn?this.options.mutationFn(s,c):Promise.reject(new Error("No mutationFn found")),onFail:(f,m)=>{this.#a({type:"failed",failureCount:f,error:m})},onPause:()=>{this.#a({type:"pause"})},onContinue:i,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const o=this.state.status==="pending",d=!this.#s.canStart();try{if(o)i();else{this.#a({type:"pending",variables:s,isPaused:d}),await this.#n.config.onMutate?.(s,this,c);const m=await this.options.onMutate?.(s,c);m!==this.state.context&&this.#a({type:"pending",context:m,variables:s,isPaused:d})}const f=await this.#s.start();return await this.#n.config.onSuccess?.(f,s,this.state.context,this,c),await this.options.onSuccess?.(f,s,this.state.context,c),await this.#n.config.onSettled?.(f,null,this.state.variables,this.state.context,this,c),await this.options.onSettled?.(f,null,s,this.state.context,c),this.#a({type:"success",data:f}),f}catch(f){try{throw await this.#n.config.onError?.(f,s,this.state.context,this,c),await this.options.onError?.(f,s,this.state.context,c),await this.#n.config.onSettled?.(void 0,f,this.state.variables,this.state.context,this,c),await this.options.onSettled?.(void 0,f,s,this.state.context,c),f}finally{this.#a({type:"error",error:f})}}finally{this.#n.runNext(this)}}#a(s){const i=c=>{switch(s.type){case"failed":return{...c,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...c,isPaused:!0};case"continue":return{...c,isPaused:!1};case"pending":return{...c,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...c,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...c,data:void 0,error:s.error,failureCount:c.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=i(this.state),lt.batch(()=>{this.#t.forEach(c=>{c.onMutationUpdate(s)}),this.#n.notify({mutation:this,type:"updated",action:s})})}};function Rp(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Db=class extends Ns{constructor(s={}){super(),this.config=s,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(s,i,c){const o=new Ab({client:s,mutationCache:this,mutationId:++this.#n,options:s.defaultMutationOptions(i),state:c});return this.add(o),o}add(s){this.#e.add(s);const i=Ji(s);if(typeof i=="string"){const c=this.#t.get(i);c?c.push(s):this.#t.set(i,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#e.delete(s)){const i=Ji(s);if(typeof i=="string"){const c=this.#t.get(i);if(c)if(c.length>1){const o=c.indexOf(s);o!==-1&&c.splice(o,1)}else c[0]===s&&this.#t.delete(i)}}this.notify({type:"removed",mutation:s})}canRun(s){const i=Ji(s);if(typeof i=="string"){const o=this.#t.get(i)?.find(d=>d.state.status==="pending");return!o||o===s}else return!0}runNext(s){const i=Ji(s);return typeof i=="string"?this.#t.get(i)?.find(o=>o!==s&&o.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){lt.batch(()=>{this.#e.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(s){const i={exact:!0,...s};return this.getAll().find(c=>Uh(i,c))}findAll(s={}){return this.getAll().filter(i=>Uh(s,i))}notify(s){lt.batch(()=>{this.listeners.forEach(i=>{i(s)})})}resumePausedMutations(){const s=this.getAll().filter(i=>i.state.isPaused);return lt.batch(()=>Promise.all(s.map(i=>i.continue().catch(gt))))}};function Ji(s){return s.options.scope?.id}var Rb=class extends Ns{#e;#t=void 0;#n;#s;constructor(i,c){super(),this.#e=i,this.setOptions(c),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(i){const c=this.options;this.options=this.#e.defaultMutationOptions(i),rr(this.options,c)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),c?.mutationKey&&this.options.mutationKey&&Ma(c.mutationKey)!==Ma(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(i){this.#a(),this.#i(i)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#a(),this.#i()}mutate(i,c){return this.#s=c,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(i)}#a(){const i=this.#n?.state??Rp();this.#t={...i,isPending:i.status==="pending",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset}}#i(i){lt.batch(()=>{if(this.#s&&this.hasListeners()){const c=this.#t.variables,o=this.#t.context,d={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};i?.type==="success"?(this.#s.onSuccess?.(i.data,c,o,d),this.#s.onSettled?.(i.data,null,c,o,d)):i?.type==="error"&&(this.#s.onError?.(i.error,c,o,d),this.#s.onSettled?.(void 0,i.error,c,o,d))}this.listeners.forEach(c=>{c(this.#t)})})}},Ob=class extends Ns{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,i,c){const o=i.queryKey,d=i.queryHash??cu(o,i);let f=this.get(d);return f||(f=new Sb({client:s,queryKey:o,queryHash:d,options:s.defaultQueryOptions(i),state:c,defaultOptions:s.getQueryDefaults(o)}),this.add(f)),f}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const i=this.#e.get(s.queryHash);i&&(s.destroy(),i===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){lt.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const i={exact:!0,...s};return this.getAll().find(c=>Mh(i,c))}findAll(s={}){const i=this.getAll();return Object.keys(s).length>0?i.filter(c=>Mh(s,c)):i}notify(s){lt.batch(()=>{this.listeners.forEach(i=>{i(s)})})}onFocus(){lt.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){lt.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Mb=class{#e;#t;#n;#s;#a;#i;#r;#l;constructor(s={}){this.#e=s.queryCache||new Ob,this.#t=s.mutationCache||new Db,this.#n=s.defaultOptions||{},this.#s=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#r=uu.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#l=cr.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#r?.(),this.#r=void 0,this.#l?.(),this.#l=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#t.findAll({...s,status:"pending"}).length}getQueryData(s){const i=this.defaultQueryOptions({queryKey:s});return this.#e.get(i.queryHash)?.state.data}ensureQueryData(s){const i=this.defaultQueryOptions(s),c=this.#e.build(this,i),o=c.state.data;return o===void 0?this.fetchQuery(s):(s.revalidateIfStale&&c.isStaleByTime(ra(i.staleTime,c))&&this.prefetchQuery(i),Promise.resolve(o))}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:i,state:c})=>{const o=c.data;return[i,o]})}setQueryData(s,i,c){const o=this.defaultQueryOptions({queryKey:s}),f=this.#e.get(o.queryHash)?.state.data,m=hb(i,f);if(m!==void 0)return this.#e.build(this,o).setData(m,{...c,manual:!0})}setQueriesData(s,i,c){return lt.batch(()=>this.#e.findAll(s).map(({queryKey:o})=>[o,this.setQueryData(o,i,c)]))}getQueryState(s){const i=this.defaultQueryOptions({queryKey:s});return this.#e.get(i.queryHash)?.state}removeQueries(s){const i=this.#e;lt.batch(()=>{i.findAll(s).forEach(c=>{i.remove(c)})})}resetQueries(s,i){const c=this.#e;return lt.batch(()=>(c.findAll(s).forEach(o=>{o.reset()}),this.refetchQueries({type:"active",...s},i)))}cancelQueries(s,i={}){const c={revert:!0,...i},o=lt.batch(()=>this.#e.findAll(s).map(d=>d.cancel(c)));return Promise.all(o).then(gt).catch(gt)}invalidateQueries(s,i={}){return lt.batch(()=>(this.#e.findAll(s).forEach(c=>{c.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},i)))}refetchQueries(s,i={}){const c={...i,cancelRefetch:i.cancelRefetch??!0},o=lt.batch(()=>this.#e.findAll(s).filter(d=>!d.isDisabled()&&!d.isStatic()).map(d=>{let f=d.fetch(void 0,c);return c.throwOnError||(f=f.catch(gt)),d.state.fetchStatus==="paused"?Promise.resolve():f}));return Promise.all(o).then(gt)}fetchQuery(s){const i=this.defaultQueryOptions(s);i.retry===void 0&&(i.retry=!1);const c=this.#e.build(this,i);return c.isStaleByTime(ra(i.staleTime,c))?c.fetch(i):Promise.resolve(c.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(gt).catch(gt)}fetchInfiniteQuery(s){return s.behavior=kh(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(gt).catch(gt)}ensureInfiniteQueryData(s){return s.behavior=kh(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return cr.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(s){this.#n=s}setQueryDefaults(s,i){this.#s.set(Ma(s),{queryKey:s,defaultOptions:i})}getQueryDefaults(s){const i=[...this.#s.values()],c={};return i.forEach(o=>{wl(s,o.queryKey)&&Object.assign(c,o.defaultOptions)}),c}setMutationDefaults(s,i){this.#a.set(Ma(s),{mutationKey:s,defaultOptions:i})}getMutationDefaults(s){const i=[...this.#a.values()],c={};return i.forEach(o=>{wl(s,o.mutationKey)&&Object.assign(c,o.defaultOptions)}),c}defaultQueryOptions(s){if(s._defaulted)return s;const i={...this.#n.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return i.queryHash||(i.queryHash=cu(i.queryKey,i)),i.refetchOnReconnect===void 0&&(i.refetchOnReconnect=i.networkMode!=="always"),i.throwOnError===void 0&&(i.throwOnError=!!i.suspense),!i.networkMode&&i.persister&&(i.networkMode="offlineFirst"),i.queryFn===ou&&(i.enabled=!1),i}defaultMutationOptions(s){return s?._defaulted?s:{...this.#n.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Op=N.createContext(void 0),it=s=>{const i=N.useContext(Op);if(!i)throw new Error("No QueryClient set, use QueryClientProvider to set one");return i},Ub=({client:s,children:i})=>(N.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),a.jsx(Op.Provider,{value:s,children:i})),Mp=N.createContext(!1),qb=()=>N.useContext(Mp);Mp.Provider;function zb(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Lb=N.createContext(zb()),Bb=()=>N.useContext(Lb),Fb=(s,i)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(i.isReset()||(s.retryOnMount=!1))},Hb=s=>{N.useEffect(()=>{s.clearReset()},[s])},kb=({result:s,errorResetBoundary:i,throwOnError:c,query:o,suspense:d})=>s.isError&&!i.isReset()&&!s.isFetching&&o&&(d&&s.data===void 0||Cp(c,[s.error,o])),Qb=s=>{if(s.suspense){const c=d=>d==="static"?d:Math.max(d??1e3,1e3),o=s.staleTime;s.staleTime=typeof o=="function"?(...d)=>c(o(...d)):c(o),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},Kb=(s,i)=>s.isLoading&&s.isFetching&&!i,Yb=(s,i)=>s?.suspense&&i.isPending,Kh=(s,i,c)=>i.fetchOptimistic(s).catch(()=>{c.clearReset()});function Gb(s,i,c){const o=qb(),d=Bb(),f=it(),m=f.defaultQueryOptions(s);f.getDefaultOptions().queries?._experimental_beforeQuery?.(m),m._optimisticResults=o?"isRestoring":"optimistic",Qb(m),Fb(m,d),Hb(d);const x=!f.getQueryCache().get(m.queryHash),[g]=N.useState(()=>new i(f,m)),p=g.getOptimisticResult(m),y=!o&&s.subscribed!==!1;if(N.useSyncExternalStore(N.useCallback(_=>{const T=y?g.subscribe(lt.batchCalls(_)):gt;return g.updateResult(),T},[g,y]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),N.useEffect(()=>{g.setOptions(m)},[m,g]),Yb(m,p))throw Kh(m,g,d);if(kb({result:p,errorResetBoundary:d,throwOnError:m.throwOnError,query:f.getQueryCache().get(m.queryHash),suspense:m.suspense}))throw p.error;return f.getDefaultOptions().queries?._experimental_afterQuery?.(m,p),m.experimental_prefetchInRender&&!Oa&&Kb(p,o)&&(x?Kh(m,g,d):f.getQueryCache().get(m.queryHash)?.promise)?.catch(gt).finally(()=>{g.updateResult()}),m.notifyOnChangeProps?p:g.trackResult(p)}function fe(s,i){return Gb(s,wb)}function je(s,i){const c=it(),[o]=N.useState(()=>new Rb(c,s));N.useEffect(()=>{o.setOptions(s)},[o,s]);const d=N.useSyncExternalStore(N.useCallback(m=>o.subscribe(lt.batchCalls(m)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),f=N.useCallback((m,x)=>{o.mutate(m,x).catch(gt)},[o]);if(d.error&&Cp(o.options.throwOnError,[d.error]))throw d.error;return{...d,mutate:f,mutateAsync:d.mutate}}const Xb="modulepreload",Vb=function(s){return"/"+s},Yh={},Zb=function(i,c,o){let d=Promise.resolve();if(c&&c.length>0){let p=function(y){return Promise.all(y.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var m=p;document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),g=x?.nonce||x?.getAttribute("nonce");d=p(c.map(y=>{if(y=Vb(y),y in Yh)return;Yh[y]=!0;const _=y.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const A=document.createElement("link");if(A.rel=_?"stylesheet":Xb,_||(A.as="script"),A.crossOrigin="",A.href=y,g&&A.setAttribute("nonce",g),document.head.appendChild(A),_)return new Promise((w,M)=>{A.addEventListener("load",w),A.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${y}`)))})}))}function f(x){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=x,window.dispatchEvent(g),!g.defaultPrevented)throw x}return d.then(x=>{for(const g of x||[])g.status==="rejected"&&f(g.reason);return i().catch(f)})},Pi={login:async(s,i)=>{const c=new FormData;c.append("username",s),c.append("password",i);const o="http://localhost:3421",d=o.trim()!==""?o:"",f=await fetch(`${d}/api/auth/login`,{method:"POST",body:c});if(!f.ok)throw new Error("Invalid credentials");return f.json()},getCurrentUser:async()=>{try{const{api:s}=await Zb(async()=>{const{api:c}=await Promise.resolve().then(()=>Ev);return{api:c}},[]);return(await s.get("/api/auth/me")).data}catch(s){throw console.error("Error in getCurrentUser:",s),s}},logout:()=>{localStorage.removeItem("token"),window.location.href="/login"}},Up=N.createContext(void 0);function $b({children:s}){const[i,c]=N.useState(null),[o,d]=N.useState(!0);N.useEffect(()=>{localStorage.getItem("token")?Pi.getCurrentUser().then(c).catch(g=>{console.error("Error fetching current user:",g),localStorage.removeItem("token")}).finally(()=>d(!1)):d(!1)},[]);const f=async(x,g)=>{const p=await Pi.login(x,g);localStorage.setItem("token",p.access_token);const y=await Pi.getCurrentUser();c(y)},m=()=>{Pi.logout(),c(null)};return a.jsx(Up.Provider,{value:{user:i,loading:o,login:f,logout:m},children:s})}function qn(){const s=N.useContext(Up);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function tn({children:s,allowedRoles:i}){const{user:c,loading:o}=qn();return o?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):c?i&&!i.includes(c.role)?a.jsx(ir,{to:"/",replace:!0}):a.jsx(a.Fragment,{children:s}):a.jsx(ir,{to:"/login",replace:!0})}function nn({children:s}){const{user:i,logout:c}=qn(),o=fn(),f=(()=>{if(!i)return[];const m=[{path:"/",label:"Dashboard",roles:["manager","accountant","director"]}];return i.role==="manager"?[...m,{path:"/deals/new",label:"New Deal",roles:["manager"]}]:i.role==="accountant"?[...m,{path:"/deals/new",label:"New Deal",roles:["accountant"]},{path:"/accountant",label:"Calculation Queue",roles:["accountant"]},{path:"/accountant/dashboard",label:"Financial Dashboard",roles:["accountant"]},{path:"/analytics",label:"Analytics",roles:["accountant"]},{path:"/references",label:"References",roles:["accountant","senior_manager","director"]}]:i.role==="senior_manager"?[...m,{path:"/senior-manager",label:"Review Deals",roles:["senior_manager"]},{path:"/analytics",label:"Analytics",roles:["senior_manager"]},{path:"/references",label:"References",roles:["senior_manager","accountant","director"]}]:i.role==="director"?[...m,{path:"/director/dashboard",label:"Financial Dashboard",roles:["director"]},{path:"/analytics",label:"Analytics",roles:["director"]},{path:"/references",label:"References",roles:["senior_manager","accountant","director"]}]:m})();return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("nav",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0 flex items-center",children:a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Deal Processing"})}),a.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:f.map(m=>a.jsx(an,{to:m.path,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${o.pathname===m.path?"border-indigo-500 text-gray-900":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:m.label},m.path))})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsxs("span",{className:"text-sm text-gray-700 mr-4",children:[i?.full_name||i?.email," (",i?.role,")"]}),a.jsx("button",{onClick:c,className:"text-sm text-gray-500 hover:text-gray-700",children:"Logout"})]})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:s})]})}function Jb(){const[s,i]=N.useState(""),[c,o]=N.useState(""),[d,f]=N.useState(""),[m,x]=N.useState(!1),{login:g}=qn(),p=ca(),y=async _=>{_.preventDefault(),f(""),x(!0);try{await g(s,c),p("/")}catch{f("Invalid email or password")}finally{x(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-md",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Deal Processing System"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[d&&a.jsx("div",{className:"bg-red-50 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}),a.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address",value:s,onChange:_=>i(_.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password",value:c,onChange:_=>o(_.target.value)})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:m,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:m?"Signing in...":"Sign in"})})]})]})})}function qp(s,i){return function(){return s.apply(i,arguments)}}const{toString:Pb}=Object.prototype,{getPrototypeOf:mu}=Object,{iterator:mr,toStringTag:zp}=Symbol,fr=(s=>i=>{const c=Pb.call(i);return s[c]||(s[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),rn=s=>(s=s.toLowerCase(),i=>fr(i)===s),hr=s=>i=>typeof i===s,{isArray:Ss}=Array,bs=hr("undefined");function Tl(s){return s!==null&&!bs(s)&&s.constructor!==null&&!bs(s.constructor)&&Et(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Lp=rn("ArrayBuffer");function Wb(s){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(s):i=s&&s.buffer&&Lp(s.buffer),i}const Ib=hr("string"),Et=hr("function"),Bp=hr("number"),Al=s=>s!==null&&typeof s=="object",e_=s=>s===!0||s===!1,nr=s=>{if(fr(s)!=="object")return!1;const i=mu(s);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(zp in s)&&!(mr in s)},t_=s=>{if(!Al(s)||Tl(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},n_=rn("Date"),a_=rn("File"),s_=rn("Blob"),l_=rn("FileList"),i_=s=>Al(s)&&Et(s.pipe),r_=s=>{let i;return s&&(typeof FormData=="function"&&s instanceof FormData||Et(s.append)&&((i=fr(s))==="formdata"||i==="object"&&Et(s.toString)&&s.toString()==="[object FormData]"))},c_=rn("URLSearchParams"),[o_,u_,d_,m_]=["ReadableStream","Request","Response","Headers"].map(rn),f_=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dl(s,i,{allOwnKeys:c=!1}={}){if(s===null||typeof s>"u")return;let o,d;if(typeof s!="object"&&(s=[s]),Ss(s))for(o=0,d=s.length;o<d;o++)i.call(null,s[o],o,s);else{if(Tl(s))return;const f=c?Object.getOwnPropertyNames(s):Object.keys(s),m=f.length;let x;for(o=0;o<m;o++)x=f[o],i.call(null,s[x],x,s)}}function Fp(s,i){if(Tl(s))return null;i=i.toLowerCase();const c=Object.keys(s);let o=c.length,d;for(;o-- >0;)if(d=c[o],i===d.toLowerCase())return d;return null}const Da=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hp=s=>!bs(s)&&s!==Da;function Jo(){const{caseless:s,skipUndefined:i}=Hp(this)&&this||{},c={},o=(d,f)=>{const m=s&&Fp(c,f)||f;nr(c[m])&&nr(d)?c[m]=Jo(c[m],d):nr(d)?c[m]=Jo({},d):Ss(d)?c[m]=d.slice():(!i||!bs(d))&&(c[m]=d)};for(let d=0,f=arguments.length;d<f;d++)arguments[d]&&Dl(arguments[d],o);return c}const h_=(s,i,c,{allOwnKeys:o}={})=>(Dl(i,(d,f)=>{c&&Et(d)?s[f]=qp(d,c):s[f]=d},{allOwnKeys:o}),s),p_=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),x_=(s,i,c,o)=>{s.prototype=Object.create(i.prototype,o),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:i.prototype}),c&&Object.assign(s.prototype,c)},y_=(s,i,c,o)=>{let d,f,m;const x={};if(i=i||{},s==null)return i;do{for(d=Object.getOwnPropertyNames(s),f=d.length;f-- >0;)m=d[f],(!o||o(m,s,i))&&!x[m]&&(i[m]=s[m],x[m]=!0);s=c!==!1&&mu(s)}while(s&&(!c||c(s,i))&&s!==Object.prototype);return i},g_=(s,i,c)=>{s=String(s),(c===void 0||c>s.length)&&(c=s.length),c-=i.length;const o=s.indexOf(i,c);return o!==-1&&o===c},b_=s=>{if(!s)return null;if(Ss(s))return s;let i=s.length;if(!Bp(i))return null;const c=new Array(i);for(;i-- >0;)c[i]=s[i];return c},__=(s=>i=>s&&i instanceof s)(typeof Uint8Array<"u"&&mu(Uint8Array)),v_=(s,i)=>{const o=(s&&s[mr]).call(s);let d;for(;(d=o.next())&&!d.done;){const f=d.value;i.call(s,f[0],f[1])}},j_=(s,i)=>{let c;const o=[];for(;(c=s.exec(i))!==null;)o.push(c);return o},N_=rn("HTMLFormElement"),S_=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,o,d){return o.toUpperCase()+d}),Gh=(({hasOwnProperty:s})=>(i,c)=>s.call(i,c))(Object.prototype),w_=rn("RegExp"),kp=(s,i)=>{const c=Object.getOwnPropertyDescriptors(s),o={};Dl(c,(d,f)=>{let m;(m=i(d,f,s))!==!1&&(o[f]=m||d)}),Object.defineProperties(s,o)},C_=s=>{kp(s,(i,c)=>{if(Et(s)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const o=s[c];if(Et(o)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},E_=(s,i)=>{const c={},o=d=>{d.forEach(f=>{c[f]=!0})};return Ss(s)?o(s):o(String(s).split(i)),c},T_=()=>{},A_=(s,i)=>s!=null&&Number.isFinite(s=+s)?s:i;function D_(s){return!!(s&&Et(s.append)&&s[zp]==="FormData"&&s[mr])}const R_=s=>{const i=new Array(10),c=(o,d)=>{if(Al(o)){if(i.indexOf(o)>=0)return;if(Tl(o))return o;if(!("toJSON"in o)){i[d]=o;const f=Ss(o)?[]:{};return Dl(o,(m,x)=>{const g=c(m,d+1);!bs(g)&&(f[x]=g)}),i[d]=void 0,f}}return o};return c(s,0)},O_=rn("AsyncFunction"),M_=s=>s&&(Al(s)||Et(s))&&Et(s.then)&&Et(s.catch),Qp=((s,i)=>s?setImmediate:i?((c,o)=>(Da.addEventListener("message",({source:d,data:f})=>{d===Da&&f===c&&o.length&&o.shift()()},!1),d=>{o.push(d),Da.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",Et(Da.postMessage)),U_=typeof queueMicrotask<"u"?queueMicrotask.bind(Da):typeof process<"u"&&process.nextTick||Qp,q_=s=>s!=null&&Et(s[mr]),$={isArray:Ss,isArrayBuffer:Lp,isBuffer:Tl,isFormData:r_,isArrayBufferView:Wb,isString:Ib,isNumber:Bp,isBoolean:e_,isObject:Al,isPlainObject:nr,isEmptyObject:t_,isReadableStream:o_,isRequest:u_,isResponse:d_,isHeaders:m_,isUndefined:bs,isDate:n_,isFile:a_,isBlob:s_,isRegExp:w_,isFunction:Et,isStream:i_,isURLSearchParams:c_,isTypedArray:__,isFileList:l_,forEach:Dl,merge:Jo,extend:h_,trim:f_,stripBOM:p_,inherits:x_,toFlatObject:y_,kindOf:fr,kindOfTest:rn,endsWith:g_,toArray:b_,forEachEntry:v_,matchAll:j_,isHTMLForm:N_,hasOwnProperty:Gh,hasOwnProp:Gh,reduceDescriptors:kp,freezeMethods:C_,toObjectSet:E_,toCamelCase:S_,noop:T_,toFiniteNumber:A_,findKey:Fp,global:Da,isContextDefined:Hp,isSpecCompliantForm:D_,toJSONObject:R_,isAsyncFn:O_,isThenable:M_,setImmediate:Qp,asap:U_,isIterable:q_};function Ce(s,i,c,o,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",i&&(this.code=i),c&&(this.config=c),o&&(this.request=o),d&&(this.response=d,this.status=d.status?d.status:null)}$.inherits(Ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:$.toJSONObject(this.config),code:this.code,status:this.status}}});const Kp=Ce.prototype,Yp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Yp[s]={value:s}});Object.defineProperties(Ce,Yp);Object.defineProperty(Kp,"isAxiosError",{value:!0});Ce.from=(s,i,c,o,d,f)=>{const m=Object.create(Kp);$.toFlatObject(s,m,function(y){return y!==Error.prototype},p=>p!=="isAxiosError");const x=s&&s.message?s.message:"Error",g=i==null&&s?s.code:i;return Ce.call(m,x,g,c,o,d),s&&m.cause==null&&Object.defineProperty(m,"cause",{value:s,configurable:!0}),m.name=s&&s.name||"Error",f&&Object.assign(m,f),m};const z_=null;function Po(s){return $.isPlainObject(s)||$.isArray(s)}function Gp(s){return $.endsWith(s,"[]")?s.slice(0,-2):s}function Xh(s,i,c){return s?s.concat(i).map(function(d,f){return d=Gp(d),!c&&f?"["+d+"]":d}).join(c?".":""):i}function L_(s){return $.isArray(s)&&!s.some(Po)}const B_=$.toFlatObject($,{},null,function(i){return/^is[A-Z]/.test(i)});function pr(s,i,c){if(!$.isObject(s))throw new TypeError("target must be an object");i=i||new FormData,c=$.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,S){return!$.isUndefined(S[M])});const o=c.metaTokens,d=c.visitor||y,f=c.dots,m=c.indexes,g=(c.Blob||typeof Blob<"u"&&Blob)&&$.isSpecCompliantForm(i);if(!$.isFunction(d))throw new TypeError("visitor must be a function");function p(w){if(w===null)return"";if($.isDate(w))return w.toISOString();if($.isBoolean(w))return w.toString();if(!g&&$.isBlob(w))throw new Ce("Blob is not supported. Use a Buffer instead.");return $.isArrayBuffer(w)||$.isTypedArray(w)?g&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function y(w,M,S){let z=w;if(w&&!S&&typeof w=="object"){if($.endsWith(M,"{}"))M=o?M:M.slice(0,-2),w=JSON.stringify(w);else if($.isArray(w)&&L_(w)||($.isFileList(w)||$.endsWith(M,"[]"))&&(z=$.toArray(w)))return M=Gp(M),z.forEach(function(j,k){!($.isUndefined(j)||j===null)&&i.append(m===!0?Xh([M],k,f):m===null?M:M+"[]",p(j))}),!1}return Po(w)?!0:(i.append(Xh(S,M,f),p(w)),!1)}const _=[],T=Object.assign(B_,{defaultVisitor:y,convertValue:p,isVisitable:Po});function A(w,M){if(!$.isUndefined(w)){if(_.indexOf(w)!==-1)throw Error("Circular reference detected in "+M.join("."));_.push(w),$.forEach(w,function(z,q){(!($.isUndefined(z)||z===null)&&d.call(i,z,$.isString(q)?q.trim():q,M,T))===!0&&A(z,M?M.concat(q):[q])}),_.pop()}}if(!$.isObject(s))throw new TypeError("data must be an object");return A(s),i}function Vh(s){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(o){return i[o]})}function fu(s,i){this._pairs=[],s&&pr(s,this,i)}const Xp=fu.prototype;Xp.append=function(i,c){this._pairs.push([i,c])};Xp.toString=function(i){const c=i?function(o){return i.call(this,o,Vh)}:Vh;return this._pairs.map(function(d){return c(d[0])+"="+c(d[1])},"").join("&")};function F_(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Vp(s,i,c){if(!i)return s;const o=c&&c.encode||F_;$.isFunction(c)&&(c={serialize:c});const d=c&&c.serialize;let f;if(d?f=d(i,c):f=$.isURLSearchParams(i)?i.toString():new fu(i,c).toString(o),f){const m=s.indexOf("#");m!==-1&&(s=s.slice(0,m)),s+=(s.indexOf("?")===-1?"?":"&")+f}return s}class Zh{constructor(){this.handlers=[]}use(i,c,o){return this.handlers.push({fulfilled:i,rejected:c,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){$.forEach(this.handlers,function(o){o!==null&&i(o)})}}const Zp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},H_=typeof URLSearchParams<"u"?URLSearchParams:fu,k_=typeof FormData<"u"?FormData:null,Q_=typeof Blob<"u"?Blob:null,K_={isBrowser:!0,classes:{URLSearchParams:H_,FormData:k_,Blob:Q_},protocols:["http","https","file","blob","url","data"]},hu=typeof window<"u"&&typeof document<"u",Wo=typeof navigator=="object"&&navigator||void 0,Y_=hu&&(!Wo||["ReactNative","NativeScript","NS"].indexOf(Wo.product)<0),G_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",X_=hu&&window.location.href||"http://localhost",V_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hu,hasStandardBrowserEnv:Y_,hasStandardBrowserWebWorkerEnv:G_,navigator:Wo,origin:X_},Symbol.toStringTag,{value:"Module"})),xt={...V_,...K_};function Z_(s,i){return pr(s,new xt.classes.URLSearchParams,{visitor:function(c,o,d,f){return xt.isNode&&$.isBuffer(c)?(this.append(o,c.toString("base64")),!1):f.defaultVisitor.apply(this,arguments)},...i})}function $_(s){return $.matchAll(/\w+|\[(\w*)]/g,s).map(i=>i[0]==="[]"?"":i[1]||i[0])}function J_(s){const i={},c=Object.keys(s);let o;const d=c.length;let f;for(o=0;o<d;o++)f=c[o],i[f]=s[f];return i}function $p(s){function i(c,o,d,f){let m=c[f++];if(m==="__proto__")return!0;const x=Number.isFinite(+m),g=f>=c.length;return m=!m&&$.isArray(d)?d.length:m,g?($.hasOwnProp(d,m)?d[m]=[d[m],o]:d[m]=o,!x):((!d[m]||!$.isObject(d[m]))&&(d[m]=[]),i(c,o,d[m],f)&&$.isArray(d[m])&&(d[m]=J_(d[m])),!x)}if($.isFormData(s)&&$.isFunction(s.entries)){const c={};return $.forEachEntry(s,(o,d)=>{i($_(o),d,c,0)}),c}return null}function P_(s,i,c){if($.isString(s))try{return(i||JSON.parse)(s),$.trim(s)}catch(o){if(o.name!=="SyntaxError")throw o}return(c||JSON.stringify)(s)}const Rl={transitional:Zp,adapter:["xhr","http","fetch"],transformRequest:[function(i,c){const o=c.getContentType()||"",d=o.indexOf("application/json")>-1,f=$.isObject(i);if(f&&$.isHTMLForm(i)&&(i=new FormData(i)),$.isFormData(i))return d?JSON.stringify($p(i)):i;if($.isArrayBuffer(i)||$.isBuffer(i)||$.isStream(i)||$.isFile(i)||$.isBlob(i)||$.isReadableStream(i))return i;if($.isArrayBufferView(i))return i.buffer;if($.isURLSearchParams(i))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let x;if(f){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Z_(i,this.formSerializer).toString();if((x=$.isFileList(i))||o.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return pr(x?{"files[]":i}:i,g&&new g,this.formSerializer)}}return f||d?(c.setContentType("application/json",!1),P_(i)):i}],transformResponse:[function(i){const c=this.transitional||Rl.transitional,o=c&&c.forcedJSONParsing,d=this.responseType==="json";if($.isResponse(i)||$.isReadableStream(i))return i;if(i&&$.isString(i)&&(o&&!this.responseType||d)){const m=!(c&&c.silentJSONParsing)&&d;try{return JSON.parse(i,this.parseReviver)}catch(x){if(m)throw x.name==="SyntaxError"?Ce.from(x,Ce.ERR_BAD_RESPONSE,this,null,this.response):x}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xt.classes.FormData,Blob:xt.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};$.forEach(["delete","get","head","post","put","patch"],s=>{Rl.headers[s]={}});const W_=$.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),I_=s=>{const i={};let c,o,d;return s&&s.split(`
`).forEach(function(m){d=m.indexOf(":"),c=m.substring(0,d).trim().toLowerCase(),o=m.substring(d+1).trim(),!(!c||i[c]&&W_[c])&&(c==="set-cookie"?i[c]?i[c].push(o):i[c]=[o]:i[c]=i[c]?i[c]+", "+o:o)}),i},$h=Symbol("internals");function Nl(s){return s&&String(s).trim().toLowerCase()}function ar(s){return s===!1||s==null?s:$.isArray(s)?s.map(ar):String(s)}function ev(s){const i=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=c.exec(s);)i[o[1]]=o[2];return i}const tv=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Bo(s,i,c,o,d){if($.isFunction(o))return o.call(this,i,c);if(d&&(i=c),!!$.isString(i)){if($.isString(o))return i.indexOf(o)!==-1;if($.isRegExp(o))return o.test(i)}}function nv(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,c,o)=>c.toUpperCase()+o)}function av(s,i){const c=$.toCamelCase(" "+i);["get","set","has"].forEach(o=>{Object.defineProperty(s,o+c,{value:function(d,f,m){return this[o].call(this,i,d,f,m)},configurable:!0})})}let Tt=class{constructor(i){i&&this.set(i)}set(i,c,o){const d=this;function f(x,g,p){const y=Nl(g);if(!y)throw new Error("header name must be a non-empty string");const _=$.findKey(d,y);(!_||d[_]===void 0||p===!0||p===void 0&&d[_]!==!1)&&(d[_||g]=ar(x))}const m=(x,g)=>$.forEach(x,(p,y)=>f(p,y,g));if($.isPlainObject(i)||i instanceof this.constructor)m(i,c);else if($.isString(i)&&(i=i.trim())&&!tv(i))m(I_(i),c);else if($.isObject(i)&&$.isIterable(i)){let x={},g,p;for(const y of i){if(!$.isArray(y))throw TypeError("Object iterator must return a key-value pair");x[p=y[0]]=(g=x[p])?$.isArray(g)?[...g,y[1]]:[g,y[1]]:y[1]}m(x,c)}else i!=null&&f(c,i,o);return this}get(i,c){if(i=Nl(i),i){const o=$.findKey(this,i);if(o){const d=this[o];if(!c)return d;if(c===!0)return ev(d);if($.isFunction(c))return c.call(this,d,o);if($.isRegExp(c))return c.exec(d);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,c){if(i=Nl(i),i){const o=$.findKey(this,i);return!!(o&&this[o]!==void 0&&(!c||Bo(this,this[o],o,c)))}return!1}delete(i,c){const o=this;let d=!1;function f(m){if(m=Nl(m),m){const x=$.findKey(o,m);x&&(!c||Bo(o,o[x],x,c))&&(delete o[x],d=!0)}}return $.isArray(i)?i.forEach(f):f(i),d}clear(i){const c=Object.keys(this);let o=c.length,d=!1;for(;o--;){const f=c[o];(!i||Bo(this,this[f],f,i,!0))&&(delete this[f],d=!0)}return d}normalize(i){const c=this,o={};return $.forEach(this,(d,f)=>{const m=$.findKey(o,f);if(m){c[m]=ar(d),delete c[f];return}const x=i?nv(f):String(f).trim();x!==f&&delete c[f],c[x]=ar(d),o[x]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const c=Object.create(null);return $.forEach(this,(o,d)=>{o!=null&&o!==!1&&(c[d]=i&&$.isArray(o)?o.join(", "):o)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,c])=>i+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...c){const o=new this(i);return c.forEach(d=>o.set(d)),o}static accessor(i){const o=(this[$h]=this[$h]={accessors:{}}).accessors,d=this.prototype;function f(m){const x=Nl(m);o[x]||(av(d,m),o[x]=!0)}return $.isArray(i)?i.forEach(f):f(i),this}};Tt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);$.reduceDescriptors(Tt.prototype,({value:s},i)=>{let c=i[0].toUpperCase()+i.slice(1);return{get:()=>s,set(o){this[c]=o}}});$.freezeMethods(Tt);function Fo(s,i){const c=this||Rl,o=i||c,d=Tt.from(o.headers);let f=o.data;return $.forEach(s,function(x){f=x.call(c,f,d.normalize(),i?i.status:void 0)}),d.normalize(),f}function Jp(s){return!!(s&&s.__CANCEL__)}function ws(s,i,c){Ce.call(this,s??"canceled",Ce.ERR_CANCELED,i,c),this.name="CanceledError"}$.inherits(ws,Ce,{__CANCEL__:!0});function Pp(s,i,c){const o=c.config.validateStatus;!c.status||!o||o(c.status)?s(c):i(new Ce("Request failed with status code "+c.status,[Ce.ERR_BAD_REQUEST,Ce.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function sv(s){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return i&&i[1]||""}function lv(s,i){s=s||10;const c=new Array(s),o=new Array(s);let d=0,f=0,m;return i=i!==void 0?i:1e3,function(g){const p=Date.now(),y=o[f];m||(m=p),c[d]=g,o[d]=p;let _=f,T=0;for(;_!==d;)T+=c[_++],_=_%s;if(d=(d+1)%s,d===f&&(f=(f+1)%s),p-m<i)return;const A=y&&p-y;return A?Math.round(T*1e3/A):void 0}}function iv(s,i){let c=0,o=1e3/i,d,f;const m=(p,y=Date.now())=>{c=y,d=null,f&&(clearTimeout(f),f=null),s(...p)};return[(...p)=>{const y=Date.now(),_=y-c;_>=o?m(p,y):(d=p,f||(f=setTimeout(()=>{f=null,m(d)},o-_)))},()=>d&&m(d)]}const or=(s,i,c=3)=>{let o=0;const d=lv(50,250);return iv(f=>{const m=f.loaded,x=f.lengthComputable?f.total:void 0,g=m-o,p=d(g),y=m<=x;o=m;const _={loaded:m,total:x,progress:x?m/x:void 0,bytes:g,rate:p||void 0,estimated:p&&x&&y?(x-m)/p:void 0,event:f,lengthComputable:x!=null,[i?"download":"upload"]:!0};s(_)},c)},Jh=(s,i)=>{const c=s!=null;return[o=>i[0]({lengthComputable:c,total:s,loaded:o}),i[1]]},Ph=s=>(...i)=>$.asap(()=>s(...i)),rv=xt.hasStandardBrowserEnv?((s,i)=>c=>(c=new URL(c,xt.origin),s.protocol===c.protocol&&s.host===c.host&&(i||s.port===c.port)))(new URL(xt.origin),xt.navigator&&/(msie|trident)/i.test(xt.navigator.userAgent)):()=>!0,cv=xt.hasStandardBrowserEnv?{write(s,i,c,o,d,f,m){if(typeof document>"u")return;const x=[`${s}=${encodeURIComponent(i)}`];$.isNumber(c)&&x.push(`expires=${new Date(c).toUTCString()}`),$.isString(o)&&x.push(`path=${o}`),$.isString(d)&&x.push(`domain=${d}`),f===!0&&x.push("secure"),$.isString(m)&&x.push(`SameSite=${m}`),document.cookie=x.join("; ")},read(s){if(typeof document>"u")return null;const i=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return i?decodeURIComponent(i[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ov(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function uv(s,i){return i?s.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):s}function Wp(s,i,c){let o=!ov(i);return s&&(o||c==!1)?uv(s,i):i}const Wh=s=>s instanceof Tt?{...s}:s;function Ua(s,i){i=i||{};const c={};function o(p,y,_,T){return $.isPlainObject(p)&&$.isPlainObject(y)?$.merge.call({caseless:T},p,y):$.isPlainObject(y)?$.merge({},y):$.isArray(y)?y.slice():y}function d(p,y,_,T){if($.isUndefined(y)){if(!$.isUndefined(p))return o(void 0,p,_,T)}else return o(p,y,_,T)}function f(p,y){if(!$.isUndefined(y))return o(void 0,y)}function m(p,y){if($.isUndefined(y)){if(!$.isUndefined(p))return o(void 0,p)}else return o(void 0,y)}function x(p,y,_){if(_ in i)return o(p,y);if(_ in s)return o(void 0,p)}const g={url:f,method:f,data:f,baseURL:m,transformRequest:m,transformResponse:m,paramsSerializer:m,timeout:m,timeoutMessage:m,withCredentials:m,withXSRFToken:m,adapter:m,responseType:m,xsrfCookieName:m,xsrfHeaderName:m,onUploadProgress:m,onDownloadProgress:m,decompress:m,maxContentLength:m,maxBodyLength:m,beforeRedirect:m,transport:m,httpAgent:m,httpsAgent:m,cancelToken:m,socketPath:m,responseEncoding:m,validateStatus:x,headers:(p,y,_)=>d(Wh(p),Wh(y),_,!0)};return $.forEach(Object.keys({...s,...i}),function(y){const _=g[y]||d,T=_(s[y],i[y],y);$.isUndefined(T)&&_!==x||(c[y]=T)}),c}const Ip=s=>{const i=Ua({},s);let{data:c,withXSRFToken:o,xsrfHeaderName:d,xsrfCookieName:f,headers:m,auth:x}=i;if(i.headers=m=Tt.from(m),i.url=Vp(Wp(i.baseURL,i.url,i.allowAbsoluteUrls),s.params,s.paramsSerializer),x&&m.set("Authorization","Basic "+btoa((x.username||"")+":"+(x.password?unescape(encodeURIComponent(x.password)):""))),$.isFormData(c)){if(xt.hasStandardBrowserEnv||xt.hasStandardBrowserWebWorkerEnv)m.setContentType(void 0);else if($.isFunction(c.getHeaders)){const g=c.getHeaders(),p=["content-type","content-length"];Object.entries(g).forEach(([y,_])=>{p.includes(y.toLowerCase())&&m.set(y,_)})}}if(xt.hasStandardBrowserEnv&&(o&&$.isFunction(o)&&(o=o(i)),o||o!==!1&&rv(i.url))){const g=d&&f&&cv.read(f);g&&m.set(d,g)}return i},dv=typeof XMLHttpRequest<"u",mv=dv&&function(s){return new Promise(function(c,o){const d=Ip(s);let f=d.data;const m=Tt.from(d.headers).normalize();let{responseType:x,onUploadProgress:g,onDownloadProgress:p}=d,y,_,T,A,w;function M(){A&&A(),w&&w(),d.cancelToken&&d.cancelToken.unsubscribe(y),d.signal&&d.signal.removeEventListener("abort",y)}let S=new XMLHttpRequest;S.open(d.method.toUpperCase(),d.url,!0),S.timeout=d.timeout;function z(){if(!S)return;const j=Tt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),H={data:!x||x==="text"||x==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:j,config:s,request:S};Pp(function(X){c(X),M()},function(X){o(X),M()},H),S=null}"onloadend"in S?S.onloadend=z:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(z)},S.onabort=function(){S&&(o(new Ce("Request aborted",Ce.ECONNABORTED,s,S)),S=null)},S.onerror=function(k){const H=k&&k.message?k.message:"Network Error",ue=new Ce(H,Ce.ERR_NETWORK,s,S);ue.event=k||null,o(ue),S=null},S.ontimeout=function(){let k=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded";const H=d.transitional||Zp;d.timeoutErrorMessage&&(k=d.timeoutErrorMessage),o(new Ce(k,H.clarifyTimeoutError?Ce.ETIMEDOUT:Ce.ECONNABORTED,s,S)),S=null},f===void 0&&m.setContentType(null),"setRequestHeader"in S&&$.forEach(m.toJSON(),function(k,H){S.setRequestHeader(H,k)}),$.isUndefined(d.withCredentials)||(S.withCredentials=!!d.withCredentials),x&&x!=="json"&&(S.responseType=d.responseType),p&&([T,w]=or(p,!0),S.addEventListener("progress",T)),g&&S.upload&&([_,A]=or(g),S.upload.addEventListener("progress",_),S.upload.addEventListener("loadend",A)),(d.cancelToken||d.signal)&&(y=j=>{S&&(o(!j||j.type?new ws(null,s,S):j),S.abort(),S=null)},d.cancelToken&&d.cancelToken.subscribe(y),d.signal&&(d.signal.aborted?y():d.signal.addEventListener("abort",y)));const q=sv(d.url);if(q&&xt.protocols.indexOf(q)===-1){o(new Ce("Unsupported protocol "+q+":",Ce.ERR_BAD_REQUEST,s));return}S.send(f||null)})},fv=(s,i)=>{const{length:c}=s=s?s.filter(Boolean):[];if(i||c){let o=new AbortController,d;const f=function(p){if(!d){d=!0,x();const y=p instanceof Error?p:this.reason;o.abort(y instanceof Ce?y:new ws(y instanceof Error?y.message:y))}};let m=i&&setTimeout(()=>{m=null,f(new Ce(`timeout ${i} of ms exceeded`,Ce.ETIMEDOUT))},i);const x=()=>{s&&(m&&clearTimeout(m),m=null,s.forEach(p=>{p.unsubscribe?p.unsubscribe(f):p.removeEventListener("abort",f)}),s=null)};s.forEach(p=>p.addEventListener("abort",f));const{signal:g}=o;return g.unsubscribe=()=>$.asap(x),g}},hv=function*(s,i){let c=s.byteLength;if(c<i){yield s;return}let o=0,d;for(;o<c;)d=o+i,yield s.slice(o,d),o=d},pv=async function*(s,i){for await(const c of xv(s))yield*hv(c,i)},xv=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const i=s.getReader();try{for(;;){const{done:c,value:o}=await i.read();if(c)break;yield o}}finally{await i.cancel()}},Ih=(s,i,c,o)=>{const d=pv(s,i);let f=0,m,x=g=>{m||(m=!0,o&&o(g))};return new ReadableStream({async pull(g){try{const{done:p,value:y}=await d.next();if(p){x(),g.close();return}let _=y.byteLength;if(c){let T=f+=_;c(T)}g.enqueue(new Uint8Array(y))}catch(p){throw x(p),p}},cancel(g){return x(g),d.return()}},{highWaterMark:2})},ep=64*1024,{isFunction:Wi}=$,yv=(({Request:s,Response:i})=>({Request:s,Response:i}))($.global),{ReadableStream:tp,TextEncoder:np}=$.global,ap=(s,...i)=>{try{return!!s(...i)}catch{return!1}},gv=s=>{s=$.merge.call({skipUndefined:!0},yv,s);const{fetch:i,Request:c,Response:o}=s,d=i?Wi(i):typeof fetch=="function",f=Wi(c),m=Wi(o);if(!d)return!1;const x=d&&Wi(tp),g=d&&(typeof np=="function"?(w=>M=>w.encode(M))(new np):async w=>new Uint8Array(await new c(w).arrayBuffer())),p=f&&x&&ap(()=>{let w=!1;const M=new c(xt.origin,{body:new tp,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!M}),y=m&&x&&ap(()=>$.isReadableStream(new o("").body)),_={stream:y&&(w=>w.body)};d&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!_[w]&&(_[w]=(M,S)=>{let z=M&&M[w];if(z)return z.call(M);throw new Ce(`Response type '${w}' is not supported`,Ce.ERR_NOT_SUPPORT,S)})});const T=async w=>{if(w==null)return 0;if($.isBlob(w))return w.size;if($.isSpecCompliantForm(w))return(await new c(xt.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if($.isArrayBufferView(w)||$.isArrayBuffer(w))return w.byteLength;if($.isURLSearchParams(w)&&(w=w+""),$.isString(w))return(await g(w)).byteLength},A=async(w,M)=>{const S=$.toFiniteNumber(w.getContentLength());return S??T(M)};return async w=>{let{url:M,method:S,data:z,signal:q,cancelToken:j,timeout:k,onDownloadProgress:H,onUploadProgress:ue,responseType:X,headers:Z,withCredentials:C="same-origin",fetchOptions:B}=Ip(w),V=i||fetch;X=X?(X+"").toLowerCase():"text";let R=fv([q,j&&j.toAbortSignal()],k),v=null;const ie=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let Ne;try{if(ue&&p&&S!=="get"&&S!=="head"&&(Ne=await A(Z,z))!==0){let D=new c(M,{method:"POST",body:z,duplex:"half"}),I;if($.isFormData(z)&&(I=D.headers.get("content-type"))&&Z.setContentType(I),D.body){const[le,ce]=Jh(Ne,or(Ph(ue)));z=Ih(D.body,ep,le,ce)}}$.isString(C)||(C=C?"include":"omit");const O=f&&"credentials"in c.prototype,P={...B,signal:R,method:S.toUpperCase(),headers:Z.normalize().toJSON(),body:z,duplex:"half",credentials:O?C:void 0};v=f&&new c(M,P);let se=await(f?V(v,B):V(M,P));const oe=y&&(X==="stream"||X==="response");if(y&&(H||oe&&ie)){const D={};["status","statusText","headers"].forEach(xe=>{D[xe]=se[xe]});const I=$.toFiniteNumber(se.headers.get("content-length")),[le,ce]=H&&Jh(I,or(Ph(H),!0))||[];se=new o(Ih(se.body,ep,le,()=>{ce&&ce(),ie&&ie()}),D)}X=X||"text";let ge=await _[$.findKey(_,X)||"text"](se,w);return!oe&&ie&&ie(),await new Promise((D,I)=>{Pp(D,I,{data:ge,headers:Tt.from(se.headers),status:se.status,statusText:se.statusText,config:w,request:v})})}catch(O){throw ie&&ie(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new Ce("Network Error",Ce.ERR_NETWORK,w,v),{cause:O.cause||O}):Ce.from(O,O&&O.code,w,v)}}},bv=new Map,ex=s=>{let i=s&&s.env||{};const{fetch:c,Request:o,Response:d}=i,f=[o,d,c];let m=f.length,x=m,g,p,y=bv;for(;x--;)g=f[x],p=y.get(g),p===void 0&&y.set(g,p=x?new Map:gv(i)),y=p;return p};ex();const pu={http:z_,xhr:mv,fetch:{get:ex}};$.forEach(pu,(s,i)=>{if(s){try{Object.defineProperty(s,"name",{value:i})}catch{}Object.defineProperty(s,"adapterName",{value:i})}});const sp=s=>`- ${s}`,_v=s=>$.isFunction(s)||s===null||s===!1;function vv(s,i){s=$.isArray(s)?s:[s];const{length:c}=s;let o,d;const f={};for(let m=0;m<c;m++){o=s[m];let x;if(d=o,!_v(o)&&(d=pu[(x=String(o)).toLowerCase()],d===void 0))throw new Ce(`Unknown adapter '${x}'`);if(d&&($.isFunction(d)||(d=d.get(i))))break;f[x||"#"+m]=d}if(!d){const m=Object.entries(f).map(([g,p])=>`adapter ${g} `+(p===!1?"is not supported by the environment":"is not available in the build"));let x=c?m.length>1?`since :
`+m.map(sp).join(`
`):" "+sp(m[0]):"as no adapter specified";throw new Ce("There is no suitable adapter to dispatch the request "+x,"ERR_NOT_SUPPORT")}return d}const tx={getAdapter:vv,adapters:pu};function Ho(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new ws(null,s)}function lp(s){return Ho(s),s.headers=Tt.from(s.headers),s.data=Fo.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),tx.getAdapter(s.adapter||Rl.adapter,s)(s).then(function(o){return Ho(s),o.data=Fo.call(s,s.transformResponse,o),o.headers=Tt.from(o.headers),o},function(o){return Jp(o)||(Ho(s),o&&o.response&&(o.response.data=Fo.call(s,s.transformResponse,o.response),o.response.headers=Tt.from(o.response.headers))),Promise.reject(o)})}const nx="1.13.2",xr={};["object","boolean","number","function","string","symbol"].forEach((s,i)=>{xr[s]=function(o){return typeof o===s||"a"+(i<1?"n ":" ")+s}});const ip={};xr.transitional=function(i,c,o){function d(f,m){return"[Axios v"+nx+"] Transitional option '"+f+"'"+m+(o?". "+o:"")}return(f,m,x)=>{if(i===!1)throw new Ce(d(m," has been removed"+(c?" in "+c:"")),Ce.ERR_DEPRECATED);return c&&!ip[m]&&(ip[m]=!0,console.warn(d(m," has been deprecated since v"+c+" and will be removed in the near future"))),i?i(f,m,x):!0}};xr.spelling=function(i){return(c,o)=>(console.warn(`${o} is likely a misspelling of ${i}`),!0)};function jv(s,i,c){if(typeof s!="object")throw new Ce("options must be an object",Ce.ERR_BAD_OPTION_VALUE);const o=Object.keys(s);let d=o.length;for(;d-- >0;){const f=o[d],m=i[f];if(m){const x=s[f],g=x===void 0||m(x,f,s);if(g!==!0)throw new Ce("option "+f+" must be "+g,Ce.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new Ce("Unknown option "+f,Ce.ERR_BAD_OPTION)}}const sr={assertOptions:jv,validators:xr},mn=sr.validators;let Ra=class{constructor(i){this.defaults=i||{},this.interceptors={request:new Zh,response:new Zh}}async request(i,c){try{return await this._request(i,c)}catch(o){if(o instanceof Error){let d={};Error.captureStackTrace?Error.captureStackTrace(d):d=new Error;const f=d.stack?d.stack.replace(/^.+\n/,""):"";try{o.stack?f&&!String(o.stack).endsWith(f.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+f):o.stack=f}catch{}}throw o}}_request(i,c){typeof i=="string"?(c=c||{},c.url=i):c=i||{},c=Ua(this.defaults,c);const{transitional:o,paramsSerializer:d,headers:f}=c;o!==void 0&&sr.assertOptions(o,{silentJSONParsing:mn.transitional(mn.boolean),forcedJSONParsing:mn.transitional(mn.boolean),clarifyTimeoutError:mn.transitional(mn.boolean)},!1),d!=null&&($.isFunction(d)?c.paramsSerializer={serialize:d}:sr.assertOptions(d,{encode:mn.function,serialize:mn.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),sr.assertOptions(c,{baseUrl:mn.spelling("baseURL"),withXsrfToken:mn.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let m=f&&$.merge(f.common,f[c.method]);f&&$.forEach(["delete","get","head","post","put","patch","common"],w=>{delete f[w]}),c.headers=Tt.concat(m,f);const x=[];let g=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(c)===!1||(g=g&&M.synchronous,x.unshift(M.fulfilled,M.rejected))});const p=[];this.interceptors.response.forEach(function(M){p.push(M.fulfilled,M.rejected)});let y,_=0,T;if(!g){const w=[lp.bind(this),void 0];for(w.unshift(...x),w.push(...p),T=w.length,y=Promise.resolve(c);_<T;)y=y.then(w[_++],w[_++]);return y}T=x.length;let A=c;for(;_<T;){const w=x[_++],M=x[_++];try{A=w(A)}catch(S){M.call(this,S);break}}try{y=lp.call(this,A)}catch(w){return Promise.reject(w)}for(_=0,T=p.length;_<T;)y=y.then(p[_++],p[_++]);return y}getUri(i){i=Ua(this.defaults,i);const c=Wp(i.baseURL,i.url,i.allowAbsoluteUrls);return Vp(c,i.params,i.paramsSerializer)}};$.forEach(["delete","get","head","options"],function(i){Ra.prototype[i]=function(c,o){return this.request(Ua(o||{},{method:i,url:c,data:(o||{}).data}))}});$.forEach(["post","put","patch"],function(i){function c(o){return function(f,m,x){return this.request(Ua(x||{},{method:i,headers:o?{"Content-Type":"multipart/form-data"}:{},url:f,data:m}))}}Ra.prototype[i]=c(),Ra.prototype[i+"Form"]=c(!0)});let Nv=class ax{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(f){c=f});const o=this;this.promise.then(d=>{if(!o._listeners)return;let f=o._listeners.length;for(;f-- >0;)o._listeners[f](d);o._listeners=null}),this.promise.then=d=>{let f;const m=new Promise(x=>{o.subscribe(x),f=x}).then(d);return m.cancel=function(){o.unsubscribe(f)},m},i(function(f,m,x){o.reason||(o.reason=new ws(f,m,x),c(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const c=this._listeners.indexOf(i);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const i=new AbortController,c=o=>{i.abort(o)};return this.subscribe(c),i.signal.unsubscribe=()=>this.unsubscribe(c),i.signal}static source(){let i;return{token:new ax(function(d){i=d}),cancel:i}}};function Sv(s){return function(c){return s.apply(null,c)}}function wv(s){return $.isObject(s)&&s.isAxiosError===!0}const Io={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Io).forEach(([s,i])=>{Io[i]=s});function sx(s){const i=new Ra(s),c=qp(Ra.prototype.request,i);return $.extend(c,Ra.prototype,i,{allOwnKeys:!0}),$.extend(c,i,null,{allOwnKeys:!0}),c.create=function(d){return sx(Ua(s,d))},c}const Ie=sx(Rl);Ie.Axios=Ra;Ie.CanceledError=ws;Ie.CancelToken=Nv;Ie.isCancel=Jp;Ie.VERSION=nx;Ie.toFormData=pr;Ie.AxiosError=Ce;Ie.Cancel=Ie.CanceledError;Ie.all=function(i){return Promise.all(i)};Ie.spread=Sv;Ie.isAxiosError=wv;Ie.mergeConfig=Ua;Ie.AxiosHeaders=Tt;Ie.formToJSON=s=>$p($.isHTMLForm(s)?new FormData(s):s);Ie.getAdapter=tx.getAdapter;Ie.HttpStatusCode=Io;Ie.default=Ie;const{Axios:fj,AxiosError:hj,CanceledError:pj,isCancel:xj,CancelToken:yj,VERSION:gj,all:bj,Cancel:_j,isAxiosError:vj,spread:jj,toFormData:Nj,AxiosHeaders:Sj,HttpStatusCode:wj,formToJSON:Cj,getAdapter:Ej,mergeConfig:Tj}=Ie,rp="http://localhost:3421",Cv=rp.trim()!==""?rp:"",te=Ie.create({baseURL:Cv,headers:{"Content-Type":"application/json"}});te.interceptors.request.use(s=>{const i=localStorage.getItem("token");return i&&(s.headers.Authorization=`Bearer ${i}`),s});te.interceptors.response.use(s=>s,s=>(s.response?.status===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(s)));const Ev=Object.freeze(Object.defineProperty({__proto__:null,api:te},Symbol.toStringTag,{value:"Module"})),Tv={new:"bg-blue-100 text-blue-800",calculation_pending:"bg-yellow-100 text-yellow-800",director_approval_pending:"bg-purple-100 text-purple-800",director_rejected:"bg-red-100 text-red-800",client_approval:"bg-green-100 text-green-800",awaiting_payment:"bg-orange-100 text-orange-800",execution:"bg-indigo-100 text-indigo-800",completed:"bg-gray-100 text-gray-800"};function Av(){const{user:s}=qn(),[i,c]=N.useState("all"),[o,d]=N.useState("date"),[f,m]=N.useState("desc"),[x,g]=N.useState(""),[p,y]=N.useState(""),[_,T]=N.useState("all"),[A,w]=N.useState(""),[M,S]=N.useState(""),{data:z}=fe({queryKey:["reference-clients"],queryFn:async()=>(await te.get("/api/reference/clients")).data}),{data:q,isLoading:j}=fe({queryKey:["deals",_,A,M],queryFn:async()=>{const H={limit:100,offset:0};return _!=="all"&&(H.client_id=parseInt(_)),A&&(H.company_name=A),M&&(H.account_number=M),(await te.get("/api/deals",{params:H})).data}});if(j)return a.jsx("div",{className:"text-center py-8",children:"Loading..."});const k=(q||[]).filter(H=>i!=="all"?H.status===i:!0).filter(H=>{if(!x&&!p)return!0;const ue=new Date(H.created_at).getTime();if(x){const X=new Date(x).getTime();if(ue<X)return!1}if(p){const X=new Date(p).getTime()+864e5-1;if(ue>X)return!1}return!0}).sort((H,ue)=>{if(o==="date"){const C=new Date(H.created_at).getTime(),B=new Date(ue.created_at).getTime();return f==="desc"?B-C:C-B}const X=parseFloat(H.total_eur_request),Z=parseFloat(ue.total_eur_request);return f==="desc"?Z-X:X-Z});return a.jsxs("div",{className:"px-4 py-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),a.jsxs("p",{className:"text-gray-600",children:["Welcome, ",s?.full_name||s?.email]})]}),s?.role==="manager"&&a.jsxs("div",{className:"mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(an,{to:"/deals/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700",children:"+ New Deal"}),a.jsx(an,{to:"/debts",className:"inline-flex items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md shadow-sm text-red-700 bg-red-50 hover:bg-red-100",children:" View Debts"})]})}),a.jsxs("div",{className:"bg-white shadow rounded-md p-4",children:[a.jsx("h2",{className:"text-md font-semibold mb-3",children:"Filters"}),a.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Status"}),a.jsxs("select",{value:i,onChange:H=>c(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"new",children:"New"}),a.jsx("option",{value:"senior_manager_review",children:"Senior Manager Review"}),a.jsx("option",{value:"senior_manager_approved",children:"Senior Manager Approved"}),a.jsx("option",{value:"senior_manager_rejected",children:"Senior Manager Rejected"}),a.jsx("option",{value:"client_agreed_to_pay",children:"Client Agreed to Pay"}),a.jsx("option",{value:"awaiting_client_payment",children:"Awaiting Client Payment"}),a.jsx("option",{value:"client_partially_paid",children:"Client Partially Paid"}),a.jsx("option",{value:"execution",children:"Execution"}),a.jsx("option",{value:"completed",children:"Completed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Client"}),a.jsxs("select",{value:_,onChange:H=>T(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"all",children:"All Clients"}),z?.map(H=>a.jsx("option",{value:H.id,children:H.name},H.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Company"}),a.jsx("input",{type:"text",value:A,onChange:H=>w(H.target.value),placeholder:"Search by company...",className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Account/IBAN"}),a.jsx("input",{type:"text",value:M,onChange:H=>S(H.target.value),placeholder:"Search by IBAN...",className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Date from"}),a.jsx("input",{type:"date",value:x,onChange:H=>g(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Date to"}),a.jsx("input",{type:"date",value:p,onChange:H=>y(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Sort"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("select",{value:o,onChange:H=>d(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"date",children:"By date"}),a.jsx("option",{value:"amount",children:"By amount"})]}),a.jsx("button",{type:"button",onClick:()=>m(H=>H==="desc"?"asc":"desc"),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:f==="desc"?"":""})]})]})]})]})]}),s?.role==="accountant"&&a.jsx("div",{className:"mb-6",children:a.jsx(an,{to:"/deals/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700",children:"+ New Deal"})}),s&&(s.role==="accountant"||s.role==="director")&&a.jsxs("div",{className:"mb-4 bg-white shadow rounded-md p-4",children:[a.jsx("h2",{className:"text-md font-semibold mb-3",children:"Filters"}),a.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Status"}),a.jsxs("select",{value:i,onChange:H=>c(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"new",children:"New"}),a.jsx("option",{value:"calculation_pending",children:"Calculation pending"}),a.jsx("option",{value:"director_approval_pending",children:"Director approval"}),a.jsx("option",{value:"director_rejected",children:"Director rejected"}),a.jsx("option",{value:"client_approval",children:"Client approval"}),a.jsx("option",{value:"awaiting_payment",children:"Awaiting payment"}),a.jsx("option",{value:"execution",children:"Execution"}),a.jsx("option",{value:"completed",children:"Completed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Client"}),a.jsxs("select",{value:_,onChange:H=>T(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"all",children:"All Clients"}),z?.map(H=>a.jsx("option",{value:H.id,children:H.name},H.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Company"}),a.jsx("input",{type:"text",value:A,onChange:H=>w(H.target.value),placeholder:"Search by company...",className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Account/IBAN"}),a.jsx("input",{type:"text",value:M,onChange:H=>S(H.target.value),placeholder:"Search by IBAN...",className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Date from"}),a.jsx("input",{type:"date",value:x,onChange:H=>g(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Date to"}),a.jsx("input",{type:"date",value:p,onChange:H=>y(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Sort"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("select",{value:o,onChange:H=>d(H.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"date",children:"By date"}),a.jsx("option",{value:"amount",children:"By amount"})]}),a.jsx("button",{type:"button",onClick:()=>m(H=>H==="desc"?"asc":"desc"),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:f==="desc"?"":""})]})]})]})]}),a.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[a.jsx("ul",{className:"divide-y divide-gray-200",children:k.map(H=>a.jsx("li",{children:a.jsx(an,{to:`/deals/${H.id}`,className:"block hover:bg-gray-50 px-4 py-4 sm:px-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-indigo-600 truncate",children:["Deal #",H.id," - ",H.client_name||"Unknown Client"]}),a.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[parseFloat(H.total_eur_request).toLocaleString()," EUR",H.total_usdt_calculated&&a.jsxs("span",{className:"ml-2",children:[" ",parseFloat(H.total_usdt_calculated).toLocaleString()," USDT"]})]})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[H.progress&&a.jsxs("div",{className:"text-sm text-gray-500",children:[H.progress.paid,"/",H.progress.total," paid"]}),s?.role==="manager"?a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:H.status==="new"?"New":H.status==="client_approval"?"Awaiting Client":H.status==="awaiting_payment"?"Awaiting Payment":H.status==="execution"?"In Progress":H.status==="completed"?"Completed":"Active"}):a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Tv[H.status]||"bg-gray-100 text-gray-800"}`,children:H.status.replace("_"," ")})]})]})})},H.id))}),(!q||q.length===0)&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:"No deals found"})]})]})}const Dv={new:{label:"",color:"bg-blue-100 text-blue-800"},senior_manager_review:{label:" ",color:"bg-yellow-100 text-yellow-800"},senior_manager_approved:{label:"",color:"bg-green-100 text-green-800"},senior_manager_rejected:{label:"",color:"bg-red-100 text-red-800"},client_agreed_to_pay:{label:" ",color:"bg-indigo-100 text-indigo-800"},awaiting_client_payment:{label:" ",color:"bg-orange-100 text-orange-800"},client_partially_paid:{label:" ",color:"bg-amber-100 text-amber-800"},execution:{label:" ",color:"bg-purple-100 text-purple-800"},completed:{label:"",color:"bg-emerald-100 text-emerald-800"}},Rv={direct:" ",exchange:"",partner:"",partner_50_50:" 50-50"},Ov={:"",:"",:""," ":" "," ":" "," ":" ","  ":"  ",:"",:""," ":" "," ":" "," ":" "," ":" ",created:"",updated:"",status_changed:" ",transaction_added:" ",transaction_removed:" ",client_rate_changed:"  ",approved:"",rejected:"",payment_confirmed:" "};function Mv(){const{id:s}=pp(),i=ca(),{user:c}=qn(),o=it(),[d,f]=N.useState(!1),[m,x]=N.useState(!1),[g,p]=N.useState(""),{data:y,isLoading:_,error:T}=fe({queryKey:["deal",s],queryFn:async()=>(await te.get(`/api/deals/${s}?include_history=true`)).data}),{data:A}=fe({queryKey:["reference-clients"],queryFn:async()=>(await te.get("/api/reference/clients")).data}),{data:w}=fe({queryKey:["reference-internal-companies"],queryFn:async()=>(await te.get("/api/reference/internal-companies")).data}),{data:M}=fe({queryKey:["reference-internal-company-accounts"],queryFn:async()=>(await te.get("/api/reference/internal-company-accounts")).data}),{data:S}=fe({queryKey:["account-balances"],queryFn:async()=>(await te.get("/api/account-balances")).data}),{data:z}=fe({queryKey:["reference-route-commissions"],queryFn:async()=>(await te.get("/api/reference/route-commissions")).data}),{data:q}=fe({queryKey:["reference-all-companies"],queryFn:async()=>{const L=await te.get("/api/reference/clients"),re=[];for(const de of L.data)try{const Y=await te.get(`/api/reference/companies?client_id=${de.id}`);re.push(...Y.data)}catch{}return re}}),{data:j}=fe({queryKey:["company-accounts-all"],queryFn:async()=>(await te.get("/api/reference/company-accounts")).data}),{data:k,refetch:H}=fe({queryKey:["deal-income",s],queryFn:async()=>(await te.get(`/api/deals/${s}/income`)).data,enabled:!!s}),ue=L=>L?w?.find(re=>re.id===L)?.name||`ID: ${L}`:null,X=L=>{if(!L)return null;const re=M?.find(de=>de.id===L);return re?{name:re.account_name,number:re.account_number,currency:re.currency}:null},Z=L=>{if(!L)return null;const re=M?.find(de=>de.id===L);return re?`${re.account_name} (${re.currency})`:`ID: ${L}`},C=L=>{if(!L)return null;const re=S?.find(de=>de.id===L);return re?`${re.account_name} (${re.currency})`:`ID: ${L}`},B=L=>{if(!L)return null;const re=z?.find(de=>de.id===L);return re?re.is_fixed_currency?`${re.commission_fixed} ${re.currency}`:`${re.commission_percent}%`:`ID: ${L}`},V=L=>L?q?.find(re=>re.id===L)?.name||`ID: ${L}`:null,R=L=>{if(!L)return null;const re=j?.filter(de=>de.company_id===L)||[];return re.length>0?re[0]:null},v=je({mutationFn:async()=>{await te.post(`/api/deals/${s}/client-agreed-to-pay`)},onSuccess:()=>{o.invalidateQueries({queryKey:["deal",s]}),o.invalidateQueries({queryKey:["deals"]})}}),ie=je({mutationFn:async L=>{await te.post(`/api/deals/${s}/confirm-client-payment`,L)},onSuccess:()=>{o.invalidateQueries({queryKey:["deal",s]}),o.invalidateQueries({queryKey:["deals"]})}}),Ne=je({mutationFn:async L=>{await te.post(`/api/deals/${s}/pay-debt`,{payment_amount:L})},onSuccess:()=>{o.invalidateQueries({queryKey:["deal",s]}),o.invalidateQueries({queryKey:["deals"]})}}),O=je({mutationFn:async L=>{await te.post(`/api/transactions/${L}/mark-paid`)},onSuccess:()=>{o.invalidateQueries({queryKey:["deal",s]}),o.invalidateQueries({queryKey:["deals"]})}}),P=je({mutationFn:async L=>{await te.patch(`/api/deals/${s}/client-rate`,{client_rate_percent:L})},onSuccess:()=>{o.invalidateQueries({queryKey:["deal",s]}),o.invalidateQueries({queryKey:["deal-income",s]}),x(!1),H()}});if(_)return a.jsx("div",{className:"text-center py-8",children:"Loading..."});if(T)return a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-red-600",children:"Error loading deal"}),a.jsx("button",{onClick:()=>i(-1),className:"mt-4 px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Go Back"})]});if(!y)return a.jsx("div",{className:"text-center py-8",children:"Deal not found"});const se=A?.find(L=>L.id===y.client_id),oe=Dv[y.status]||{label:y.status,color:"bg-gray-100 text-gray-800"},ge=c?.role==="manager"&&y.status==="senior_manager_approved",D=c?.role==="manager"&&(y.status==="client_agreed_to_pay"||y.status==="awaiting_client_payment"),I=c?.role==="accountant"&&y.status==="execution",le=y.is_client_debt&&parseFloat(y.client_debt_amount||"0")>0,ce=["accountant","senior_manager","director"].includes(c?.role||""),xe=y.transactions?{paid:y.transactions.filter(L=>L.status==="paid").length,total:y.transactions.length}:null,_e=y.transactions.reduce((L,re)=>{const de=re.client_company_id||0;return L[de]||(L[de]=[]),L[de].push(re),L},{}),Te=()=>{i(`/deals/new?copy_from=${y.id}`)},Je=()=>{g&&P.mutate(g)};return a.jsxs("div",{className:"px-4 py-6 max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("button",{onClick:()=>i(-1),className:"text-indigo-600 hover:text-indigo-800 mb-2 text-sm",children:" "}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[" #",y.id]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${oe.color}`,children:oe.label})]}),a.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[": ",a.jsx("span",{className:"font-medium",children:se?.name||`ID ${y.client_id}`})]})]}),a.jsxs("div",{className:"flex gap-2",children:[c?.role==="accountant"&&y.status==="execution"&&a.jsx("button",{onClick:()=>i(`/deals/${y.id}/edit`),className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm",children:""}),a.jsx("button",{onClick:Te,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm",children:" "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),a.jsxs("span",{className:"font-semibold",children:[y.deal_amount?parseFloat(y.deal_amount).toLocaleString("ru-RU",{maximumFractionDigits:2}):parseFloat(y.total_eur_request).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",y.client_receives_currency||"EUR"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),m?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",step:"0.01",value:g,onChange:L=>p(L.target.value),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"%"}),a.jsx("button",{onClick:Je,disabled:P.isPending,className:"px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>x(!1),className:"px-2 py-1 text-xs bg-gray-400 text-white rounded hover:bg-gray-500",children:""})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"font-medium",children:[y.client_rate_percent||"0","%"]}),ce&&a.jsx("button",{onClick:()=>{p(y.client_rate_percent||"0"),x(!0)},className:"text-indigo-600 hover:text-indigo-800 text-xs",children:""})]})]}),k&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),a.jsxs("span",{className:"font-semibold",children:[Number(k.client_should_send).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",k.currency]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"  :"}),a.jsxs("span",{className:"font-semibold text-orange-600",children:[Number(k.deal_costs).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",k.currency]})]})]})]}),k&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("h3",{className:"text-xs font-medium text-gray-500 mb-2",children:"  "}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:":"}),a.jsxs("span",{className:`font-semibold ${k.is_profitable?"text-green-600":"text-red-600"}`,children:[Number(k.income_amount).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",k.currency," ","(",Number(k.income_percent).toFixed(2),"%)"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600 text-sm",children:["  (",k.manager_commission_percent,"%):"]}),a.jsxs("span",{className:"font-medium",children:[k.manager_commission_amount.toLocaleString("ru-RU",{maximumFractionDigits:2})," ",k.currency]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm font-medium",children:" :"}),a.jsxs("span",{className:`font-bold ${k.net_profit>=0?"text-green-600":"text-red-600"}`,children:[k.net_profit.toLocaleString("ru-RU",{maximumFractionDigits:2})," ",k.currency]})]})]})]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),xe&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsxs("span",{className:"font-medium",children:[xe.paid," / ",xe.total," "]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${xe.total>0?xe.paid/xe.total*100:0}%`}})})]}),le&&a.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm",children:[a.jsxs("p",{className:"font-medium text-yellow-800",children:[" : ",parseFloat(y.client_debt_amount||"0").toLocaleString("ru-RU")," EUR"]}),a.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:[": ",parseFloat(y.client_paid_amount||"0").toLocaleString("ru-RU")," EUR"]})]})]})]}),y.senior_manager_comment&&a.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsx("p",{className:"text-sm font-medium text-blue-800",children:"  :"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:y.senior_manager_comment})]}),y.history&&y.history.length>0&&a.jsxs("div",{className:"mb-6 bg-white shadow rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-700",children:" "}),a.jsx("button",{onClick:()=>f(!d),className:"text-indigo-600 hover:text-indigo-800 text-sm",children:d?"":` (${y.history.length})`})]}),d&&a.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:y.history.map(L=>{const re=L.user_role?L.user_role.split("_").map(Y=>Y.charAt(0).toUpperCase()+Y.slice(1)).join(" "):"Unknown",de=L.user_name?`${L.user_name}  ${re}`:`User #${L.user_id}`;return a.jsxs("div",{className:"border-l-2 border-indigo-200 pl-3 py-1",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[Ov[L.action]||L.action,":"]}),a.jsx("span",{className:"text-xs text-gray-600 ml-2",children:de})]}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(L.created_at).toLocaleString("ru-RU")})]}),L.comment&&a.jsx("p",{className:"text-xs text-gray-600 mt-2 whitespace-pre-wrap",children:L.comment.split(`
`).map((Y,W)=>{if(Y.includes("  ")){const Se=Y.split("  ");return a.jsxs("div",{children:[a.jsx("span",{className:"text-red-500",children:Se[0]}),a.jsx("span",{children:"  "}),a.jsx("span",{className:"text-green-500",children:Se[1]})]},W)}return a.jsx("div",{children:Y},W)})}),L.changes&&Object.keys(L.changes).length>0&&a.jsx("div",{className:"mt-1 text-xs text-gray-600",children:Object.entries(L.changes).map(([Y,W])=>a.jsxs("div",{children:[a.jsxs("span",{className:"font-medium",children:[Y,":"]})," ",a.jsx("span",{className:"text-red-500",children:W.old||""}),"  ",a.jsx("span",{className:"text-green-500",children:W.new||""})]},Y))})]},L.id)})})]}),(ge||D||le&&c?.role==="manager")&&a.jsxs("div",{className:"mb-6 bg-white shadow rounded-lg p-4",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-3",children:""}),a.jsxs("div",{className:"space-y-3",children:[ge&&a.jsx("button",{onClick:()=>v.mutate(),disabled:v.isPending,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:v.isPending?"...":"   "}),D&&a.jsx(Uv,{deal:y,onConfirm:ie}),le&&c?.role==="manager"&&a.jsx(qv,{deal:y,onPay:Ne})]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("h2",{className:"text-sm font-semibold text-gray-700 mb-4",children:"  "}),Object.entries(_e).map(([L,re])=>{const de=V(parseInt(L)),Y=R(parseInt(L));return a.jsx("div",{className:"mb-4 last:mb-0",children:a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:[a.jsxs("span",{className:"text-sm font-medium",children:[": ",de||" "]}),Y&&a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:[" : ",Y.account_name," (",Y.account_number,")"]}),a.jsxs("span",{className:"text-sm text-gray-400 ml-2",children:[" ",re.length," ()"]})]}),a.jsx("div",{className:"divide-y divide-gray-100",children:re.map((W,Se)=>{const Ve=ue(W.internal_company_id),rt=X(W.internal_company_account_id);return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-sm font-medium",children:[" ",Se+1,": ",Rv[W.route_type||""]||W.route_type||" "]}),W.exchange_rate&&a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(: ",parseFloat(W.exchange_rate).toFixed(4),")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${W.status==="paid"?"bg-green-100 text-green-800":W.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:W.status==="paid"?"":W.status==="in_progress"?" ":""}),I&&W.status!=="paid"&&a.jsx("button",{onClick:()=>O.mutate(W.id),disabled:O.isPending,className:"px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:""})]})]}),W.route_type==="direct"&&Ve&&a.jsx("div",{className:"mb-2 p-2 bg-indigo-50 rounded text-xs",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:Ve}),rt&&a.jsxs("span",{className:"text-gray-500 ml-1",children:["(: ",rt.name,", ",rt.number,")"]})]}),a.jsx("span",{className:"text-indigo-500",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:de||""}),Y&&a.jsxs("span",{className:"text-gray-500 ml-1",children:["(: ",Y.account_name,", ",Y.account_number,")"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs mb-2",children:[W.amount_from_account&&a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("span",{className:"text-gray-500 block",children:"  :"}),a.jsxs("span",{className:"font-semibold text-sm",children:[parseFloat(W.amount_from_account).toLocaleString("ru-RU")," ",y.client_receives_currency||"EUR"]})]}),W.calculated_route_income&&a.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[a.jsx("span",{className:"text-gray-500 block",children:"Route Income:"}),a.jsxs("span",{className:"font-semibold text-sm text-green-700",children:[parseFloat(W.calculated_route_income).toLocaleString("ru-RU")," ",y.client_sends_currency||"USDT"]})]})]}),W.route_type==="direct"&&a.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-blue-800 mb-1",children:" "}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[W.internal_company_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:ue(W.internal_company_id)})]}),W.internal_company_account_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:Z(W.internal_company_account_id)})]}),W.bank_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:B(W.bank_commission_id)})]})]})]}),W.route_type==="exchange"&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-green-800 mb-1",children:""}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[W.crypto_account_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:C(W.crypto_account_id)})]}),W.exchange_from_currency&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:W.exchange_from_currency})]}),W.exchange_amount&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Exchange Amount:"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(W.exchange_amount).toLocaleString("ru-RU")})]}),W.crypto_exchange_rate&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(W.crypto_exchange_rate).toFixed(4)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-1",children:[W.agent_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Agent:"}),a.jsx("span",{className:"font-medium ml-1",children:B(W.agent_commission_id)})]}),W.exchange_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Exchange:"}),a.jsx("span",{className:"font-medium ml-1",children:B(W.exchange_commission_id)})]}),W.exchange_bank_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Bank:"}),a.jsx("span",{className:"font-medium ml-1",children:B(W.exchange_bank_commission_id)})]})]})]}),W.route_type==="partner"&&a.jsxs("div",{className:"mt-2 p-2 bg-purple-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-purple-800 mb-1",children:""}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[W.partner_company_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:ue(W.partner_company_id)})]}),W.amount_to_partner_usdt&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" (USDT):"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(W.amount_to_partner_usdt).toLocaleString("ru-RU")})]}),W.amount_partner_sends&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(W.amount_partner_sends).toLocaleString("ru-RU")})]}),W.partner_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:B(W.partner_commission_id)})]})]})]}),W.route_type==="partner_50_50"&&a.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:" 50-50"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[W.partner_50_50_company_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:ue(W.partner_50_50_company_id)})]}),W.amount_to_partner_50_50_usdt&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" (USDT):"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(W.amount_to_partner_50_50_usdt).toLocaleString("ru-RU")})]}),W.amount_partner_50_50_sends&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(W.amount_partner_50_50_sends).toLocaleString("ru-RU")})]}),W.partner_50_50_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:B(W.partner_50_50_commission_id)})]})]})]})]},W.id)})})]})},L)}),y.transactions.length===0&&a.jsx("p",{className:"text-center text-gray-500 py-4",children:" "})]})]})}function Uv({deal:s,onConfirm:i}){const[c,o]=N.useState(!1),[d,f]=N.useState(""),m=()=>{const x=parseFloat(c?d:s.total_eur_request);i.mutate({client_paid_amount:x,is_partial:c})};return a.jsxs("div",{className:"p-3 border border-gray-300 rounded-md bg-gray-50",children:[a.jsx("h3",{className:"font-medium mb-2 text-sm",children:" "}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center text-sm",children:[a.jsx("input",{type:"checkbox",checked:c,onChange:x=>o(x.target.checked),className:"mr-2"})," "]}),c&&a.jsxs("div",{children:[a.jsx("input",{type:"number",step:"0.01",value:d,onChange:x=>f(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:"  (EUR)"}),d&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[": ",(parseFloat(s.total_eur_request)-parseFloat(d)).toLocaleString("ru-RU")," EUR"]})]}),a.jsx("button",{onClick:m,disabled:i.isPending||c&&!d,className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 text-sm",children:i.isPending?"...":" "})]})]})}function qv({deal:s,onPay:i}){const[c,o]=N.useState(""),d=()=>{c&&(i.mutate(parseFloat(c)),o(""))};return a.jsxs("div",{className:"p-3 border border-yellow-300 rounded-md bg-yellow-50",children:[a.jsx("h3",{className:"font-medium mb-2 text-sm",children:" "}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"number",step:"0.01",value:c,onChange:f=>o(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",placeholder:`: ${parseFloat(s.client_debt_amount||"0").toLocaleString("ru-RU")} EUR`,max:parseFloat(s.client_debt_amount||"0")}),a.jsx("button",{onClick:d,disabled:i.isPending||!c||parseFloat(c)<=0,className:"w-full px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:opacity-50 text-sm",children:i.isPending?"...":""})]})]})}function lx({clientId:s,transactions:i,onUpdate:c,dealAmount:o,clientSendsCurrency:d,clientReceivesCurrency:f,onSelectedAccountsChange:m}){const{data:x}=fe({queryKey:["reference-companies",s],queryFn:async()=>s?(await te.get(`/api/reference/companies?client_id=${s}`)).data:[],enabled:!!s}),{data:g}=fe({queryKey:["reference-all-companies"],queryFn:async()=>{const C=await te.get("/api/reference/clients"),B=[];for(const V of C.data)try{const R=await te.get(`/api/reference/companies?client_id=${V.id}`);B.push(...R.data)}catch{}return B}}),{data:p}=fe({queryKey:["reference-all-company-accounts"],queryFn:async()=>(await te.get("/api/reference/company-accounts")).data}),{data:y}=fe({queryKey:["reference-internal-companies"],queryFn:async()=>(await te.get("/api/reference/internal-companies")).data}),{data:_}=fe({queryKey:["reference-internal-company-accounts"],queryFn:async()=>(await te.get("/api/reference/internal-company-accounts")).data}),{data:T}=fe({queryKey:["account-balances"],queryFn:async()=>(await te.get("/api/account-balances")).data}),{data:A}=fe({queryKey:["reference-route-commissions"],queryFn:async()=>(await te.get("/api/reference/route-commissions")).data}),w=C=>{if(!C.route_type||!C.exchange_rate){C.final_income=void 0;return}let B=0;if(C.route_type==="direct"){if(!C.amount_from_account){C.final_income=void 0;return}let V=C.amount_from_account;const R=A?.find(v=>v.id===C.bank_commission_id);R&&(R.is_fixed_currency&&R.commission_fixed?V+=R.commission_fixed:R.commission_percent&&(V=V-V*R.commission_percent/100)),B=V*C.exchange_rate}else if(C.route_type==="exchange"){if(!C.amount_from_account||!C.crypto_exchange_rate||!C.exchange_rate){C.final_income=void 0;return}let V=C.amount_from_account;const R=A?.find(O=>O.id===C.agent_commission_id);R&&(R.is_fixed_currency&&R.commission_fixed?V-=R.commission_fixed:R.commission_percent&&(V=V-V*R.commission_percent/100));const v=A?.find(O=>O.id===C.exchange_commission_id);v&&(v.is_fixed_currency&&v.commission_fixed?V-=v.commission_fixed:v.commission_percent&&(V=V-V*v.commission_percent/100));const ie=A?.find(O=>O.id===C.exchange_bank_commission_id);ie&&(ie.is_fixed_currency&&ie.commission_fixed?V-=ie.commission_fixed:ie.commission_percent&&(V=V-V*ie.commission_percent/100)),B=V*C.crypto_exchange_rate*C.exchange_rate}else if(C.route_type==="partner"){if(!C.amount_from_account||!C.exchange_rate){C.final_income=void 0;return}const V=C.amount_partner_sends!==void 0&&C.amount_partner_sends!==null?C.amount_partner_sends:C.amount_from_account*C.exchange_rate,R=C.amount_to_partner_usdt!==void 0&&C.amount_to_partner_usdt!==null?C.amount_to_partner_usdt:0;B=Math.max(V,R)}else if(C.route_type==="partner_50_50"){if(!C.amount_from_account||!C.exchange_rate){C.final_income=void 0;return}const V=C.amount_partner_50_50_sends!==void 0&&C.amount_partner_50_50_sends!==null?C.amount_partner_50_50_sends:C.amount_from_account*C.exchange_rate,R=C.amount_to_partner_50_50_usdt!==void 0&&C.amount_to_partner_50_50_usdt!==null?C.amount_to_partner_50_50_usdt:0;B=Math.max(V,R)}C.final_income=B},M=C=>{if(!C.routes||C.routes.length===0){C.amount_for_client=0,C.final_income=void 0;return}C.routes.forEach(B=>{w(B)}),C.amount_for_client=C.routes.reduce((B,V)=>V.route_type==="direct"||V.route_type==="exchange"||V.route_type==="partner"||V.route_type==="partner_50_50"?B+(V.amount_from_account||0):B,0),C.final_income=C.routes.reduce((B,V)=>B+(V.final_income||0),0)};N.useEffect(()=>{const C=i.map(B=>(M(B),B));c(C)},[i.length]),N.useEffect(()=>{const C=i.map(B=>{const V=B.routes.map(R=>{if(R.route_type==="exchange"&&R.amount_from_account&&R.crypto_exchange_rate){let v=R.amount_from_account;const ie=A?.find(P=>P.id===R.agent_commission_id);ie&&(ie.is_fixed_currency&&ie.commission_fixed?v-=ie.commission_fixed:ie.commission_percent&&(v=v-v*ie.commission_percent/100));const Ne=A?.find(P=>P.id===R.exchange_commission_id);Ne&&(Ne.is_fixed_currency&&Ne.commission_fixed?v-=Ne.commission_fixed:Ne.commission_percent&&(v=v-v*Ne.commission_percent/100));const O=A?.find(P=>P.id===R.exchange_bank_commission_id);O&&(O.is_fixed_currency&&O.commission_fixed?v-=O.commission_fixed:O.commission_percent&&(v=v-v*O.commission_percent/100)),R.exchange_amount=v*R.crypto_exchange_rate}return R});return{...B,routes:V}});C.forEach(B=>{M(B)}),JSON.stringify(C)!==JSON.stringify(i)&&c(C)},[i.map(C=>C.routes.map(B=>({route_type:B.route_type,amount_from_account:B.amount_from_account,crypto_exchange_rate:B.crypto_exchange_rate,agent_commission_id:B.agent_commission_id,exchange_commission_id:B.exchange_commission_id,exchange_bank_commission_id:B.exchange_bank_commission_id}))).join(","),A]);const S=()=>{const C={client_company_id:0,amount_for_client:0,routes:[]};c([...i,C])},z=C=>{const B=[...i],V={id:`route-${Date.now()}-${Math.random()}`,route_type:"",exchange_rate:0};B[C].routes=[...B[C].routes||[],V],M(B[C]),c(B)},q=(C,B)=>{const V=[...i];V[C].routes=V[C].routes.filter((R,v)=>v!==B),M(V[C]),c(V)},j=(C,B,V,R)=>{const v=[...i];if(v[C].routes[B]={...v[C].routes[B],[V]:R},V==="route_type"&&["internal_company_id","internal_company_account_id","amount_from_account","bank_commission_id","crypto_account_id","exchange_from_currency","exchange_amount","crypto_exchange_rate","agent_commission_id","exchange_commission_id","exchange_bank_commission_id","partner_company_id","partner_account_id","amount_to_partner_usdt","amount_partner_sends","partner_commission_id","partner_50_50_company_id","partner_50_50_account_id","amount_to_partner_50_50_usdt","amount_partner_50_50_sends","partner_50_50_commission_id"].forEach(P=>{v[C].routes[B][P]=void 0}),V==="internal_company_id"&&(v[C].routes[B].internal_company_account_id=void 0),V==="partner_company_id"&&(v[C].routes[B].partner_account_id=void 0),V==="partner_50_50_company_id"&&(v[C].routes[B].partner_50_50_account_id=void 0),V==="crypto_account_id"&&R){const O=T?.find(P=>P.id===R);O?.currency&&(v[C].routes[B].exchange_from_currency=O.currency)}if(V==="route_type"&&R&&A){const O=A.find(P=>P.route_type===R&&P.is_active);if(O)if(R==="direct")v[C].routes[B].bank_commission_id=O.id;else if(R==="exchange"){const P=A.find(ge=>ge.route_type==="agent"&&ge.is_active),se=A.find(ge=>ge.route_type==="exchange"&&ge.is_active),oe=A.find(ge=>ge.route_type==="direct"&&ge.is_active);P&&(v[C].routes[B].agent_commission_id=P.id),se&&(v[C].routes[B].exchange_commission_id=se.id),oe&&(v[C].routes[B].exchange_bank_commission_id=oe.id)}else R==="partner"?v[C].routes[B].partner_commission_id=O.id:R==="partner_50_50"&&(v[C].routes[B].partner_50_50_commission_id=O.id)}const ie=v[C].routes[B];if(ie.route_type==="partner"){const O=v[C].routes[B];if(V==="amount_from_account"&&R&&O.exchange_rate){let P=R*O.exchange_rate;v[C].routes[B].amount_partner_sends=P;const se=A?.find(oe=>oe.id===O.partner_commission_id);if(se&&se.commission_percent){let oe=P*(1-se.commission_percent/100);oe>P&&(P=oe,v[C].routes[B].amount_partner_sends=P),v[C].routes[B].amount_to_partner_usdt=oe}}else if(V==="exchange_rate"&&R&&O.amount_from_account){let P=O.amount_from_account*R;v[C].routes[B].amount_partner_sends=P;const se=A?.find(oe=>oe.id===O.partner_commission_id);if(se&&se.commission_percent){let oe=P*(1-se.commission_percent/100);oe>P&&(P=oe,v[C].routes[B].amount_partner_sends=P),v[C].routes[B].amount_to_partner_usdt=oe}}else if(V==="partner_commission_id"&&R&&O.amount_partner_sends){const P=A?.find(se=>se.id===R);if(P&&P.commission_percent){let se=O.amount_partner_sends*(1-P.commission_percent/100);se>O.amount_partner_sends&&(v[C].routes[B].amount_partner_sends=se),v[C].routes[B].amount_to_partner_usdt=se}}}if(ie.route_type==="partner_50_50"){const O=v[C].routes[B];if(V==="amount_from_account"&&R&&O.exchange_rate){let P=R*O.exchange_rate;v[C].routes[B].amount_partner_50_50_sends=P;const se=A?.find(oe=>oe.id===O.partner_50_50_commission_id);if(se&&se.commission_percent){let oe=P*(1-se.commission_percent/100);oe>P&&(P=oe,v[C].routes[B].amount_partner_50_50_sends=P),v[C].routes[B].amount_to_partner_50_50_usdt=oe}}else if(V==="exchange_rate"&&R&&O.amount_from_account){let P=O.amount_from_account*R;v[C].routes[B].amount_partner_50_50_sends=P;const se=A?.find(oe=>oe.id===O.partner_50_50_commission_id);if(se&&se.commission_percent){let oe=P*(1-se.commission_percent/100);oe>P&&(P=oe,v[C].routes[B].amount_partner_50_50_sends=P),v[C].routes[B].amount_to_partner_50_50_usdt=oe}}else if(V==="partner_50_50_commission_id"&&R&&O.amount_partner_50_50_sends){const P=A?.find(se=>se.id===R);if(P&&P.commission_percent){let se=O.amount_partner_50_50_sends*(1-P.commission_percent/100);se>O.amount_partner_50_50_sends&&(v[C].routes[B].amount_partner_50_50_sends=se,O.amount_partner_50_50_sends=se),v[C].routes[B].amount_to_partner_50_50_usdt=se}}}if(ie.route_type==="exchange"&&ie.amount_from_account&&ie.crypto_exchange_rate){let O=ie.amount_from_account;const P=A?.find(ge=>ge.id===ie.agent_commission_id);P&&(P.is_fixed_currency&&P.commission_fixed?O-=P.commission_fixed:P.commission_percent&&(O=O-O*P.commission_percent/100));const se=A?.find(ge=>ge.id===ie.exchange_commission_id);se&&(se.is_fixed_currency&&se.commission_fixed?O-=se.commission_fixed:se.commission_percent&&(O=O-O*se.commission_percent/100));const oe=A?.find(ge=>ge.id===ie.exchange_bank_commission_id);oe&&(oe.is_fixed_currency&&oe.commission_fixed?O-=oe.commission_fixed:oe.commission_percent&&(O=O-O*oe.commission_percent/100)),v[C].routes[B].exchange_amount=O*ie.crypto_exchange_rate}const Ne=v[C].routes[B];w(Ne),M(v[C]),c(v)},k=C=>{c(i.filter((B,V)=>V!==C))},H=(C,B,V)=>{const R=[...i];R[C]={...R[C],[B]:V},M(R[C]),c(R)},ue=C=>!C||!_?[]:_.filter(B=>B.company_id===C&&B.is_active),X=C=>!C||!p?[]:p.filter(B=>B.company_id===C),Z=i.reduce((C,B)=>C+(B.final_income||0),0);return N.useEffect(()=>{if(console.log("[RouteBuilder] useEffect triggered, onSelectedAccountsChange:",!!m),!m){console.warn("[RouteBuilder] onSelectedAccountsChange is not provided");return}const C=[];console.log("[RouteBuilder] Processing transactions:",i.length),i.forEach(R=>{R.routes.forEach(v=>{if(v.route_type==="direct"&&v.internal_company_account_id&&v.amount_from_account){const ie=_?.find(Ne=>Ne.id===v.internal_company_account_id);ie&&C.push({account_id:v.internal_company_account_id,amount:-v.amount_from_account,currency:ie.currency})}if(v.route_type==="exchange"&&v.crypto_account_id&&v.exchange_amount){const ie=T?.find(Ne=>Ne.id===v.crypto_account_id);ie&&C.push({account_id:v.crypto_account_id,amount:-v.exchange_amount,currency:ie.currency})}if(v.route_type==="partner"&&v.amount_to_partner_usdt){const ie=T?.find(Ne=>Ne.currency&&Ne.currency.toUpperCase()==="USDT");ie&&C.push({account_id:ie.id,amount:-v.amount_to_partner_usdt,currency:"USDT"})}if(v.route_type==="partner_50_50"&&v.amount_to_partner_50_50_usdt){const ie=T?.find(Ne=>Ne.currency&&Ne.currency.toUpperCase()==="USDT");ie&&C.push({account_id:ie.id,amount:-v.amount_to_partner_50_50_usdt,currency:"USDT"})}})});const B={};C.forEach(R=>{const v=Number(R.account_id);isNaN(v)||(B[v]||(B[v]={account_id:v,amount:0,currency:R.currency}),B[v].amount+=Number(R.amount)||0)});const V=Object.values(B);console.log("[RouteBuilder] Final selected accounts to send:",V),console.log("[RouteBuilder] Crypto balances from API:",T?.map(R=>({id:R.id,idType:typeof R.id,name:R.account_name,currency:R.currency}))),m(V)},[JSON.stringify(i.map(C=>C.routes.map(B=>({route_type:B.route_type,internal_company_account_id:B.internal_company_account_id,amount_from_account:B.amount_from_account,crypto_account_id:B.crypto_account_id,exchange_amount:B.exchange_amount,partner_account_id:B.partner_account_id,amount_partner_sends:B.amount_partner_sends,amount_to_partner_usdt:B.amount_to_partner_usdt,partner_50_50_account_id:B.partner_50_50_account_id,amount_partner_50_50_sends:B.amount_partner_50_50_sends,amount_to_partner_50_50_usdt:B.amount_to_partner_50_50_usdt})))),JSON.stringify(_),JSON.stringify(T),JSON.stringify(p),m]),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex gap-2",children:i.map((C,B)=>a.jsxs("div",{className:"border border-gray-200 rounded-md p-2 bg-gray-50 flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("h3",{className:"text-xs font-semibold",children:["Transaction ",B+1]}),i.length>1&&a.jsx("button",{type:"button",onClick:()=>k(B),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Client Company *"}),a.jsxs("select",{value:C.client_company_id||"",onChange:V=>H(B,"client_company_id",parseInt(V.target.value)||0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select company"}),x?.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount for Client (auto)"}),a.jsx("input",{type:"number",step:"0.01",value:C.amount_for_client||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md bg-gray-100"})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("h4",{className:"text-xs font-medium",children:"Routes"}),a.jsx("button",{type:"button",onClick:()=>z(B),className:"px-2 py-0.5 bg-indigo-600 text-white text-xs rounded-md hover:bg-indigo-700",children:"+ Add Route"})]}),(!C.routes||C.routes.length===0)&&a.jsx("div",{className:"text-sm text-gray-500 p-3 bg-gray-100 rounded-md",children:'No routes added. Click "+ Add Route" to add a route for this transaction.'}),C.routes&&C.routes.map((V,R)=>a.jsxs("div",{className:"mb-2 p-2 border border-gray-300 rounded-md bg-white",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsxs("h5",{className:"font-medium text-xs",children:["Route ",R+1]}),C.routes.length>1&&a.jsx("button",{type:"button",onClick:()=>q(B,R),className:"text-red-600 hover:text-red-800 text-xs",children:"Remove"})]}),a.jsxs("div",{className:"mb-2",children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Route Type *"}),a.jsxs("select",{value:V.route_type,onChange:v=>j(B,R,"route_type",v.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select route type"}),a.jsx("option",{value:"direct",children:"Direct Transfer"}),a.jsx("option",{value:"exchange",children:"Exchange"}),a.jsx("option",{value:"partner",children:"Partner"}),a.jsx("option",{value:"partner_50_50",children:"Partner 50-50"})]})]}),a.jsx("div",{className:"mb-3",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-1",children:"Exchange Rate *"}),a.jsx("input",{type:"number",step:"0.000001",value:V.exchange_rate||"",onChange:v=>j(B,R,"exchange_rate",parseFloat(v.target.value)||0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0})]})}),V.route_type==="direct"&&a.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md space-y-1",children:[a.jsx("h4",{className:"text-xs font-medium text-blue-900",children:"Direct Transfer Settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Internal Company *"}),a.jsxs("select",{value:V.internal_company_id||"",onChange:v=>j(B,R,"internal_company_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select company"}),y?.map(v=>a.jsx("option",{value:v.id,children:v.name},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Company Account *"}),a.jsxs("select",{value:V.internal_company_account_id||"",onChange:v=>j(B,R,"internal_company_account_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select account"}),ue(V.internal_company_id).map(v=>a.jsxs("option",{value:v.id,children:[v.account_name," (",v.currency,") - ",v.balance.toLocaleString()]},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount from Account *"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_from_account||"",onChange:v=>j(B,R,"amount_from_account",parseFloat(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Amount client receives (in ",f||"target currency",")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Bank Commission"}),a.jsxs("select",{value:V.bank_commission_id||"",onChange:v=>j(B,R,"bank_commission_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:"Select commission"}),A?.filter(v=>v.route_type==="direct"&&v.is_active).map(v=>a.jsx("option",{value:v.id,children:v.is_fixed_currency?`${v.commission_fixed} ${v.currency}`:`${v.commission_percent}%`},v.id))]})]})]})]}),V.route_type==="exchange"&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded-md space-y-1",children:[a.jsx("h4",{className:"text-xs font-medium text-green-900",children:"Exchange Settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Crypto Account *"}),a.jsxs("select",{value:V.crypto_account_id||"",onChange:v=>j(B,R,"crypto_account_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select account"}),T?.map(v=>a.jsxs("option",{value:v.id,children:[v.account_name," (",v.currency,") - ",v.balance.toLocaleString()]},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Exchange From Currency *"}),a.jsx("input",{type:"text",value:V.exchange_from_currency||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md bg-gray-100",placeholder:"Select crypto account first"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Auto-filled from selected account"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Exchange Amount (auto-calculated)"}),a.jsx("input",{type:"number",step:"0.01",value:V.exchange_amount||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md bg-gray-100"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Calculated: (Amount from Account - commissions) * Crypto Exchange Rate"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Crypto Exchange Rate *"}),a.jsx("input",{type:"number",step:"0.000001",value:V.crypto_exchange_rate||"",onChange:v=>j(B,R,"crypto_exchange_rate",parseFloat(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount from Account *"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_from_account||"",onChange:v=>j(B,R,"amount_from_account",parseFloat(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Amount client receives (in ",f||"target currency",")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Agent Commission"}),a.jsxs("select",{value:V.agent_commission_id||"",onChange:v=>j(B,R,"agent_commission_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:"Select commission"}),A?.filter(v=>v.route_type==="agent"&&v.is_active).map(v=>a.jsx("option",{value:v.id,children:v.is_fixed_currency?`${v.commission_fixed} ${v.currency}`:`${v.commission_percent}%`},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Exchange Commission"}),a.jsxs("select",{value:V.exchange_commission_id||"",onChange:v=>j(B,R,"exchange_commission_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:"Select commission"}),A?.filter(v=>v.route_type==="exchange"&&v.is_active).map(v=>a.jsx("option",{value:v.id,children:v.is_fixed_currency?`${v.commission_fixed} ${v.currency}`:`${v.commission_percent}%`},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Bank Commission"}),a.jsxs("select",{value:V.exchange_bank_commission_id||"",onChange:v=>j(B,R,"exchange_bank_commission_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:"Select commission"}),A?.filter(v=>v.route_type==="direct"&&v.is_active).map(v=>a.jsx("option",{value:v.id,children:v.is_fixed_currency?`${v.commission_fixed} ${v.currency}`:`${v.commission_percent}%`},v.id))]})]})]})]}),V.route_type==="partner"&&a.jsxs("div",{className:"mt-2 p-2 bg-purple-50 rounded-md space-y-1",children:[a.jsx("h4",{className:"text-xs font-medium text-purple-900",children:"Partner Settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Partner Company *"}),a.jsxs("select",{value:V.partner_company_id||"",onChange:v=>j(B,R,"partner_company_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select partner company"}),g?.map(v=>a.jsx("option",{value:v.id,children:v.name},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Partner Account *"}),a.jsxs("select",{value:V.partner_account_id||"",onChange:v=>j(B,R,"partner_account_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,disabled:!V.partner_company_id,children:[a.jsx("option",{value:"",children:"Select account"}),X(V.partner_company_id).map(v=>a.jsxs("option",{value:v.id,children:[v.account_name," (",v.currency,") - ",v.account_number]},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount from Account *"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_from_account||"",onChange:v=>j(B,R,"amount_from_account",parseFloat(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Amount client receives (in ",f||"target currency",")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount Partner Sends (auto)"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_partner_sends||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount to Partner (USDT) (auto)"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_to_partner_usdt||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Partner Commission"}),a.jsxs("select",{value:V.partner_commission_id||"",onChange:v=>j(B,R,"partner_commission_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:"Select commission"}),A?.filter(v=>v.route_type==="partner"&&v.is_active).map(v=>a.jsx("option",{value:v.id,children:v.is_fixed_currency?`${v.commission_fixed} ${v.currency}`:`${v.commission_percent}%`},v.id))]})]})]})]}),V.route_type==="partner_50_50"&&a.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 rounded-md space-y-1",children:[a.jsx("h4",{className:"text-xs font-medium text-yellow-900",children:"Partner 50-50 Settings"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Partner Company *"}),a.jsxs("select",{value:V.partner_50_50_company_id||"",onChange:v=>j(B,R,"partner_50_50_company_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select partner company"}),g?.map(v=>a.jsx("option",{value:v.id,children:v.name},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Partner Account *"}),a.jsxs("select",{value:V.partner_50_50_account_id||"",onChange:v=>j(B,R,"partner_50_50_account_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0,disabled:!V.partner_50_50_company_id,children:[a.jsx("option",{value:"",children:"Select account"}),X(V.partner_50_50_company_id).map(v=>a.jsxs("option",{value:v.id,children:[v.account_name," (",v.currency,") - ",v.account_number]},v.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount from Account *"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_from_account||"",onChange:v=>j(B,R,"amount_from_account",parseFloat(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",required:!0}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["Amount client receives (in ",f||"target currency",")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount Partner Sends (auto)"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_partner_50_50_sends||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Amount to Partner (USDT) (auto)"}),a.jsx("input",{type:"number",step:"0.01",value:V.amount_to_partner_50_50_usdt||"",readOnly:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md bg-gray-100"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium mb-0.5",children:"Partner 50-50 Commission"}),a.jsxs("select",{value:V.partner_50_50_commission_id||"",onChange:v=>j(B,R,"partner_50_50_commission_id",parseInt(v.target.value)||void 0),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:"Select commission"}),A?.filter(v=>v.route_type==="partner_50_50"&&v.is_active).map(v=>a.jsx("option",{value:v.id,children:v.is_fixed_currency?`${v.commission_fixed} ${v.currency}`:`${v.commission_percent}%`},v.id))]})]})]})]}),V.final_income!==void 0&&a.jsx("div",{className:"mt-1 p-1 bg-green-100 rounded",children:a.jsxs("span",{className:"text-xs font-medium text-green-800",children:["Route Income: ",V.final_income.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," ",d||"currency"]})})]},V.id||R)),C.final_income!==void 0&&a.jsx("div",{className:"mt-2 p-1 bg-blue-100 rounded",children:a.jsxs("span",{className:"text-xs font-medium text-blue-800",children:["Total Route Income: ",C.final_income.toLocaleString(void 0,{maximumFractionDigits:2})," ",d||"currency"]})})]})]},B))}),a.jsx("button",{type:"button",onClick:S,className:"w-full px-2 py-1 text-xs bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Transaction"}),Z>0&&a.jsxs("div",{className:"mt-3 p-2 bg-yellow-50 border-2 border-yellow-400 rounded-md",children:[a.jsx("h3",{className:"text-sm font-bold text-yellow-900 mb-1",children:"Total Amount Client Should Send"}),a.jsxs("p",{className:"text-lg font-semibold text-yellow-800",children:[Z.toLocaleString(void 0,{maximumFractionDigits:2})," ",d||"currency"]}),a.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["To receive ",o?.toLocaleString(void 0,{maximumFractionDigits:2})," ",f||"currency"]})]})]})}function zv(){const{id:s}=pp(),i=ca(),{user:c}=qn(),o=it(),[d,f]=N.useState(""),[m,x]=N.useState(""),[g,p]=N.useState(""),[y,_]=N.useState(""),[T,A]=N.useState(""),[w,M]=N.useState([]),[S,z]=N.useState([]),{data:q,isLoading:j}=fe({queryKey:["deal",s],queryFn:async()=>(await te.get(`/api/deals/${s}`)).data}),{data:k}=fe({queryKey:["reference-clients"],queryFn:async()=>(await te.get("/api/reference/clients")).data}),{data:H}=fe({queryKey:["reference-currencies"],queryFn:async()=>(await te.get("/api/reference/currencies")).data});N.useEffect(()=>{if(q){f(q.client_id),x(q.deal_amount||q.total_eur_request||""),p(q.client_sends_currency||""),_(q.client_receives_currency||""),A(q.client_rate_percent||"");const C={};q.transactions.forEach(V=>{const R=V.client_company_id||0;C[R]||(C[R]=[]),C[R].push(V)});const B=Object.entries(C).map(([V,R])=>({client_company_id:parseInt(V),amount_for_client:R.reduce((v,ie)=>v+parseFloat(ie.amount_from_account||"0"),0),routes:R.map(v=>({id:`route-${v.id}`,db_id:v.id,route_type:v.route_type||"",exchange_rate:parseFloat(v.exchange_rate||"0"),internal_company_id:v.internal_company_id||void 0,internal_company_account_id:v.internal_company_account_id||void 0,amount_from_account:parseFloat(v.amount_from_account||"0")||void 0,bank_commission_id:v.bank_commission_id||void 0,crypto_account_id:v.crypto_account_id||void 0,exchange_from_currency:v.exchange_from_currency||void 0,exchange_amount:parseFloat(v.exchange_amount||"0")||void 0,crypto_exchange_rate:parseFloat(v.crypto_exchange_rate||"0")||void 0,agent_commission_id:v.agent_commission_id||void 0,exchange_commission_id:v.exchange_commission_id||void 0,exchange_bank_commission_id:v.exchange_bank_commission_id||void 0,partner_company_id:v.partner_company_id||void 0,amount_to_partner_usdt:parseFloat(v.amount_to_partner_usdt||"0")||void 0,amount_partner_sends:parseFloat(v.amount_partner_sends||"0")||void 0,partner_commission_id:v.partner_commission_id||void 0,partner_50_50_company_id:v.partner_50_50_company_id||void 0,amount_to_partner_50_50_usdt:parseFloat(v.amount_to_partner_50_50_usdt||"0")||void 0,amount_partner_50_50_sends:parseFloat(v.amount_partner_50_50_sends||"0")||void 0,partner_50_50_commission_id:v.partner_50_50_commission_id||void 0}))}));M(B)}},[q]);const ue=je({mutationFn:async C=>(await te.put(`/api/deals/${s}`,C)).data,onSuccess:()=>{o.invalidateQueries({queryKey:["deal",s]}),o.invalidateQueries({queryKey:["deals"]}),i(`/deals/${s}`)},onError:C=>{alert(C.response?.data?.detail||"   ")}}),X=async C=>{if(C.preventDefault(),!d||!m||w.length===0){alert("   ");return}const B={client_id:d,deal_amount:m,client_sends_currency:g,client_receives_currency:y,client_rate_percent:T,deleted_transaction_ids:S,transactions:w.map(V=>({client_company_id:V.client_company_id,amount_for_client:V.amount_for_client,routes:V.routes.map(R=>({db_id:R.db_id,route_type:R.route_type,exchange_rate:R.exchange_rate,internal_company_id:R.internal_company_id,internal_company_account_id:R.internal_company_account_id,amount_from_account:R.amount_from_account,bank_commission_id:R.bank_commission_id,crypto_account_id:R.crypto_account_id,exchange_from_currency:R.exchange_from_currency,exchange_amount:R.exchange_amount,crypto_exchange_rate:R.crypto_exchange_rate,agent_commission_id:R.agent_commission_id,exchange_commission_id:R.exchange_commission_id,exchange_bank_commission_id:R.exchange_bank_commission_id,partner_company_id:R.partner_company_id,amount_to_partner_usdt:R.amount_to_partner_usdt,amount_partner_sends:R.amount_partner_sends,partner_commission_id:R.partner_commission_id,partner_50_50_company_id:R.partner_50_50_company_id,amount_to_partner_50_50_usdt:R.amount_to_partner_50_50_usdt,amount_partner_50_50_sends:R.amount_partner_50_50_sends,partner_50_50_commission_id:R.partner_50_50_commission_id}))}))};ue.mutate(B)},Z=C=>{const B=C.flatMap(v=>v.routes.filter(ie=>ie.db_id).map(ie=>ie.db_id)),R=w.flatMap(v=>v.routes.filter(ie=>ie.db_id).map(ie=>ie.db_id)).filter(v=>!B.includes(v));R.length>0&&z(v=>[...new Set([...v,...R])]),M(C)};return j?a.jsx("div",{className:"text-center py-8",children:"..."}):q?c?.role!=="accountant"?a.jsx("div",{className:"text-center py-8 text-red-600",children:" "}):a.jsx("div",{className:"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] px-3 py-2",children:a.jsxs("div",{className:"max-w-full",children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsxs("div",{children:[a.jsx("button",{onClick:()=>i(`/deals/${s}`),className:"text-indigo-600 hover:text-indigo-800 mb-2 text-sm",children:"   "}),a.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:["  #",q.id]})]})}),a.jsxs("form",{onSubmit:X,className:"w-full bg-white shadow rounded-lg p-3 space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[a.jsxs("div",{className:"col-span-3 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:" *"}),a.jsxs("select",{value:d,onChange:C=>f(Number(C.target.value)||""),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:" "}),k?.map(C=>a.jsx("option",{value:C.id,children:C.name},C.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"   *"}),a.jsx("input",{type:"number",step:"0.01",value:m,onChange:C=>x(C.target.value),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"  *"}),a.jsxs("select",{value:g,onChange:C=>p(C.target.value),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md",children:[a.jsx("option",{value:"",children:" "}),H?.map(C=>a.jsxs("option",{value:C.code,children:[C.code," - ",C.name]},C.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"  (%)"}),a.jsx("input",{type:"number",step:"0.01",value:T,onChange:C=>A(C.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md"})]}),S.length>0&&a.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded text-xs",children:a.jsxs("span",{className:"text-red-700",children:["  : ",S.length]})})]}),a.jsx("div",{className:"col-span-9",children:w.length===0?a.jsx("div",{className:"text-center py-2",children:a.jsx("button",{type:"button",onClick:()=>M([{client_company_id:0,amount_for_client:0,routes:[]}]),className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+  "})}):a.jsx(lx,{clientId:d,transactions:w,onUpdate:Z,dealAmount:parseFloat(m)||void 0,clientSendsCurrency:g,clientReceivesCurrency:y})})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>i(`/deals/${s}`),className:"px-4 py-2 text-sm border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:""}),a.jsx("button",{type:"submit",disabled:ue.isPending,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:ue.isPending?"...":" "})]})]})]})}):a.jsx("div",{className:"text-center py-8",children:"  "})}function Lv({index:s,transaction:i,clientId:c,companies:o,transactions:d,onUpdate:f}){const{data:m}=fe({queryKey:["reference-company-accounts",i.company_id],queryFn:async()=>i.company_id?(await te.get(`/api/reference/company-accounts?company_id=${i.company_id}`)).data:[],enabled:!!i.company_id}),x=d.map((p,y)=>y!==s&&p.account_id?p.account_id:null).filter(p=>p!==null),g=m?.find(p=>p.id===i.account_id);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" *"}),a.jsxs("select",{value:i.company_id||"",onChange:p=>f(s,"company_id",p.target.value?parseInt(p.target.value):""),required:!0,disabled:!c,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm disabled:bg-gray-100",children:[a.jsx("option",{value:"",children:" "}),o.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]}),!c&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"  "})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" EUR *"}),a.jsx("input",{type:"number",step:"0.01",value:i.amount_eur||"",onChange:p=>f(s,"amount_eur",parseFloat(p.target.value)||0),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]})]}),i.company_id&&a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" *"}),a.jsxs("select",{value:i.account_id||"",onChange:p=>f(s,"account_id",p.target.value?parseInt(p.target.value):""),required:!0,className:`w-full px-3 py-2 border rounded-md text-sm ${i.account_id&&x.includes(i.account_id)?"border-red-500 bg-red-50":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:" "}),m?.map(p=>{const y=x.includes(p.id);return a.jsxs("option",{value:p.id,disabled:y,children:[p.account_name," - ",p.account_number,y?" ( )":""]},p.id)})]}),i.account_id&&x.includes(i.account_id)&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:"       "}),g&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["IBAN: ",g.account_number]})]}),i.company_id&&!m?.length&&a.jsx("p",{className:"text-xs text-yellow-600 mb-3",children:"      "}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"  ()"}),a.jsx("textarea",{value:i.recipient_details||"",onChange:p=>f(s,"recipient_details",p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",rows:2,placeholder:" ,  "})]})]})}function xu({showProjected:s=!1,selectedAccounts:i=[]}){const{data:c,isLoading:o}=fe({queryKey:["company-balances",s?"projected":"summary"],queryFn:async()=>{const p=s?"/api/company-balances/projected":"/api/company-balances/summary",y=await te.get(p);return s?y.data:{current:y.data,projected:y.data}}});if(o)return a.jsx("div",{className:"text-center py-2 text-xs",children:"Loading balances..."});if(!c)return null;const d=c.current;let f=c.projected;if(i&&i.length>0){const p=["BTC","ETH","USDT","USDC","BNB","SOL","ADA","DOT","MATIC","AVAX","LINK","UNI","ATOM","XRP","DOGE","LTC","BCH","XLM","ALGO","VET","TRX","EOS","AAVE","MKR","COMP","SNX","SUSHI","CRV","YFI","1INCH"],y={},_={};i.forEach(A=>{const w=Number(A.account_id),M=Number(A.amount);!isNaN(w)&&!isNaN(M)&&(p.includes(A.currency?.toUpperCase()||"")?(_[w]||(_[w]=0),_[w]+=M):(y[w]||(y[w]=0),y[w]+=M))});const T={...f};f={...f,companies:T.companies.map(A=>{const w=A.accounts.map(S=>{const z=y[S.id]||0,q=S.balance+z;return{...S,balance:q}}),M=w.reduce((S,z)=>S+z.balance,0);return{...A,accounts:w,total_balance:M}}),crypto_balances:T.crypto_balances.map(A=>{const w=Number(A.balance),M=Number(_[A.account_id]??0),S=w+M;return{...A,balance:Math.max(0,S)}})},f.total_company_balance=f.companies.reduce((A,w)=>A+(Number(w.total_balance)||0),0),f.total_crypto_balance=f.crypto_balances.reduce((A,w)=>A+(Number(w.balance)||0),0),f.total_company_balance=Math.round(f.total_company_balance*100)/100,f.total_crypto_balance=Math.round(f.total_crypto_balance*1e4)/1e4}const m={};d.companies.forEach(p=>{m[p.currency]||(m[p.currency]=[]),m[p.currency].push(p)});const x=p=>p.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),g=p=>{const y=Number(p);return isNaN(y)?"0":y.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:4})};return a.jsxs("div",{className:"bg-white shadow rounded-lg p-2 mb-2",children:[a.jsx("h2",{className:"text-xs font-semibold mb-1",children:"Company Balances"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium mb-1 text-gray-700",children:"Company Accounts"}),a.jsx("div",{className:"space-y-1",children:Object.entries(m).map(([p,y])=>a.jsx("div",{className:"space-y-1",children:y.map(_=>{const T=s?f.companies.find(w=>w.company_id===_.company_id&&w.currency===p):null,A=s&&T&&Math.abs(T.total_balance-_.total_balance)>.01;return a.jsxs("div",{className:`border rounded p-1.5 ${A?"border-orange-300 bg-orange-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-medium",children:_.company_name}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-xs text-gray-600",children:x(_.total_balance)}),s&&T&&a.jsxs("span",{className:`text-xs ${A?"text-orange-600 font-semibold":"text-blue-600"}`,children:[" ",x(T.total_balance)]})]})]}),_.accounts.length>0&&a.jsx("div",{className:"pl-1 mt-0.5",children:_.accounts.map(w=>{const M=s&&T?T.accounts.find(z=>z.id===w.id):null,S=M&&Math.abs(M.balance-w.balance)>.01;return a.jsxs("div",{className:`text-xs ${S?"text-orange-600 font-medium":"text-gray-500"}`,children:[w.account_name,": ",x(w.balance),S&&M&&a.jsxs("span",{className:"ml-1",children:[" ",x(M.balance)]})]},w.id)})})]},_.company_id)})},p))})]}),d.crypto_balances.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium mb-1 text-gray-700",children:"Crypto Balances"}),a.jsx("div",{className:"space-y-1",children:d.crypto_balances.map(p=>{const y=s?f.crypto_balances.find(T=>T.account_id===p.account_id):null,_=s&&y&&Math.abs(y.balance-p.balance)>.01;return a.jsxs("div",{className:`flex justify-between items-center p-1.5 rounded border ${_?"border-orange-300 bg-orange-50":"border-gray-200 bg-gray-50"}`,children:[a.jsx("span",{className:"text-xs font-medium",children:p.account_name}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs("span",{className:"text-xs text-gray-600",children:[g(p.balance)," ",p.currency]}),s&&y&&a.jsxs("span",{className:`text-xs ${_?"text-orange-600 font-semibold":"text-blue-600"}`,children:[" ",g(y.balance)," ",y.currency]})]})]},p.account_id)})})]})]})]})}function Bv(){const s=ca(),[i]=lb(),c=i.get("copy_from"),o=it(),{user:d}=qn(),[f,m]=N.useState(""),[x,g]=N.useState(""),[p,y]=N.useState(""),[_,T]=N.useState([{company_id:"",account_id:"",amount_eur:0,recipient_details:""}]),[A,w]=N.useState(""),[M,S]=N.useState(""),[z,q]=N.useState(""),[j,k]=N.useState([]),[H,ue]=N.useState([]),[X,Z]=N.useState(""),[C,B]=N.useState(!1),[V,R]=N.useState(""),{data:v}=fe({queryKey:["default-client-rate"],queryFn:async()=>(await te.get("/api/reference/default-client-rate")).data.default_client_rate});N.useEffect(()=>{v&&!p&&y(v)},[v]);const{data:ie}=fe({queryKey:["reference-clients"],queryFn:async()=>{try{return(await te.get("/api/reference/clients")).data}catch(L){return console.error("Error fetching clients:",L),[]}}}),{data:Ne}=fe({queryKey:["templates"],queryFn:async()=>(await te.get("/api/templates")).data}),{data:O}=fe({queryKey:["deal-copy-data",c],queryFn:async()=>c?(await te.get(`/api/deals/${c}/copy-data`)).data:null,enabled:!!c});N.useEffect(()=>{if(O&&(m(O.client_id||""),S(O.client_sends_currency||""),q(O.client_receives_currency||""),O.transactions&&O.transactions.length>0)){const L=O.transactions.map(re=>({client_company_id:re.client_company_id||0,amount_for_client:0,routes:re.routes.map(de=>({...de,id:`route-${Date.now()}-${Math.random()}`}))}));k(L)}},[O]);const P=L=>{const re=Ne?.find(de=>de.id===L);if(re&&(S(re.client_sends_currency||""),q(re.client_receives_currency||""),re.routes_config?.transactions)){const de=re.routes_config.transactions.map(Y=>({client_company_id:Y.client_company_id||0,amount_for_client:0,routes:Y.routes.map(W=>({...W,id:`route-${Date.now()}-${Math.random()}`}))}));k(de)}},se=je({mutationFn:async L=>(await te.post("/api/templates",{name:L.name,client_sends_currency:M,client_receives_currency:z,routes_config:L.routes_config})).data,onSuccess:()=>{o.invalidateQueries({queryKey:["templates"]}),B(!1),R(""),alert(" !")}}),oe=()=>{if(!V.trim()){alert("  ");return}const L={transactions:j.map(re=>({client_company_id:re.client_company_id,routes:re.routes.map(de=>({route_type:de.route_type,exchange_rate:de.exchange_rate,internal_company_id:de.internal_company_id,internal_company_account_id:de.internal_company_account_id,bank_commission_id:de.bank_commission_id,crypto_account_id:de.crypto_account_id,exchange_from_currency:de.exchange_from_currency,agent_commission_id:de.agent_commission_id,exchange_commission_id:de.exchange_commission_id,exchange_bank_commission_id:de.exchange_bank_commission_id,partner_company_id:de.partner_company_id,partner_commission_id:de.partner_commission_id,partner_50_50_company_id:de.partner_50_50_company_id,partner_50_50_commission_id:de.partner_50_50_commission_id}))}))};se.mutate({name:V,routes_config:L})},{data:ge}=fe({queryKey:["reference-companies",f],queryFn:async()=>f?(await te.get(`/api/reference/companies?client_id=${f}`)).data:[],enabled:!!f}),{data:D}=fe({queryKey:["client-debts",f],queryFn:async()=>f?(await te.get("/api/accountant/client-debts")).data.filter(re=>re.client_id===f):[],enabled:!!f}),{data:I}=fe({queryKey:["reference-currencies"],queryFn:async()=>(await te.get("/api/reference/currencies")).data}),le=je({mutationFn:async L=>(await te.post("/api/deals",L)).data,onSuccess:L=>{o.invalidateQueries({queryKey:["deals"]}),s(`/deals/${L.id}`)}}),ce=()=>{T([..._,{company_id:"",account_id:"",amount_eur:0,recipient_details:""}])},xe=L=>{T(_.filter((re,de)=>de!==L))},_e=(L,re,de)=>{const Y=[..._];Y[L]={...Y[L],[re]:de},re==="company_id"&&(Y[L].account_id=""),T(Y)},Te=()=>_.reduce((L,re)=>L+(re.amount_eur||0),0),Je=async L=>{if(L.preventDefault(),!f){alert(",  ");return}if(d?.role==="accountant"){if(!A||!M||!z){alert(",    ");return}if(j.length===0){alert(",     ");return}if(j.filter(de=>!de.client_company_id||!de.amount_for_client||!de.routes||de.routes.length===0||de.routes.some(Y=>!Y.route_type||!Y.exchange_rate)).length>0){alert(",       ");return}for(const de of j)for(const Y of de.routes)if(Y.route_type==="direct"){if(!Y.internal_company_id||!Y.internal_company_account_id||!Y.amount_from_account){alert(",      ");return}}else if(Y.route_type==="exchange"){if(!Y.crypto_account_id||!Y.exchange_from_currency||!Y.crypto_exchange_rate||!Y.amount_from_account){alert(",     ");return}}else if(Y.route_type==="partner"){if(!Y.partner_company_id||!Y.amount_to_partner_usdt||!Y.amount_partner_sends){alert(",     ");return}}else if(Y.route_type==="partner_50_50"&&(!Y.partner_50_50_company_id||!Y.amount_to_partner_50_50_usdt||!Y.amount_partner_50_50_sends)){alert(",      50-50");return}try{const de=await te.post("/api/accountant/deals",{client_id:f,total_eur_request:A,deal_amount:A,client_sends_currency:M,client_receives_currency:z,client_rate_percent:p,copy_from_deal_id:c?parseInt(c):null,transactions:j.map(Y=>({client_company_id:Y.client_company_id,amount_for_client:Y.amount_for_client,routes:Y.routes.map(W=>({route_type:W.route_type,exchange_rate:W.exchange_rate,internal_company_id:W.internal_company_id,internal_company_account_id:W.internal_company_account_id,amount_from_account:W.amount_from_account,bank_commission_id:W.bank_commission_id,crypto_account_id:W.crypto_account_id,exchange_from_currency:W.exchange_from_currency,exchange_amount:W.exchange_amount,crypto_exchange_rate:W.crypto_exchange_rate,agent_commission_id:W.agent_commission_id,exchange_commission_id:W.exchange_commission_id,exchange_bank_commission_id:W.exchange_bank_commission_id,partner_company_id:W.partner_company_id,partner_account_id:W.partner_account_id,amount_to_partner_usdt:W.amount_to_partner_usdt,amount_partner_sends:W.amount_partner_sends,partner_commission_id:W.partner_commission_id,partner_50_50_company_id:W.partner_50_50_company_id,partner_50_50_account_id:W.partner_50_50_account_id,amount_to_partner_50_50_usdt:W.amount_to_partner_50_50_usdt,amount_partner_50_50_sends:W.amount_partner_50_50_sends,partner_50_50_commission_id:W.partner_50_50_commission_id,final_income:W.final_income})),final_income:Y.final_income}))});o.invalidateQueries({queryKey:["deals"]}),s(`/deals/${de.data.id}`)}catch(de){console.error("Error creating deal:",de),alert(de.response?.data?.detail||"   ")}}else{const re=Te();if(Math.abs(re-parseFloat(x||"0"))>.01){alert(`  (${re})      (${x})`);return}const de=_.map(Se=>Se.account_id).filter(Se=>Se!==""),Y=new Set(de);if(de.length!==Y.size){alert(":        ");return}if(_.filter(Se=>!Se.company_id||!Se.account_id).length>0){alert(",       ");return}try{const Se=await Promise.all(_.map(async Ve=>{const me=(await te.get(`/api/reference/company-accounts/${Ve.account_id}`)).data;return{target_company:(await te.get(`/api/reference/companies/${Ve.company_id}`)).data.name,amount_eur:Ve.amount_eur,recipient_details:me.account_number||Ve.recipient_details||null}}));le.mutate({client_id:f,total_eur_request:x,client_rate_percent:p,transactions:Se})}catch(Se){console.error("Error preparing transaction data:",Se),alert("    ")}}};return a.jsxs("div",{className:"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] px-3 py-2",children:[a.jsxs("div",{className:"max-w-full",children:[a.jsx("div",{className:"flex justify-between items-center mb-2",children:a.jsx("h1",{className:"text-lg font-bold text-gray-900",children:c?`  #${c}`:"  "})}),d?.role==="accountant"&&a.jsx(xu,{showProjected:!0,selectedAccounts:H}),d?.role==="accountant"&&Ne&&Ne.length>0&&!c&&a.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3 mb-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-medium text-indigo-800 whitespace-nowrap",children:" :"}),a.jsxs("select",{value:X,onChange:L=>{const re=Number(L.target.value);Z(re||""),re&&P(re)},className:"flex-1 px-3 py-2 text-sm border border-indigo-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:"      "}),Ne.map(L=>a.jsxs("option",{value:L.id,children:[L.name," ",L.description?`(${L.description})`:""]},L.id))]})]})}),a.jsxs("form",{onSubmit:Je,className:"w-full bg-white shadow rounded-lg p-3 space-y-2",children:[d?.role==="accountant"&&D&&D.length>0&&a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2 mb-2",children:[a.jsx("p",{className:"text-xs font-medium text-yellow-800 mb-1",children:"    :"}),a.jsx("ul",{className:"list-disc list-inside text-xs text-yellow-700 space-y-0.5",children:D.map(L=>a.jsxs("li",{children:[" #",L.id,": ",parseFloat(L.client_debt_amount||"0").toLocaleString()," EUR"," ",a.jsxs("span",{className:"text-xs",children:["(",Math.ceil((new Date().getTime()-new Date(L.created_at).getTime())/(1e3*60*60*24))," )"]})]},L.id))}),a.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:"            ."})]}),d?.role==="accountant"?a.jsxs("div",{className:"grid grid-cols-12 gap-4",children:[a.jsxs("div",{className:"col-span-3 space-y-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:" *"}),a.jsxs("select",{value:f,onChange:L=>m(Number(L.target.value)||""),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:" "}),ie?.map(L=>a.jsx("option",{value:L.id,children:L.name},L.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:",     *"}),a.jsx("input",{type:"number",step:"0.01",value:A,onChange:L=>w(L.target.value),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["   ",z||" "]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"   *"}),a.jsxs("select",{value:M,onChange:L=>S(L.target.value),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:" "}),I?.map(L=>a.jsxs("option",{value:L.code,children:[L.code," - ",L.name]},L.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"   *"}),a.jsxs("select",{value:z,onChange:L=>q(L.target.value),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:" "}),I?.map(L=>a.jsxs("option",{value:L.code,children:[L.code," - ",L.name]},L.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-0.5",children:"  (%)"}),a.jsx("input",{type:"number",step:"0.01",value:p,onChange:L=>y(L.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:` : ${v||"2.0"}%`}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["   : ",v||"2.0","%"]})]})]}),a.jsx("div",{className:"col-span-9",children:j.length===0?a.jsx("div",{className:"text-center py-2",children:a.jsx("button",{type:"button",onClick:()=>k([{client_company_id:0,amount_for_client:0,routes:[]}]),className:"px-3 py-1 text-xs bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+   "})}):a.jsx(lx,{clientId:f,transactions:j,onUpdate:k,dealAmount:parseFloat(A)||void 0,clientSendsCurrency:M,clientReceivesCurrency:z,onSelectedAccountsChange:ue})})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:" *"}),a.jsxs("select",{value:f,onChange:L=>m(Number(L.target.value)||""),required:!0,className:"w-full px-2 py-1 text-xs border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[a.jsx("option",{value:"",children:" "}),ie?.map(L=>a.jsx("option",{value:L.id,children:L.name},L.id))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (EUR) *"}),a.jsx("input",{type:"number",step:"0.01",value:x,onChange:L=>g(L.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"  (%) *"}),a.jsx("input",{type:"number",step:"0.01",value:p,onChange:L=>y(L.target.value),required:!0,placeholder:` : ${v||"2.0"}%`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx("button",{type:"button",onClick:ce,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+  "})}),a.jsx("div",{className:"space-y-4",children:_.map((L,re)=>a.jsxs("div",{className:"border border-gray-200 rounded-md p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[" ",re+1]}),_.length>1&&a.jsx("button",{type:"button",onClick:()=>xe(re),className:"text-red-600 hover:text-red-800 text-sm",children:""})]}),a.jsx(Lv,{index:re,transaction:L,clientId:f,companies:ge||[],transactions:_,onUpdate:_e})]},re))}),a.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-md",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:[a.jsx("strong",{children:" :"})," ",Te().toLocaleString()," EUR"]}),a.jsxs("p",{className:"text-sm text-gray-700",children:[a.jsx("strong",{children:" :"})," ",parseFloat(x||"0").toLocaleString()," EUR"]}),Math.abs(Te()-parseFloat(x||"0"))>.01&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:"   !"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-3 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>s(-1),className:"px-3 py-2 text-sm border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:""}),d?.role==="accountant"&&j.length>0&&a.jsx("button",{type:"button",onClick:()=>B(!0),className:"px-3 py-2 text-sm bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"   "}),a.jsx("button",{type:"submit",disabled:le.isPending,className:"px-4 py-2 text-sm bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:le.isPending?"...":"  "})]})]})]}),C&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h2",{className:"text-lg font-bold mb-4",children:"  "}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"  *"}),a.jsx("input",{type:"text",value:V,onChange:L=>R(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:":   EUR->USDT"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{B(!1),R("")},className:"px-4 py-2 border border-gray-300 rounded-md",children:""}),a.jsx("button",{type:"button",onClick:oe,disabled:!V.trim()||se.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:se.isPending?"...":""})]})]})]})})]})}const Ii={new:{label:"",color:"bg-blue-100 text-blue-800"},senior_manager_review:{label:" ",color:"bg-yellow-100 text-yellow-800"},senior_manager_approved:{label:"",color:"bg-green-100 text-green-800"},senior_manager_rejected:{label:"",color:"bg-red-100 text-red-800"},client_agreed_to_pay:{label:" ",color:"bg-indigo-100 text-indigo-800"},awaiting_client_payment:{label:" ",color:"bg-orange-100 text-orange-800"},client_partially_paid:{label:" ",color:"bg-amber-100 text-amber-800"},execution:{label:" ",color:"bg-purple-100 text-purple-800"},completed:{label:"",color:"bg-emerald-100 text-emerald-800"}},Fv={direct:" ",exchange:"",partner:"",partner_50_50:" 50-50"};function Hv(){const s=it(),i=ca(),[c,o]=N.useState(null),[d,f]=N.useState("calculation"),[m,x]=N.useState("all"),[g,p]=N.useState("date"),[y,_]=N.useState("desc"),[T,A]=N.useState("all"),[w,M]=N.useState(""),[S,z]=N.useState(""),[q,j]=N.useState(!1),[k,H]=N.useState(""),{data:ue}=fe({queryKey:["reference-clients"],queryFn:async()=>(await te.get("/api/reference/clients")).data}),{data:X}=fe({queryKey:["deals","accountant","all-for-filtering",T,w,S],queryFn:async()=>{const Y={};return T!=="all"&&(Y.client_id=parseInt(T)),w&&(Y.company_name=w),S&&(Y.account_number=S),(await te.get("/api/deals",{params:Y})).data}}),Z=X?.filter(Y=>d==="calculation"?Y.status==="senior_manager_approved"||Y.status==="client_agreed_to_pay"||Y.status==="awaiting_client_payment":Y.status==="execution"||Y.status==="client_partially_paid"),C=!X,{data:B}=fe({queryKey:["account-balances"],queryFn:async()=>(await te.get("/api/account-balances")).data}),{data:V}=fe({queryKey:["client-debts"],queryFn:async()=>(await te.get("/api/accountant/client-debts")).data}),R=X,{data:v}=fe({queryKey:["deal",c],queryFn:async()=>(await te.get(`/api/deals/${c}?include_history=false`)).data,enabled:!!c}),{data:ie,refetch:Ne}=fe({queryKey:["deal-income",c],queryFn:async()=>(await te.get(`/api/deals/${c}/income`)).data,enabled:!!c}),{data:O}=fe({queryKey:["reference-internal-companies"],queryFn:async()=>(await te.get("/api/reference/internal-companies")).data}),{data:P}=fe({queryKey:["reference-internal-company-accounts"],queryFn:async()=>(await te.get("/api/reference/internal-company-accounts")).data}),{data:se}=fe({queryKey:["reference-all-companies"],queryFn:async()=>{const Y=await te.get("/api/reference/clients"),W=[];for(const Se of Y.data)try{const Ve=await te.get(`/api/reference/companies?client_id=${Se.id}`);W.push(...Ve.data)}catch{}return W}}),{data:oe}=fe({queryKey:["company-accounts-all"],queryFn:async()=>(await te.get("/api/reference/company-accounts")).data}),{data:ge}=fe({queryKey:["reference-route-commissions"],queryFn:async()=>(await te.get("/api/reference/route-commissions")).data}),{data:D}=fe({queryKey:["crypto-balances"],queryFn:async()=>(await te.get("/api/account-balances")).data}),I=Y=>Y?O?.find(W=>W.id===Y)?.name||`ID: ${Y}`:null,le=Y=>{if(!Y)return null;const W=P?.find(Se=>Se.id===Y);return W?{name:W.account_name,number:W.account_number,currency:W.currency}:null},ce=Y=>Y?se?.find(W=>W.id===Y)?.name||`ID: ${Y}`:null,xe=Y=>{if(!Y)return null;const W=oe?.filter(Se=>Se.company_id===Y)||[];return W.length>0?W[0]:null},_e=Y=>{if(!Y)return null;const W=ge?.find(Se=>Se.id===Y);return W?`${W.commission_percent}%`:`ID: ${Y}`},Te=Y=>Y?D?.find(Se=>Se.id===Y)?.account_name||`ID: ${Y}`:null,Je=je({mutationFn:async({transactionId:Y,accountBalanceId:W})=>(await te.post(`/api/transactions/${Y}/execute?account_balance_id=${W}`)).data,onSuccess:()=>{s.invalidateQueries({queryKey:["deal",c]}),s.invalidateQueries({queryKey:["deals","accountant"]}),s.invalidateQueries({queryKey:["account-balances"]})}}),L=je({mutationFn:async Y=>{await te.post(`/api/transactions/${Y}/mark-paid`)},onSuccess:()=>{s.invalidateQueries({queryKey:["deal",c]}),s.invalidateQueries({queryKey:["deals"]})}}),re=je({mutationFn:async({dealId:Y,newRate:W})=>{await te.patch(`/api/deals/${Y}/client-rate`,{client_rate_percent:W})},onSuccess:()=>{s.invalidateQueries({queryKey:["deal",c]}),s.invalidateQueries({queryKey:["deal-income",c]}),j(!1),Ne()}});if(C)return a.jsx("div",{className:"text-center py-8",children:"Loading..."});const de=()=>{k&&c&&re.mutate({dealId:c,newRate:k})};return a.jsxs("div",{className:"px-4 py-6",children:[a.jsx(xu,{showProjected:!0}),a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(an,{to:"/deals/new",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"+  "}),a.jsxs(an,{to:"/debts",className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:[" (",V?.length||0,")"]}),a.jsx("button",{onClick:()=>{f("calculation"),o(null)},className:`px-4 py-2 rounded-md ${d==="calculation"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" "}),a.jsx("button",{onClick:()=>{f("execution"),o(null)},className:`px-4 py-2 rounded-md ${d==="execution"?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:" "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:d==="calculation"?" ":" "}),a.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[Z?.map(Y=>a.jsxs("button",{onClick:()=>o(Y.id),className:`w-full text-left p-3 rounded-md border ${c===Y.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:bg-gray-50"}`,children:[a.jsxs("p",{className:"font-medium",children:[" #",Y.id]}),a.jsx("p",{className:"text-sm text-gray-600",children:Y.client_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[parseFloat(Y.total_eur_request).toLocaleString()," EUR"]})]},Y.id)),(!Z||Z.length===0)&&a.jsx("p",{className:"text-sm text-gray-500",children:d==="calculation"?"  ":"   "})]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:" "}),a.jsxs("div",{className:"flex flex-col space-y-3 mb-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[a.jsxs("select",{value:m,onChange:Y=>x(Y.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"all",children:" "}),a.jsx("option",{value:"new",children:""}),a.jsx("option",{value:"senior_manager_review",children:" "}),a.jsx("option",{value:"senior_manager_approved",children:""}),a.jsx("option",{value:"senior_manager_rejected",children:""}),a.jsx("option",{value:"client_agreed_to_pay",children:" "}),a.jsx("option",{value:"awaiting_client_payment",children:" "}),a.jsx("option",{value:"client_partially_paid",children:" "}),a.jsx("option",{value:"execution",children:" "}),a.jsx("option",{value:"completed",children:""})]}),a.jsxs("select",{value:T,onChange:Y=>A(Y.target.value),className:"px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"all",children:" "}),ue?.map(Y=>a.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),a.jsx("input",{type:"text",value:w,onChange:Y=>M(Y.target.value),placeholder:"  ...",className:"px-2 py-1 border border-gray-300 rounded-md text-sm"}),a.jsx("input",{type:"text",value:S,onChange:Y=>z(Y.target.value),placeholder:"  IBAN...",className:"px-2 py-1 border border-gray-300 rounded-md text-sm"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("select",{value:g,onChange:Y=>p(Y.target.value),className:"w-1/4 px-2 py-1 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"date",children:" "}),a.jsx("option",{value:"amount",children:" "})]}),a.jsx("button",{type:"button",onClick:()=>_(Y=>Y==="desc"?"asc":"desc"),className:"w-1/4 px-2 py-1 border border-gray-300 rounded-md text-sm",children:y==="desc"?"":""})]})]}),a.jsxs("div",{className:"mt-4 max-h-72 overflow-y-auto space-y-2",children:[R&&R.filter(Y=>m==="all"?!0:Y.status===m).sort((Y,W)=>{if(g==="date"){const rt=new Date(Y.created_at).getTime(),me=new Date(W.created_at).getTime();return y==="desc"?me-rt:rt-me}const Se=parseFloat(Y.total_eur_request),Ve=parseFloat(W.total_eur_request);return y==="desc"?Ve-Se:Se-Ve}).map(Y=>a.jsx("button",{onClick:()=>{o(Y.id),f(Y.status==="execution"?"execution":"calculation")},className:`w-full text-left p-3 rounded-md border ${c===Y.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:bg-gray-50"}`,children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[" #",Y.id]}),a.jsx("p",{className:"text-sm text-gray-600",children:Y.client_name}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(Y.created_at).toLocaleString()})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:[parseFloat(Y.total_eur_request).toLocaleString()," EUR"]}),a.jsx("span",{className:`inline-flex mt-1 px-2 py-0.5 rounded-full text-xs ${Ii[Y.status]?.color||"bg-gray-100 text-gray-700"}`,children:Ii[Y.status]?.label||Y.status})]})]})},`all-${Y.id}`)),(!R||R.length===0)&&a.jsx("p",{className:"text-sm text-gray-500",children:"  "})]})]})]}),a.jsx("div",{className:"lg:col-span-2",children:c&&v?a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsxs("div",{className:"mb-6 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("h2",{className:"text-xl font-bold",children:[" #",v.id]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${Ii[v.status]?.color||"bg-gray-100"}`,children:Ii[v.status]?.label||v.status})]}),a.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[": ",a.jsx("span",{className:"font-medium",children:v.client_name})," | ",": ",new Date(v.created_at).toLocaleString("ru-RU")]}),a.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[": ",a.jsx("span",{className:"font-medium",children:v.created_by_name||v.created_by_email||`ID ${v.created_by_id}`}),v.manager_name&&a.jsxs(a.Fragment,{children:[" | : ",a.jsx("span",{className:"font-medium",children:v.manager_name||v.manager_email})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>i(`/deals/${v.id}`),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:" "}),a.jsx("button",{onClick:()=>i(`/deals/${v.id}/edit`),className:"px-3 py-1 text-sm bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:""})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),a.jsxs("span",{className:"font-semibold",children:[v.deal_amount?parseFloat(v.deal_amount).toLocaleString("ru-RU",{maximumFractionDigits:2}):parseFloat(v.total_eur_request).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",v.client_receives_currency||"EUR"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),q?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",step:"0.01",value:k,onChange:Y=>H(Y.target.value),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"%"}),a.jsx("button",{onClick:de,disabled:re.isPending,className:"px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",children:""}),a.jsx("button",{onClick:()=>j(!1),className:"px-2 py-1 text-xs bg-gray-400 text-white rounded hover:bg-gray-500",children:""})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"font-medium",children:[v.client_rate_percent||"0","%"]}),a.jsx("button",{onClick:()=>{H(v.client_rate_percent||"0"),j(!0)},className:"text-indigo-600 hover:text-indigo-800 text-xs",children:""})]})]}),ie&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:" :"}),a.jsxs("span",{className:"font-semibold",children:[Number(ie.client_should_send).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",ie.currency]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"  :"}),a.jsxs("span",{className:"font-semibold text-orange-600",children:[Number(ie.deal_costs).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",ie.currency]})]})]})]}),ie&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("h4",{className:"text-xs font-medium text-gray-500 mb-2",children:"  "}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:":"}),a.jsxs("span",{className:`font-semibold ${ie.is_profitable?"text-green-600":"text-red-600"}`,children:[Number(ie.income_amount).toLocaleString("ru-RU",{maximumFractionDigits:2})," ",ie.currency," ","(",Number(ie.income_percent).toFixed(2),"%)"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600 text-sm",children:["  (",ie.manager_commission_percent,"%):"]}),a.jsxs("span",{className:"font-medium",children:[ie.manager_commission_amount.toLocaleString("ru-RU",{maximumFractionDigits:2})," ",ie.currency]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 text-sm font-medium",children:" :"}),a.jsxs("span",{className:`font-bold ${ie.net_profit>=0?"text-green-600":"text-red-600"}`,children:[ie.net_profit.toLocaleString("ru-RU",{maximumFractionDigits:2})," ",ie.currency]})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:" "}),v.transactions&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-600",children:":"}),a.jsxs("span",{className:"font-medium",children:[v.transactions.filter(Y=>Y.status==="paid").length," / ",v.transactions.length," "]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${v.transactions.length>0?v.transactions.filter(Y=>Y.status==="paid").length/v.transactions.length*100:0}%`}})})]}),v.client_debt_amount&&parseFloat(v.client_debt_amount)>0&&a.jsx("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded text-sm",children:a.jsxs("p",{className:"font-medium text-yellow-800",children:[" : ",parseFloat(v.client_debt_amount).toLocaleString("ru-RU")," EUR"]})})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"  "}),(()=>{const Y=v.transactions.reduce((W,Se)=>{const Ve=Se.client_company_id||0;return W[Ve]||(W[Ve]=[]),W[Ve].push(Se),W},{});return Object.entries(Y).map(([W,Se])=>{const Ve=ce(parseInt(W)),rt=xe(parseInt(W));return a.jsx("div",{className:"mb-4 last:mb-0",children:a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:[a.jsxs("span",{className:"text-sm font-medium",children:[": ",Ve||" "]}),rt&&a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:[" : ",rt.account_name," (",rt.account_number,")"]})]}),a.jsx("div",{className:"divide-y divide-gray-100",children:Se.map((me,Cs)=>{const oa=I(me.internal_company_id),ua=le(me.internal_company_account_id),Es=v.status==="execution"||v.status==="client_partially_paid";return a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-sm font-medium",children:[" ",Cs+1,": ",Fv[me.route_type||""]||me.route_type||" "]}),me.exchange_rate&&a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(: ",parseFloat(me.exchange_rate).toFixed(4),")"]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${me.status==="paid"?"bg-green-100 text-green-800":me.status==="in_progress"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:me.status==="paid"?"":me.status==="in_progress"?" ":""})})]}),me.route_type==="direct"&&oa&&a.jsx("div",{className:"mb-2 p-2 bg-indigo-50 rounded text-xs",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:oa}),ua&&a.jsxs("span",{className:"text-gray-500 ml-1",children:["(: ",ua.name,", ",ua.number,")"]})]}),a.jsx("span",{className:"text-indigo-500",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:Ve||""}),rt&&a.jsxs("span",{className:"text-gray-500 ml-1",children:["(: ",rt.account_name,", ",rt.account_number,")"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs mb-3",children:[me.amount_from_account&&a.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[a.jsx("span",{className:"text-gray-500 block",children:"  :"}),a.jsxs("span",{className:"font-semibold text-sm",children:[parseFloat(me.amount_from_account).toLocaleString("ru-RU")," ",v.client_receives_currency||"EUR"]})]}),me.calculated_route_income&&a.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[a.jsx("span",{className:"text-gray-500 block",children:"Route Income:"}),a.jsxs("span",{className:"font-semibold text-sm text-green-700",children:[parseFloat(me.calculated_route_income).toLocaleString("ru-RU")," ",v.client_sends_currency||"USDT"]})]})]}),me.route_type==="direct"&&a.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-blue-800 mb-1",children:" "}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[me.internal_company_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:I(me.internal_company_id)})]}),me.internal_company_account_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsxs("span",{className:"font-medium ml-1",children:[le(me.internal_company_account_id)?.name," (",le(me.internal_company_account_id)?.currency,")"]})]}),me.bank_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:_e(me.bank_commission_id)})]})]})]}),me.route_type==="exchange"&&a.jsxs("div",{className:"mt-2 p-2 bg-green-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-green-800 mb-1",children:""}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[me.crypto_account_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:Te(me.crypto_account_id)})]}),me.exchange_from_currency&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:me.exchange_from_currency})]}),me.exchange_amount&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Exchange Amount:"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(me.exchange_amount).toLocaleString("ru-RU")})]}),me.crypto_exchange_rate&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(me.crypto_exchange_rate).toFixed(4)})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-1",children:[me.agent_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Agent:"}),a.jsx("span",{className:"font-medium ml-1",children:_e(me.agent_commission_id)})]}),me.exchange_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Exchange:"}),a.jsx("span",{className:"font-medium ml-1",children:_e(me.exchange_commission_id)})]}),me.exchange_bank_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Bank:"}),a.jsx("span",{className:"font-medium ml-1",children:_e(me.exchange_bank_commission_id)})]})]})]}),me.route_type==="partner"&&a.jsxs("div",{className:"mt-2 p-2 bg-purple-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-purple-800 mb-1",children:""}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[me.partner_company_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:I(me.partner_company_id)})]}),me.amount_to_partner_usdt&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" (USDT):"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(me.amount_to_partner_usdt).toLocaleString("ru-RU")})]}),me.amount_partner_sends&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(me.amount_partner_sends).toLocaleString("ru-RU")})]}),me.partner_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:_e(me.partner_commission_id)})]})]})]}),me.route_type==="partner_50_50"&&a.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 rounded text-xs",children:[a.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:" 50-50"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[me.partner_50_50_company_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:I(me.partner_50_50_company_id)})]}),me.amount_to_partner_50_50_usdt&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" (USDT):"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(me.amount_to_partner_50_50_usdt).toLocaleString("ru-RU")})]}),me.amount_partner_50_50_sends&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:" :"}),a.jsx("span",{className:"font-medium ml-1",children:parseFloat(me.amount_partner_50_50_sends).toLocaleString("ru-RU")})]}),me.partner_50_50_commission_id&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:":"}),a.jsx("span",{className:"font-medium ml-1",children:_e(me.partner_50_50_commission_id)})]})]})]}),me.status!=="paid"&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:Es?a.jsx(kv,{transaction:me,accountBalances:B,onExecute:Je,onMarkPaid:L}):a.jsx("div",{className:"px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-md text-sm text-yellow-800",children:"     "})})]},me.id)})})]})},W)})})(),v.transactions.length===0&&a.jsx("p",{className:"text-center text-gray-500 py-4",children:" "})]})]}):a.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center text-gray-500",children:"    "})})]})]})}function kv({transaction:s,accountBalances:i,onExecute:c,onMarkPaid:o}){const[d,f]=N.useState(null);return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("select",{value:d||"",onChange:m=>f(parseInt(m.target.value)),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm",children:[a.jsx("option",{value:"",children:"   "}),i?.map(m=>a.jsxs("option",{value:m.id,children:[m.account_name," - ",parseFloat(m.balance).toLocaleString(void 0,{maximumFractionDigits:10})," ",m.currency||""]},m.id))]}),a.jsx("button",{onClick:()=>{d&&c.mutate({transactionId:s.id,accountBalanceId:d})},disabled:c.isPending||!d,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 text-sm whitespace-nowrap",children:c.isPending?"...":" "}),a.jsx("button",{onClick:()=>o.mutate(s.id),disabled:o.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 text-sm whitespace-nowrap",children:" "})]})}function Qv(){const[s,i]=N.useState(()=>{const m=new Date;return m.setMonth(m.getMonth()-1),m.toISOString().split("T")[0]}),[c,o]=N.useState(()=>new Date().toISOString().split("T")[0]),{data:d,isLoading:f}=fe({queryKey:["statistics","dashboard",s,c],queryFn:async()=>{const m=new URLSearchParams;return s&&m.append("start_date",s),c&&m.append("end_date",c),(await te.get(`/api/statistics/dashboard?${m.toString()}`)).data}});return f?a.jsx("div",{className:"text-center py-8",children:"Loading statistics..."}):d?a.jsx("div",{className:"px-4 py-6",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Financial Dashboard"}),a.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:s,onChange:m=>i(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:c,onChange:m=>o(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>{const m=new Date,x=new Date;x.setMonth(x.getMonth()-1),i(x.toISOString().split("T")[0]),o(m.toISOString().split("T")[0])},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Last Month"})}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>{const m=new Date,x=new Date;x.setDate(x.getDate()-7),i(x.toISOString().split("T")[0]),o(m.toISOString().split("T")[0])},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Last Week"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Deals"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.summary.total_deals}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.summary.completed_deals," completed"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Volume"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[d.summary.total_eur.toLocaleString()," EUR"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.summary.total_usdt.toLocaleString()," USDT"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Profit"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[d.summary.total_profit_usdt.toLocaleString()," USDT"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg: ",d.summary.avg_profit_per_deal.toLocaleString()," USDT/deal"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"ROI"}),a.jsxs("p",{className:`text-2xl font-bold ${d.summary.roi_percent>=0?"text-green-600":"text-red-600"}`,children:[d.summary.roi_percent.toFixed(2),"%"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Cost: ",d.summary.total_cost_usdt.toLocaleString()," USDT"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:a.jsx("div",{className:"bg-white shadow rounded-lg p-6 border-l-4 border-red-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Client Debt"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[d.summary.total_debt_eur?.toLocaleString()||"0"," EUR"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.summary.deals_with_debt||0," deals with debt"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Deals by Status"}),a.jsx("div",{className:"space-y-3",children:Object.entries(d.status_breakdown).map(([m,x])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:m.replace("_"," ")}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${x/d.summary.total_deals*100}%`}})}),a.jsx("span",{className:"text-sm font-medium w-12 text-right",children:x})]})]},m))})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transactions by Route"}),a.jsx("div",{className:"space-y-3",children:d.route_breakdown.map(m=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:m.route.replace("_"," ")}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:[m.count," transactions"]}),a.jsxs("span",{className:"text-sm font-medium",children:[m.total_cost.toLocaleString()," USDT"]})]})]},m.route))})]})]}),d.client_debts&&d.client_debts.length>0&&a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 text-red-600",children:"Client Debts"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Debt (EUR)"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deals Count"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Oldest Debt"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Days Since"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.client_debts.map(m=>a.jsxs("tr",{className:m.days_since_oldest>30?"bg-red-50":m.days_since_oldest>14?"bg-yellow-50":"",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m.client_name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600",children:[m.total_debt.toLocaleString()," EUR"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.deals_count}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.oldest_debt_date?new Date(m.oldest_debt_date).toLocaleDateString():"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("span",{className:m.days_since_oldest>30?"text-red-600 font-semibold":m.days_since_oldest>14?"text-yellow-600":"text-gray-500",children:[m.days_since_oldest," days"]})})]},m.client_id))})]})})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Clients"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Volume (EUR)"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deals Count"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg per Deal"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.top_clients.map((m,x)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m.name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[m.total_volume.toLocaleString()," EUR"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.deal_count}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(m.total_volume/m.deal_count).toLocaleString()," EUR"]})]},x))})]})})]}),d.daily_stats.length>0&&a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Daily Profit Trend"}),a.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:d.daily_stats.map(m=>{const x=Math.max(...d.daily_stats.map(p=>p.profit),1),g=m.profit/x*100;return a.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-full bg-green-500 rounded-t hover:bg-green-600 transition-colors relative group",style:{height:`${Math.max(g,5)}%`},title:`${new Date(m.date).toLocaleDateString()}: ${m.profit.toLocaleString()} USDT`,children:a.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[m.profit.toLocaleString()," USDT",a.jsx("br",{}),m.deals," deals"]})}),a.jsx("span",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left",children:new Date(m.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},m.date)})})]})]})}):a.jsx("div",{className:"text-center py-8",children:"No data available"})}function Kv(){const[s,i]=N.useState(()=>{const m=new Date;return m.setMonth(m.getMonth()-1),m.toISOString().split("T")[0]}),[c,o]=N.useState(()=>new Date().toISOString().split("T")[0]),{data:d,isLoading:f}=fe({queryKey:["statistics","dashboard",s,c,"accountant"],queryFn:async()=>{const m=new URLSearchParams;return s&&m.append("start_date",s),c&&m.append("end_date",c),(await te.get(`/api/statistics/dashboard?${m.toString()}`)).data}});return f?a.jsx("div",{className:"text-center py-8",children:"Loading statistics..."}):d?a.jsx("div",{className:"px-4 py-6",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Financial Dashboard (Accountant)"}),a.jsx(xu,{showProjected:!0}),a.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:s,onChange:m=>i(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:c,onChange:m=>o(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>{const m=new Date,x=new Date;x.setMonth(x.getMonth()-1),i(x.toISOString().split("T")[0]),o(m.toISOString().split("T")[0])},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Last Month"})}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>{const m=new Date,x=new Date;x.setDate(x.getDate()-7),i(x.toISOString().split("T")[0]),o(m.toISOString().split("T")[0])},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Last Week"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Deals"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d.summary.total_deals}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.summary.completed_deals," completed"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Volume"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[d.summary.total_eur.toLocaleString()," EUR"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.summary.total_usdt.toLocaleString()," USDT"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Profit"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[d.summary.total_profit_usdt.toLocaleString()," USDT"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Avg: ",d.summary.avg_profit_per_deal.toLocaleString()," USDT/deal"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})}),a.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"ROI"}),a.jsxs("p",{className:`text-2xl font-bold ${d.summary.roi_percent>=0?"text-green-600":"text-red-600"}`,children:[d.summary.roi_percent.toFixed(2),"%"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Cost: ",d.summary.total_cost_usdt.toLocaleString()," USDT"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:a.jsx("div",{className:"bg-white shadow rounded-lg p-6 border-l-4 border-red-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Client Debt"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[d.summary.total_debt_eur?.toLocaleString()||"0"," EUR"]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[d.summary.deals_with_debt||0," deals with debt"]})]}),a.jsx("div",{className:"text-3xl",children:""})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Deals by Status"}),a.jsx("div",{className:"space-y-3",children:Object.entries(d.status_breakdown).map(([m,x])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:m.replace("_"," ")}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${x/d.summary.total_deals*100}%`}})}),a.jsx("span",{className:"text-sm font-medium w-12 text-right",children:x})]})]},m))})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Transactions by Route"}),a.jsx("div",{className:"space-y-3",children:d.route_breakdown.map(m=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600 capitalize",children:m.route.replace("_"," ")}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:[m.count," transactions"]}),a.jsxs("span",{className:"text-sm font-medium",children:[m.total_cost.toLocaleString()," USDT"]})]})]},m.route))})]})]}),d.client_debts&&d.client_debts.length>0&&a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 text-red-600",children:"Client Debts"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Debt (EUR)"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deals Count"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Oldest Debt"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Days Since"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.client_debts.map(m=>a.jsxs("tr",{className:m.days_since_oldest>30?"bg-red-50":m.days_since_oldest>14?"bg-yellow-50":"",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m.client_name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600",children:[m.total_debt.toLocaleString()," EUR"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.deals_count}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.oldest_debt_date?new Date(m.oldest_debt_date).toLocaleDateString():"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("span",{className:m.days_since_oldest>30?"text-red-600 font-semibold":m.days_since_oldest>14?"text-yellow-600":"text-gray-500",children:[m.days_since_oldest," days"]})})]},m.client_id))})]})})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top Clients"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Volume (EUR)"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deals Count"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Avg per Deal"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.top_clients.map((m,x)=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:m.name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[m.total_volume.toLocaleString()," EUR"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.deal_count}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(m.total_volume/m.deal_count).toLocaleString()," EUR"]})]},x))})]})})]}),d.daily_stats.length>0&&a.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Daily Profit Trend"}),a.jsx("div",{className:"h-64 flex items-end justify-between space-x-1",children:d.daily_stats.map(m=>{const x=Math.max(...d.daily_stats.map(p=>p.profit),1),g=m.profit/x*100;return a.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-full bg-green-500 rounded-t hover:bg-green-600 transition-colors relative group",style:{height:`${Math.max(g,5)}%`},title:`${new Date(m.date).toLocaleDateString()}: ${m.profit.toLocaleString()} USDT`,children:a.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:[m.profit.toLocaleString()," USDT",a.jsx("br",{}),m.deals," deals"]})}),a.jsx("span",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left",children:new Date(m.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},m.date)})})]})]})}):a.jsx("div",{className:"text-center py-8",children:"No data available"})}function Yv(){const s=it(),[i,c]=N.useState(null),[o,d]=N.useState(""),[f,m]=N.useState(""),[x,g]=N.useState(""),[p,y]=N.useState({}),{data:_,isLoading:T}=fe({queryKey:["senior-manager-pending"],queryFn:async()=>(await te.get("/api/senior-manager/pending")).data}),{data:A}=fe({queryKey:["senior-manager-deal",i],queryFn:async()=>i?(await te.get(`/api/senior-manager/${i}`)).data:null,enabled:!!i});N.useEffect(()=>{if(A){m(A.total_eur_request||""),g(A.client_rate_percent||"1.0");const q={};A.transactions?.forEach(j=>{q[j.id]={route_type:j.route_type||"",exchange_rate:j.exchange_rate||"",partner_bonus_rate:j.partner_bonus_rate||"",partner_cost_rate:j.partner_cost_rate||"",exchange_fee_percent:j.exchange_fee_percent||"",intermediary_fee_percent:j.intermediary_fee_percent||"",bank_fee_fix_eur:j.bank_fee_fix_eur||"",bank_fee_percent:j.bank_fee_percent||""}}),y(q)}},[A]);const w=q=>{if(q==null||q==="")return null;const j=parseFloat(q);return isNaN(j)?null:j},M=je({mutationFn:async q=>(await te.post(`/api/senior-manager/${q}/approve`,{comment:o||void 0,total_eur_request:w(f),client_rate_percent:w(x),transaction_routes:Object.entries(p).map(([k,H])=>({transaction_id:parseInt(k),route_type:H.route_type||null,exchange_rate:w(H.exchange_rate),partner_bonus_rate:w(H.partner_bonus_rate),partner_cost_rate:w(H.partner_cost_rate),exchange_fee_percent:w(H.exchange_fee_percent),intermediary_fee_percent:w(H.intermediary_fee_percent),bank_fee_fix_eur:w(H.bank_fee_fix_eur),bank_fee_percent:w(H.bank_fee_percent)}))})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["senior-manager-pending"]}),c(null),d("")}}),S=je({mutationFn:async q=>(await te.post(`/api/senior-manager/${q}/reject`,{comment:o})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["senior-manager-pending"]}),c(null),d("")}}),z=(q,j,k)=>{y(H=>({...H,[q]:{...H[q],[j]:k}}))};return T?a.jsx("div",{className:"p-6",children:"Loading..."}):a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Deal Review"}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Pending Deals"}),_&&_.length>0?a.jsx("div",{className:"space-y-2",children:_.map(q=>a.jsxs("div",{onClick:()=>c(q.id),className:`p-3 border rounded cursor-pointer hover:bg-gray-50 ${i===q.id?"border-indigo-500 bg-indigo-50":""}`,children:[a.jsxs("div",{className:"font-medium",children:["Deal #",q.id]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Client: ",q.client_name||"N/A"]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Amount: ",parseFloat(q.total_eur_request).toLocaleString()," EUR"]}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(q.created_at).toLocaleDateString()})]},q.id))}):a.jsx("p",{className:"text-gray-500",children:"No pending deals"})]}),i&&A&&a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Deal Details #",A.id]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Total Amount (EUR)"}),a.jsx("input",{type:"number",step:"0.01",value:f,onChange:q=>m(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:x,onChange:q=>g(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium mb-2",children:"Transactions"}),a.jsx("div",{className:"space-y-3",children:A.transactions?.map(q=>a.jsxs("div",{className:"border rounded p-3",children:[a.jsxs("div",{className:"font-medium mb-2",children:[q.target_company," - ",parseFloat(q.amount_eur).toLocaleString()," EUR"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Route"}),a.jsxs("select",{value:p[q.id]?.route_type||"",onChange:j=>z(q.id,"route_type",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",children:[a.jsx("option",{value:"",children:"Select..."}),a.jsx("option",{value:"exchange",children:"Exchange"}),a.jsx("option",{value:"supply_partner",children:"Supply Partner"}),a.jsx("option",{value:"direct_payment",children:"Direct Payment"}),a.jsx("option",{value:"split_50_50",children:"Split 50/50"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Exchange Rate"}),a.jsx("input",{type:"number",step:"0.000001",value:p[q.id]?.exchange_rate||"",onChange:j=>z(q.id,"exchange_rate",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),p[q.id]?.route_type==="supply_partner"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Partner Bonus Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:p[q.id]?.partner_bonus_rate||"",onChange:j=>z(q.id,"partner_bonus_rate",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Partner Cost Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",value:p[q.id]?.partner_cost_rate||"",onChange:j=>z(q.id,"partner_cost_rate",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]}),p[q.id]?.route_type==="exchange"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Exchange Fee (%)"}),a.jsx("input",{type:"number",step:"0.01",value:p[q.id]?.exchange_fee_percent||"",onChange:j=>z(q.id,"exchange_fee_percent",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Intermediary Fee (%)"}),a.jsx("input",{type:"number",step:"0.01",value:p[q.id]?.intermediary_fee_percent||"",onChange:j=>z(q.id,"intermediary_fee_percent",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]}),p[q.id]?.route_type==="direct_payment"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Bank Fee Fix (EUR)"}),a.jsx("input",{type:"number",step:"0.01",value:p[q.id]?.bank_fee_fix_eur||"",onChange:j=>z(q.id,"bank_fee_fix_eur",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs mb-1",children:"Bank Fee (%)"}),a.jsx("input",{type:"number",step:"0.01",value:p[q.id]?.bank_fee_percent||"",onChange:j=>z(q.id,"bank_fee_percent",j.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]})]})]},q.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Comment"}),a.jsx("textarea",{value:o,onChange:q=>d(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>M.mutate(i),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",disabled:M.isPending,children:"Approve"}),a.jsx("button",{onClick:()=>S.mutate(i),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",disabled:S.isPending||!o,children:"Reject"})]})]})]})]})]})}function Gv(){const{user:s}=qn(),[i,c]=N.useState("clients"),o=["clients","companies"];return(s?.role==="accountant"||s?.role==="director")&&o.push("balances"),(s?.role==="senior_manager"||s?.role==="accountant"||s?.role==="director")&&o.push("agents","route-commissions","internal-companies","currencies","templates","manager-commissions","settings"),a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:""}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:o.map(d=>a.jsxs("button",{onClick:()=>c(d),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${i===d?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[d==="clients"&&"",d==="companies"&&"",d==="balances"&&"  ",d==="agents"&&"",d==="route-commissions"&&" ",d==="internal-companies"&&" ",d==="currencies"&&"",d==="templates"&&"",d==="manager-commissions"&&" ",d==="settings"&&""]},d))})}),i==="clients"&&a.jsx(Xv,{}),i==="companies"&&a.jsx(Vv,{}),i==="balances"&&a.jsx($v,{}),i==="agents"&&a.jsx(Jv,{}),i==="route-commissions"&&a.jsx(Pv,{}),i==="internal-companies"&&a.jsx(Wv,{}),i==="currencies"&&a.jsx(ej,{}),i==="templates"&&a.jsx(tj,{}),i==="manager-commissions"&&a.jsx(nj,{}),i==="settings"&&a.jsx(aj,{})]})}function Xv(){const s=it(),[i,c]=N.useState(!1),[o,d]=N.useState(null),[f,m]=N.useState({name:"",contact_info:"",notes:""}),[x,g]=N.useState(!1),[p,y]=N.useState(null),{data:_}=fe({queryKey:["reference-clients"],queryFn:async()=>(await te.get("/api/reference/clients")).data}),T=je({mutationFn:async j=>(await te.post("/api/reference/clients",j)).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-clients"]}),c(!1),m({name:"",contact_info:"",notes:""})}}),A=je({mutationFn:async({id:j,data:k})=>(await te.put(`/api/reference/clients/${j}`,k)).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-clients"]}),c(!1),d(null)}}),w=je({mutationFn:async j=>{await te.delete(`/api/reference/clients/${j}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["reference-clients"]}),g(!1),y(null)}}),M=j=>{y(j),g(!0)},S=()=>{p&&w.mutate(p.id)},z=j=>{d(j),m({name:j.name,contact_info:j.contact_info||"",notes:j.notes||""}),c(!0)},q=()=>{o?A.mutate({id:o.id,data:f}):T.mutate(f)};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Clients"}),a.jsx("button",{onClick:()=>{d(null),m({name:"",contact_info:"",notes:""}),c(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Client"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact Info"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_?.map(j=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:j.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:j.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j.contact_info||"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>z(j),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>M(j),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},j.id))})]})}),i&&a.jsx(Ht,{title:o?"Edit Client":"Add Client",onClose:()=>{c(!1),d(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:f.name,onChange:j=>m({...f,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Contact Info"}),a.jsx("input",{type:"text",value:f.contact_info,onChange:j=>m({...f,contact_info:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),a.jsx("textarea",{value:f.notes,onChange:j=>m({...f,notes:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{c(!1),d(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:q,disabled:!f.name||T.isPending||A.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:o?"Save":"Create"})]})]})}),x&&p&&a.jsx(hn,{title:"Delete Client",message:`Are you sure you want to delete client "${p.name}"? This action cannot be undone.`,onConfirm:S,onCancel:()=>{g(!1),y(null)},isDeleting:w.isPending})]})}function Vv(){const[s,i]=N.useState(!1),[c,o]=N.useState(null),d=it(),[f,m]=N.useState(!1),[x,g]=N.useState(null),[p,y]=N.useState({client_id:"",name:"",contact_info:"",notes:""}),[_,T]=N.useState(!1),[A,w]=N.useState(null),{data:M}=fe({queryKey:["reference-clients"],queryFn:async()=>(await te.get("/api/reference/clients")).data}),{data:S}=fe({queryKey:["reference-companies"],queryFn:async()=>(await te.get("/api/reference/companies")).data}),z=je({mutationFn:async Z=>(await te.post("/api/reference/companies",Z)).data,onSuccess:()=>{d.invalidateQueries({queryKey:["reference-companies"]}),m(!1),y({client_id:"",name:"",contact_info:"",notes:""})}}),q=je({mutationFn:async({id:Z,data:C})=>(await te.put(`/api/reference/companies/${Z}`,C)).data,onSuccess:()=>{d.invalidateQueries({queryKey:["reference-companies"]}),m(!1),g(null)}}),j=je({mutationFn:async Z=>{await te.delete(`/api/reference/companies/${Z}`)},onSuccess:()=>{d.invalidateQueries({queryKey:["reference-companies"]}),T(!1),w(null)}}),k=Z=>{w(Z),T(!0)},H=()=>{A&&j.mutate(A.id)},ue=Z=>{g(Z),y({client_id:Z.client_id.toString(),name:Z.name,contact_info:Z.contact_info||"",notes:Z.notes||""}),m(!0)},X=()=>{x?q.mutate({id:x.id,data:p}):z.mutate({...p,client_id:parseInt(p.client_id)})};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Companies"}),a.jsx("button",{onClick:()=>{g(null),y({client_id:"",name:"",contact_info:"",notes:""}),m(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Company"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S?.map(Z=>{const C=M?.find(B=>B.id===Z.client_id);return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Z.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:C?.name||Z.client_id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:Z.name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>{o(Z.id),i(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"Company Accounts"}),a.jsx("button",{onClick:()=>ue(Z),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>k(Z),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},Z.id)})})]})}),f&&a.jsx(Ht,{title:x?"Edit Company":"Add Company",onClose:()=>{m(!1),g(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client *"}),a.jsxs("select",{value:p.client_id,onChange:Z=>y({...p,client_id:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select Client"}),M?.map(Z=>a.jsx("option",{value:Z.id,children:Z.name},Z.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:p.name,onChange:Z=>y({...p,name:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Contact Info"}),a.jsx("input",{type:"text",value:p.contact_info,onChange:Z=>y({...p,contact_info:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),a.jsx("textarea",{value:p.notes,onChange:Z=>y({...p,notes:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{m(!1),g(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:X,disabled:!p.name||!p.client_id||z.isPending||q.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:x?"Save":"Create"})]})]})}),s&&c&&a.jsx(Zv,{companyId:c,onClose:()=>{i(!1),o(null)}}),_&&A&&a.jsx(hn,{title:"Delete Company",message:`Are you sure you want to delete company "${A.name}"? This action cannot be undone.`,onConfirm:H,onCancel:()=>{T(!1),w(null)},isDeleting:j.isPending})]})}function Zv({companyId:s,onClose:i}){const c=it(),[o,d]=N.useState(!1),[f,m]=N.useState(null),[x,g]=N.useState({account_name:"",account_number:"",currency:""}),[p,y]=N.useState(!1),[_,T]=N.useState(null),{data:A}=fe({queryKey:["reference-company",s],queryFn:async()=>(await te.get(`/api/reference/companies/${s}`)).data}),{data:w}=fe({queryKey:["reference-company-accounts",s],queryFn:async()=>(await te.get("/api/reference/company-accounts")).data}),M=w?.filter(X=>X.company_id===s)||[],S=je({mutationFn:async X=>(await te.post("/api/reference/company-accounts",{...X,company_id:s})).data,onSuccess:()=>{c.invalidateQueries({queryKey:["reference-company-accounts"]}),d(!1),g({account_name:"",account_number:"",currency:""})}}),z=je({mutationFn:async({id:X,data:Z})=>(await te.put(`/api/reference/company-accounts/${X}`,Z)).data,onSuccess:()=>{c.invalidateQueries({queryKey:["reference-company-accounts"]}),d(!1),m(null)}}),q=je({mutationFn:async X=>{await te.delete(`/api/reference/company-accounts/${X}`)},onSuccess:()=>{c.invalidateQueries({queryKey:["reference-company-accounts"]}),y(!1),T(null)}}),j=X=>{T(X),y(!0)},k=()=>{_&&q.mutate(_.id)},H=X=>{m(X),g({account_name:X.account_name,account_number:X.account_number,currency:X.currency||""}),d(!0)},ue=()=>{f?z.mutate({id:f.id,data:x}):S.mutate(x)};return a.jsx(Ht,{title:`Company Accounts - ${A?.name||"Company"}`,onClose:i,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Accounts"}),a.jsx("button",{onClick:()=>{m(null),g({account_name:"",account_number:"",currency:""}),d(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Account"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Account Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Account Number"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Currency"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.length>0?M.map(X=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:X.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:X.account_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.account_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:X.currency||"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>H(X),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>j(X),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},X.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No accounts found"})})})]})}),o&&a.jsx(Ht,{title:f?"Edit Account":"Add Account",onClose:()=>{d(!1),m(null)},zIndex:60,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Name *"}),a.jsx("input",{type:"text",value:x.account_name,onChange:X=>g({...x,account_name:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., IBAN EUR",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Number *"}),a.jsx("input",{type:"text",value:x.account_number,onChange:X=>g({...x,account_number:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"IBAN or wallet address",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Currency"}),a.jsx("input",{type:"text",value:x.currency,onChange:X=>g({...x,currency:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"EUR, USD, BTC, USDT, etc."})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{d(!1),m(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:ue,disabled:!x.account_name||!x.account_number||S.isPending||z.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:f?"Save":"Create"})]})]})}),p&&_&&a.jsx(hn,{title:"Delete Account",message:`Are you sure you want to delete account "${_.account_name}"? This action cannot be undone.`,onConfirm:k,onCancel:()=>{y(!1),T(null)},isDeleting:q.isPending,zIndex:70})]})})}function $v(){const s=it(),[i,c]=N.useState(!1),[o,d]=N.useState(!1),[f,m]=N.useState(null),[x,g]=N.useState(null),[p,y]=N.useState({account_name:"",balance:"",currency:"",notes:"",comment:""}),[_,T]=N.useState(!1),[A,w]=N.useState(null),{data:M}=fe({queryKey:["account-balances"],queryFn:async()=>(await te.get("/api/account-balances")).data}),{data:S}=fe({queryKey:["account-balance-history",f],queryFn:async()=>f?(await te.get(`/api/account-balances/${f}/history`)).data:[],enabled:!!f&&o}),z=je({mutationFn:async Z=>(await te.post("/api/account-balances",{account_name:Z.account_name,balance:parseFloat(Z.balance),currency:Z.currency||null,notes:Z.notes||null})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["account-balances"]}),c(!1),y({account_name:"",balance:"",currency:"",notes:"",comment:""})}}),q=je({mutationFn:async({id:Z,data:C})=>(await te.put(`/api/account-balances/${Z}`,{account_name:C.account_name,balance:C.balance?parseFloat(C.balance):void 0,currency:C.currency||null,notes:C.notes||null,comment:C.comment||null})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["account-balances"]}),c(!1),g(null)}}),j=je({mutationFn:async Z=>{await te.delete(`/api/account-balances/${Z}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["account-balances"]}),T(!1),w(null)}}),k=Z=>{w(Z),T(!0)},H=()=>{A&&j.mutate(A.id)},ue=Z=>{g(Z),y({account_name:Z.account_name,balance:Z.balance.toString(),currency:Z.currency||"",notes:Z.notes||"",comment:""}),c(!0)},X=()=>{if(x){if(parseFloat(p.balance)!==parseFloat(x.balance)&&!p.comment){alert("     ");return}q.mutate({id:x.id,data:p})}else z.mutate(p)};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Account Balances"}),a.jsx("button",{onClick:()=>{g(null),y({account_name:"",balance:"",currency:"",notes:"",comment:""}),c(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Balance"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Currency"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M?.map(Z=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Z.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:Z.account_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:parseFloat(Z.balance).toLocaleString(void 0,{maximumFractionDigits:10})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Z.currency||"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>{m(Z.id),d(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"History"}),a.jsx("button",{onClick:()=>ue(Z),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>k(Z),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},Z.id))})]})}),i&&a.jsx(Ht,{title:x?"Edit Balance":"Add Balance",onClose:()=>{c(!1),g(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:p.account_name,onChange:Z=>y({...p,account_name:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"EUR, IBAN EUR, BTC Wallet, etc.",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Balance *"}),a.jsx("input",{type:"number",step:"0.0000000001",value:p.balance,onChange:Z=>y({...p,balance:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Currency"}),a.jsx("input",{type:"text",value:p.currency,onChange:Z=>y({...p,currency:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"EUR, USD, BTC, USDT, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),a.jsx("textarea",{value:p.notes,onChange:Z=>y({...p,notes:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3})]}),x&&parseFloat(p.balance)!==parseFloat(x.balance)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Comment (required when changing balance) *"}),a.jsx("textarea",{value:p.comment,onChange:Z=>y({...p,comment:Z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{c(!1),g(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:X,disabled:!p.account_name||!p.balance||z.isPending||q.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:x?"Save":"Create"})]})]})}),o&&f&&a.jsx(Ht,{title:"Balance Change History",onClose:()=>{d(!1),m(null)},children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Previous"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"New"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Change"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Comment"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S?.map(Z=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(Z.created_at).toLocaleString()}),a.jsx("td",{className:"px-4 py-2 text-sm",children:parseFloat(Z.previous_balance).toLocaleString(void 0,{maximumFractionDigits:10})}),a.jsx("td",{className:"px-4 py-2 text-sm",children:parseFloat(Z.new_balance).toLocaleString(void 0,{maximumFractionDigits:10})}),a.jsxs("td",{className:`px-4 py-2 text-sm ${parseFloat(Z.change_amount)<0?"text-red-600":"text-green-600"}`,children:[parseFloat(Z.change_amount)>0?"+":"",parseFloat(Z.change_amount).toLocaleString(void 0,{maximumFractionDigits:10})]}),a.jsx("td",{className:"px-4 py-2 text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${Z.change_type==="auto"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:Z.change_type==="auto"?"Automatic":"Manual"})}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:Z.comment||"-"})]},Z.id))})]})})}),_&&A&&a.jsx(hn,{title:"Delete Account Balance",message:`Are you sure you want to delete account balance "${A.account_name}"? This action cannot be undone.`,onConfirm:H,onCancel:()=>{T(!1),w(null)},isDeleting:j.isPending})]})}function Ht({title:s,children:i,onClose:c,zIndex:o=50}){return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:o},children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:s}),a.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700",children:""})]}),i]})})}function hn({title:s,message:i,onConfirm:c,onCancel:o,isDeleting:d,zIndex:f=60}){return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:f},children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-red-600",children:s}),a.jsx("p",{className:"text-gray-700 mb-6",children:i}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:o,disabled:d,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:c,disabled:d,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:d?"Deleting...":"Delete"})]})]})})}function Jv(){const s=it(),[i,c]=N.useState(!1),[o,d]=N.useState(null),[f,m]=N.useState({name:"",commission_percent:""}),[x,g]=N.useState(!1),[p,y]=N.useState(null),{data:_}=fe({queryKey:["reference-agents"],queryFn:async()=>(await te.get("/api/reference/agents")).data}),T=je({mutationFn:async j=>(await te.post("/api/reference/agents",{name:j.name,commission_percent:parseFloat(j.commission_percent)})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-agents"]}),c(!1),m({name:"",commission_percent:""})}}),A=je({mutationFn:async({id:j,data:k})=>(await te.put(`/api/reference/agents/${j}`,{name:k.name,commission_percent:parseFloat(k.commission_percent)})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-agents"]}),c(!1),d(null)}}),w=je({mutationFn:async j=>{await te.delete(`/api/reference/agents/${j}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["reference-agents"]}),g(!1),y(null)}}),M=j=>{y(j),g(!0)},S=()=>{p&&w.mutate(p.id)},z=j=>{d(j),m({name:j.name,commission_percent:j.commission_percent.toString()}),c(!0)},q=()=>{o?A.mutate({id:o.id,data:f}):T.mutate(f)};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Agents"}),a.jsx("button",{onClick:()=>{d(null),m({name:"",commission_percent:""}),c(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Agent"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission %"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_?.map(j=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:j.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:j.name}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[j.commission_percent,"%"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>z(j),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>M(j),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},j.id))})]})}),i&&a.jsx(Ht,{title:o?"Edit Agent":"Add Agent",onClose:()=>{c(!1),d(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:f.name,onChange:j=>m({...f,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Commission % *"}),a.jsx("input",{type:"number",step:"0.01",value:f.commission_percent,onChange:j=>m({...f,commission_percent:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"-0.5 or 0.5",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{c(!1),d(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:q,disabled:!f.name||!f.commission_percent||T.isPending||A.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:o?"Save":"Create"})]})]})}),x&&p&&a.jsx(hn,{title:"Delete Agent",message:`Are you sure you want to delete agent "${p.name}"?`,onConfirm:S,onCancel:()=>{g(!1),y(null)},isDeleting:w.isPending})]})}function Pv(){const s=it(),[i,c]=N.useState(!1),[o,d]=N.useState(null),[f,m]=N.useState({route_type:"",commission_percent:"",commission_fixed:"",is_fixed_currency:!1,currency:""}),[x,g]=N.useState(!1),[p,y]=N.useState(null),_=[{value:"direct",label:"Direct Transfer"},{value:"exchange",label:"Exchange"},{value:"agent",label:"Agent"},{value:"partner",label:"Partner"},{value:"partner_50_50",label:"Partner 50-50"}],{data:T}=fe({queryKey:["reference-route-commissions"],queryFn:async()=>(await te.get("/api/reference/route-commissions")).data}),A=je({mutationFn:async k=>(await te.post("/api/reference/route-commissions",{route_type:k.route_type,commission_percent:k.commission_percent?parseFloat(k.commission_percent):null,commission_fixed:k.commission_fixed?parseFloat(k.commission_fixed):null,is_fixed_currency:k.is_fixed_currency,currency:k.currency||null})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-route-commissions"]}),c(!1),m({route_type:"",commission_percent:"",commission_fixed:"",is_fixed_currency:!1,currency:""})}}),w=je({mutationFn:async({id:k,data:H})=>(await te.put(`/api/reference/route-commissions/${k}`,{commission_percent:H.commission_percent?parseFloat(H.commission_percent):null,commission_fixed:H.commission_fixed?parseFloat(H.commission_fixed):null,is_fixed_currency:H.is_fixed_currency,currency:H.currency||null})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-route-commissions"]}),c(!1),d(null)}}),M=je({mutationFn:async k=>{await te.delete(`/api/reference/route-commissions/${k}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["reference-route-commissions"]}),g(!1),y(null)}}),S=k=>{y(k),g(!0)},z=()=>{p&&M.mutate(p.id)},q=k=>{d(k),m({route_type:k.route_type,commission_percent:k.commission_percent?.toString()||"",commission_fixed:k.commission_fixed?.toString()||"",is_fixed_currency:k.is_fixed_currency,currency:k.currency||""}),c(!0)},j=()=>{o?w.mutate({id:o.id,data:f}):A.mutate(f)};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Route Commissions"}),a.jsx("button",{onClick:()=>{d(null),m({route_type:"",commission_percent:"",commission_fixed:"",is_fixed_currency:!1,currency:""}),c(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Route Commission"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Route Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Commission"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T?.map(k=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:k.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:k.route_type}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:k.is_fixed_currency?`${k.commission_fixed} ${k.currency||""}`:`${k.commission_percent}%`}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:k.is_fixed_currency?"Fixed":"Percent"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>q(k),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>S(k),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},k.id))})]})}),i&&a.jsx(Ht,{title:o?"Edit Route Commission":"Add Route Commission",onClose:()=>{c(!1),d(null)},children:a.jsxs("div",{className:"space-y-4",children:[!o&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Route Type *"}),a.jsxs("select",{value:f.route_type,onChange:k=>m({...f,route_type:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[a.jsx("option",{value:"",children:"Select Route Type"}),_.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))]})]}),a.jsx("div",{children:a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a.jsx("input",{type:"checkbox",checked:f.is_fixed_currency,onChange:k=>m({...f,is_fixed_currency:k.target.checked}),className:"mr-2"}),"Fixed Currency"]})}),f.is_fixed_currency?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Commission (Fixed) *"}),a.jsx("input",{type:"number",step:"0.01",value:f.commission_fixed,onChange:k=>m({...f,commission_fixed:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Currency *"}),a.jsx("input",{type:"text",value:f.currency,onChange:k=>m({...f,currency:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"EUR, USD, etc.",required:!0})]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Commission % *"}),a.jsx("input",{type:"number",step:"0.01",value:f.commission_percent,onChange:k=>m({...f,commission_percent:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"-0.3 or 0.6",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{c(!1),d(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:j,disabled:!f.route_type&&!o||!f.commission_percent&&!f.is_fixed_currency||f.is_fixed_currency&&(!f.commission_fixed||!f.currency)||A.isPending||w.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:o?"Save":"Create"})]})]})}),x&&p&&a.jsx(hn,{title:"Delete Route Commission",message:`Are you sure you want to delete route commission for "${p.route_type}"?`,onConfirm:z,onCancel:()=>{g(!1),y(null)},isDeleting:M.isPending})]})}function Wv(){const s=it(),[i,c]=N.useState(!1),[o,d]=N.useState(null),[f,m]=N.useState({name:"",contact_info:"",notes:""}),[x,g]=N.useState(!1),[p,y]=N.useState(null),[_,T]=N.useState(!1),[A,w]=N.useState(null),{data:M}=fe({queryKey:["reference-internal-companies"],queryFn:async()=>(await te.get("/api/reference/internal-companies")).data}),S=je({mutationFn:async X=>(await te.post("/api/reference/internal-companies",X)).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-internal-companies"]}),c(!1),m({name:"",contact_info:"",notes:""})}}),z=je({mutationFn:async({id:X,data:Z})=>(await te.put(`/api/reference/internal-companies/${X}`,Z)).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-internal-companies"]}),c(!1),d(null)}}),q=je({mutationFn:async X=>{await te.delete(`/api/reference/internal-companies/${X}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["reference-internal-companies"]}),g(!1),y(null)}}),j=X=>{y(X),g(!0)},k=()=>{p&&q.mutate(p.id)},H=X=>{d(X),m({name:X.name,contact_info:X.contact_info||"",notes:X.notes||""}),c(!0)},ue=()=>{o?z.mutate({id:o.id,data:f}):S.mutate(f)};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Internal Companies"}),a.jsx("button",{onClick:()=>{d(null),m({name:"",contact_info:"",notes:""}),c(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Internal Company"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact Info"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M?.map(X=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:X.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:X.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:X.contact_info||"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>{w(X.id),T(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"Accounts"}),a.jsx("button",{onClick:()=>H(X),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>j(X),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},X.id))})]})}),i&&a.jsx(Ht,{title:o?"Edit Internal Company":"Add Internal Company",onClose:()=>{c(!1),d(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:f.name,onChange:X=>m({...f,name:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Contact Info"}),a.jsx("input",{type:"text",value:f.contact_info,onChange:X=>m({...f,contact_info:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Notes"}),a.jsx("textarea",{value:f.notes,onChange:X=>m({...f,notes:X.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{c(!1),d(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:ue,disabled:!f.name||S.isPending||z.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:o?"Save":"Create"})]})]})}),_&&A&&a.jsx(Iv,{companyId:A,onClose:()=>{T(!1),w(null)}}),x&&p&&a.jsx(hn,{title:"Delete Internal Company",message:`Are you sure you want to delete internal company "${p.name}"?`,onConfirm:k,onCancel:()=>{g(!1),y(null)},isDeleting:q.isPending})]})}function Iv({companyId:s,onClose:i}){const c=it(),[o,d]=N.useState(!1),[f,m]=N.useState(null),[x,g]=N.useState({account_name:"",account_number:"",currency:"",balance:"0"}),[p,y]=N.useState(!1),[_,T]=N.useState(null),[A,w]=N.useState(!1),[M,S]=N.useState(null),{data:z}=fe({queryKey:["reference-internal-company",s],queryFn:async()=>(await te.get(`/api/reference/internal-companies/${s}`)).data}),{data:q}=fe({queryKey:["reference-internal-company-accounts",s],queryFn:async()=>(await te.get("/api/reference/internal-company-accounts")).data}),j=q?.filter(R=>R.company_id===s)||[],{data:k}=fe({queryKey:["internal-company-account-history",M],queryFn:async()=>M?(await te.get(`/api/reference/internal-company-accounts/${M}/history`)).data:[],enabled:!!M&&A}),H=je({mutationFn:async R=>(await te.post("/api/reference/internal-company-accounts",{...R,company_id:s,balance:parseFloat(R.balance)})).data,onSuccess:()=>{c.invalidateQueries({queryKey:["reference-internal-company-accounts"]}),d(!1),g({account_name:"",account_number:"",currency:"",balance:"0"})}}),ue=je({mutationFn:async({id:R,data:v})=>(await te.put(`/api/reference/internal-company-accounts/${R}`,{...v,balance:v.balance?parseFloat(v.balance):void 0})).data,onSuccess:()=>{c.invalidateQueries({queryKey:["reference-internal-company-accounts"]}),d(!1),m(null)}}),X=je({mutationFn:async R=>{await te.delete(`/api/reference/internal-company-accounts/${R}`)},onSuccess:()=>{c.invalidateQueries({queryKey:["reference-internal-company-accounts"]}),y(!1),T(null)}}),Z=R=>{T(R),y(!0)},C=()=>{_&&X.mutate(_.id)},B=R=>{m(R),g({account_name:R.account_name,account_number:R.account_number,currency:R.currency,balance:R.balance.toString()}),d(!0)},V=()=>{f?ue.mutate({id:f.id,data:x}):H.mutate(x)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:50},children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-bold",children:["Internal Company Accounts - ",z?.name||"Company"]}),a.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:""})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Accounts"}),a.jsx("button",{onClick:()=>{m(null),g({account_name:"",account_number:"",currency:"",balance:"0"}),d(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Account"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Account Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Account Number"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Currency"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.length>0?j.map(R=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:R.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:R.account_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:R.account_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:R.currency}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:parseFloat(R.balance).toLocaleString()}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>{S(R.id),w(!0)},className:"text-blue-600 hover:text-blue-900 mr-3",children:"History"}),a.jsx("button",{onClick:()=>B(R),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>Z(R),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},R.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No accounts found"})})})]})}),o&&a.jsx(Ht,{title:f?"Edit Account":"Add Account",onClose:()=>{d(!1),m(null)},zIndex:60,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Name *"}),a.jsx("input",{type:"text",value:x.account_name,onChange:R=>g({...x,account_name:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., IBAN EUR",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Account Number *"}),a.jsx("input",{type:"text",value:x.account_number,onChange:R=>g({...x,account_number:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"IBAN or wallet address",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Currency *"}),a.jsx("input",{type:"text",value:x.currency,onChange:R=>g({...x,currency:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"EUR, USD, BTC, USDT, etc.",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Balance *"}),a.jsx("input",{type:"number",step:"0.0000000001",value:x.balance,onChange:R=>g({...x,balance:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{d(!1),m(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:V,disabled:!x.account_name||!x.account_number||!x.currency||H.isPending||ue.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:f?"Save":"Create"})]})]})}),p&&_&&a.jsx(hn,{title:"Delete Account",message:`Are you sure you want to delete account "${_.account_name}"?`,onConfirm:C,onCancel:()=>{y(!1),T(null)},isDeleting:X.isPending,zIndex:70}),A&&M&&a.jsx(Ht,{title:"Balance Change History",onClose:()=>{w(!1),S(null)},zIndex:60,children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Previous"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"New"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Change"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Comment"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k&&k.length>0?k.map(R=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(R.created_at).toLocaleString()}),a.jsx("td",{className:"px-4 py-2 text-sm",children:parseFloat(R.previous_balance).toLocaleString(void 0,{maximumFractionDigits:2})}),a.jsx("td",{className:"px-4 py-2 text-sm",children:parseFloat(R.new_balance).toLocaleString(void 0,{maximumFractionDigits:2})}),a.jsxs("td",{className:`px-4 py-2 text-sm ${parseFloat(R.change_amount)<0?"text-red-600":"text-green-600"}`,children:[parseFloat(R.change_amount)>0?"+":"",parseFloat(R.change_amount).toLocaleString(void 0,{maximumFractionDigits:2})]}),a.jsx("td",{className:"px-4 py-2 text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${R.change_type==="auto"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:R.change_type==="auto"?"Automatic":"Manual"})}),a.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:R.comment||"-"})]},R.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-4 py-4 text-center text-sm text-gray-500",children:"No history records found"})})})]})})})]})]})})}function ej(){const s=it(),[i,c]=N.useState(!1),[o,d]=N.useState(null),[f,m]=N.useState({code:"",name:"",is_crypto:!1}),[x,g]=N.useState(!1),[p,y]=N.useState(null),{data:_}=fe({queryKey:["reference-currencies"],queryFn:async()=>(await te.get("/api/reference/currencies")).data}),T=je({mutationFn:async j=>(await te.post("/api/reference/currencies",{code:j.code.toUpperCase(),name:j.name,is_crypto:j.is_crypto})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-currencies"]}),c(!1),m({code:"",name:"",is_crypto:!1})}}),A=je({mutationFn:async({id:j,data:k})=>(await te.put(`/api/reference/currencies/${j}`,{name:k.name,is_crypto:k.is_crypto})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["reference-currencies"]}),c(!1),d(null)}}),w=je({mutationFn:async j=>{await te.delete(`/api/reference/currencies/${j}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["reference-currencies"]}),g(!1),y(null)}}),M=j=>{y(j),g(!0)},S=()=>{p&&w.mutate(p.id)},z=j=>{d(j),m({code:j.code,name:j.name,is_crypto:j.is_crypto}),c(!0)},q=()=>{o?A.mutate({id:o.id,data:f}):T.mutate(f)};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Currencies"}),a.jsx("button",{onClick:()=>{d(null),m({code:"",name:"",is_crypto:!1}),c(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"+ Add Currency"})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_?.map(j=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:j.id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:j.code}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:j.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.is_crypto?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:j.is_crypto?"Crypto":"Fiat"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>z(j),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>M(j),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},j.id))})]})}),i&&a.jsx(Ht,{title:o?"Edit Currency":"Add Currency",onClose:()=>{c(!1),d(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Code *"}),a.jsx("input",{type:"text",value:f.code,onChange:j=>m({...f,code:j.target.value.toUpperCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"EUR, USD, USDT, BTC, etc.",required:!0,disabled:!!o}),o&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Currency code cannot be changed"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:f.name,onChange:j=>m({...f,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Euro, US Dollar, Tether, Bitcoin, etc.",required:!0})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:f.is_crypto,onChange:j=>m({...f,is_crypto:j.target.checked}),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Cryptocurrency"})]})}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{c(!1),d(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:q,disabled:!f.code||!f.name||T.isPending||A.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:o?"Save":"Create"})]})]})}),x&&p&&a.jsx(hn,{title:"Delete Currency",message:`Are you sure you want to delete currency "${p.code} - ${p.name}"?`,onConfirm:S,onCancel:()=>{g(!1),y(null)},isDeleting:w.isPending})]})}function tj(){const s=it(),[i,c]=N.useState(!1),[o,d]=N.useState(null),[f,m]=N.useState({name:"",description:"",client_sends_currency:"",client_receives_currency:""}),[x,g]=N.useState(!1),[p,y]=N.useState(null),{data:_}=fe({queryKey:["templates"],queryFn:async()=>(await te.get("/api/templates?active_only=false")).data}),T=je({mutationFn:async j=>{await te.delete(`/api/templates/${j}`)},onSuccess:()=>{s.invalidateQueries({queryKey:["templates"]}),g(!1),y(null)}}),A=je({mutationFn:async({id:j,data:k})=>(await te.put(`/api/templates/${j}`,k)).data,onSuccess:()=>{s.invalidateQueries({queryKey:["templates"]}),c(!1),d(null)}}),w=j=>{y(j),g(!0)},M=()=>{p&&T.mutate(p.id)},S=j=>{d(j),m({name:j.name,description:j.description||"",client_sends_currency:j.client_sends_currency||"",client_receives_currency:j.client_receives_currency||""}),c(!0)},z=()=>{o&&A.mutate({id:o.id,data:f})},q=async j=>{try{await te.put(`/api/templates/${j.id}`,{is_active:!j.is_active}),s.invalidateQueries({queryKey:["templates"]})}catch(k){console.error("Error toggling template:",k)}};return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Deal Templates"}),a.jsx("p",{className:"text-sm text-gray-500",children:"     "})]}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Currencies"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[_?.map(j=>a.jsxs("tr",{className:j.is_active?"":"bg-gray-50 opacity-60",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:j.id}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("div",{className:"font-medium",children:j.name}),j.description&&a.jsx("div",{className:"text-xs text-gray-500",children:j.description})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[j.client_sends_currency||"","  ",j.client_receives_currency||""]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${j.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.is_active?"Active":"Inactive"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[a.jsx("button",{onClick:()=>q(j),className:"text-blue-600 hover:text-blue-900 mr-3",children:j.is_active?"Deactivate":"Activate"}),a.jsx("button",{onClick:()=>S(j),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"Edit"}),a.jsx("button",{onClick:()=>w(j),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},j.id)),(!_||_.length===0)&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No templates found. Create templates from the New Deal page."})})]})]})}),i&&a.jsx(Ht,{title:"Edit Template",onClose:()=>{c(!1),d(null)},children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:f.name,onChange:j=>m({...f,name:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),a.jsx("textarea",{value:f.description,onChange:j=>m({...f,description:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:2})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client Sends Currency"}),a.jsx("input",{type:"text",value:f.client_sends_currency,onChange:j=>m({...f,client_sends_currency:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"USDT"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"Client Receives Currency"}),a.jsx("input",{type:"text",value:f.client_receives_currency,onChange:j=>m({...f,client_receives_currency:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"EUR"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{c(!1),d(null)},className:"px-4 py-2 border border-gray-300 rounded-md",children:"Cancel"}),a.jsx("button",{onClick:z,disabled:!f.name||A.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:"Save"})]})]})}),x&&p&&a.jsx(hn,{title:"Delete Template",message:`Are you sure you want to delete template "${p.name}"?`,onConfirm:M,onCancel:()=>{g(!1),y(null)},isDeleting:T.isPending})]})}function nj(){const s=it(),[i,c]=N.useState(null),[o,d]=N.useState(""),{data:f,isLoading:m}=fe({queryKey:["manager-commissions"],queryFn:async()=>(await te.get("/api/reference/manager-commissions")).data}),x=je({mutationFn:async({userId:_,commission:T})=>(await te.put(`/api/reference/manager-commissions/${_}`,{commission_percent:parseFloat(T)})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["manager-commissions"]}),c(null),d("")}}),g=_=>{c(_.user_id),d(_.commission_percent)},p=_=>{x.mutate({userId:_,commission:o})},y=_=>({manager:"",senior_manager:" ",accountant:"",director:""})[_]||_;return m?a.jsx("div",{className:"text-center py-8",children:"..."}):a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-between mb-4",children:a.jsx("h2",{className:"text-lg font-semibold",children:" "})}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:" %"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[f?.map(_=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:_.user_id}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:_.user_email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:_.user_name||""}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:"px-2 py-1 rounded text-xs bg-gray-100",children:y(_.user_role)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i===_.user_id?a.jsx("input",{type:"number",step:"0.01",value:o,onChange:T=>d(T.target.value),className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-sm",placeholder:"%"}):a.jsxs("span",{className:"font-medium",children:[parseFloat(_.commission_percent).toFixed(2),"%"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i===_.user_id?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>p(_.user_id),disabled:x.isPending,className:"text-green-600 hover:text-green-900 mr-3",children:" "}),a.jsx("button",{onClick:()=>{c(null),d("")},className:"text-gray-600 hover:text-gray-900",children:" "})]}):a.jsx("button",{onClick:()=>g(_),className:"text-indigo-600 hover:text-indigo-900",children:""})})]},_.user_id)),(!f||f.length===0)&&a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-sm text-gray-500",children:" "})})]})]})}),a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:""}),a.jsx("p",{className:"text-xs text-blue-700",children:"        ,   . ,     200 USDT    10%,    20 USDT.   =  -  ."})]})]})}function aj(){const s=it(),[i,c]=N.useState(null),[o,d]=N.useState(""),{data:f,isLoading:m}=fe({queryKey:["system-settings"],queryFn:async()=>(await te.get("/api/reference/settings")).data}),x=je({mutationFn:async({key:_,value:T})=>(await te.put(`/api/reference/settings/${_}`,{value:T})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["system-settings"]}),s.invalidateQueries({queryKey:["default-client-rate"]}),c(null),d("")}}),g=_=>{c(_.key),d(_.value||"")},p=_=>{x.mutate({key:_,value:o})},y=_=>({default_client_rate:"    (%)"})[_]||_;return m?a.jsx("div",{className:"text-center py-8",children:"..."}):a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-between mb-4",children:a.jsx("h2",{className:"text-lg font-semibold",children:" "})}),a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:""})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[f?.map(_=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:y(_.key)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i===_.key?a.jsx("input",{type:"text",value:o,onChange:T=>d(T.target.value),className:"w-32 px-2 py-1 border border-gray-300 rounded-md text-sm"}):a.jsx("span",{className:"font-medium",children:_.value||""})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:_.description||""}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i===_.key?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>p(_.key),disabled:x.isPending,className:"text-green-600 hover:text-green-900 mr-3",children:" "}),a.jsx("button",{onClick:()=>{c(null),d("")},className:"text-gray-600 hover:text-gray-900",children:" "})]}):a.jsx("button",{onClick:()=>g(_),className:"text-indigo-600 hover:text-indigo-900",children:""})})]},_.key)),(!f||f.length===0)&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:" .         ."})})]})]})})]})}function sj(){const{data:s,isLoading:i}=fe({queryKey:["client-debts"],queryFn:async()=>(await te.get("/api/accountant/client-debts")).data}),c=o=>{const d=new Date(o),m=Math.abs(new Date().getTime()-d.getTime());return Math.ceil(m/(1e3*60*60*24))};return i?a.jsx("div",{className:"text-center py-8",children:"Loading..."}):a.jsxs("div",{className:"p-6",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Client Debts"}),s&&s.length>0?a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deal ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Amount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Debt"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Days Since Creation"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(o=>{const d=parseFloat(o.client_debt_amount||"0"),f=parseFloat(o.client_paid_amount||"0"),m=parseFloat(o.total_eur_request),x=c(o.created_at),g=x>30;return a.jsxs("tr",{className:g?"bg-red-50":d>0?"bg-yellow-50":"",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs(an,{to:`/deals/${o.id}`,className:"text-indigo-600 hover:text-indigo-900",children:["#",o.id]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.client_name||"N/A"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[m.toLocaleString()," EUR"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[f.toLocaleString()," EUR"]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600",children:[d.toLocaleString()," EUR"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("span",{className:g?"text-red-600 font-semibold":"",children:[x," ",x===1?"day":"days"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800",children:o.status.replace("_"," ")})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx(an,{to:`/deals/${o.id}`,className:"text-indigo-600 hover:text-indigo-900",children:"Open"})})]},o.id)})})]})}):a.jsx("div",{className:"bg-white shadow rounded-lg p-8 text-center",children:a.jsx("p",{className:"text-gray-500",children:"No debts"})})]})}function lj(){const[s,i]=N.useState(""),[c,o]=N.useState(""),[d,f]=N.useState("completed"),{data:m,isLoading:x}=fe({queryKey:["deals","analytics",d],queryFn:async()=>{const S={};return d!=="all"&&(S.status_filter=d),(await te.get("/api/deals",{params:S})).data}}),{data:g,isLoading:p}=fe({queryKey:["deals-with-income",m?.map(S=>S.id)],queryFn:async()=>m?await Promise.all(m.map(async z=>{try{const q=await te.get(`/api/deals/${z.id}/income`);return{...z,income:q.data}}catch{return z}})):[],enabled:!!m&&m.length>0}),y=g?.filter(S=>{const z=new Date(S.created_at);return!(s&&z<new Date(s)||c&&z>new Date(c))})||[],_=[],T=new Map;y.forEach(S=>{const z=S.client_id;T.has(z)||T.set(z,{client_id:z,client_name:S.client_name||`Client #${z}`,deals:[],total_client_rate:0,total_margin:0,total_profit:0,total_amount:0});const q=T.get(z);q.deals.push(S);const j=parseFloat(S.client_rate_percent||"0"),k=S.income?parseFloat(S.income.income_percent):0,H=S.income?parseFloat(S.income.net_profit):0,ue=parseFloat(S.total_eur_request);q.total_client_rate+=j*ue,q.total_margin+=k*ue,q.total_profit+=H,q.total_amount+=ue}),T.forEach((S,z)=>{S.total_amount>0&&(S.total_client_rate=S.total_client_rate/S.total_amount,S.total_margin=S.total_margin/S.total_amount),_.push(S)}),_.sort((S,z)=>z.total_profit-S.total_profit);const A={total_client_rate:_.reduce((S,z)=>S+z.total_client_rate*z.total_amount,0)/(_.reduce((S,z)=>S+z.total_amount,0)||1),total_margin:_.reduce((S,z)=>S+z.total_margin*z.total_amount,0)/(_.reduce((S,z)=>S+z.total_amount,0)||1),total_profit:_.reduce((S,z)=>S+z.total_profit,0),total_amount:_.reduce((S,z)=>S+z.total_amount,0),total_deals:y.length},w=Math.max(..._.map(S=>S.deals.length),0),M=x||p;return a.jsxs("div",{className:"px-4 py-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:" "}),a.jsx("div",{className:"bg-white shadow rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),a.jsx("input",{type:"date",value:s,onChange:S=>i(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" "}),a.jsx("input",{type:"date",value:c,onChange:S=>o(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:""}),a.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[a.jsx("option",{value:"all",children:""}),a.jsx("option",{value:"completed",children:""}),a.jsx("option",{value:"execution",children:" "}),a.jsx("option",{value:"senior_manager_approved",children:""})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsx("button",{onClick:()=>{i(""),o(""),f("completed")},className:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:" "})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:" "}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A.total_deals})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:" "}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[A.total_amount.toLocaleString("ru-RU",{maximumFractionDigits:0})," EUR"]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:" "}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[A.total_margin.toFixed(2),"%"]})]}),a.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:" "}),a.jsxs("p",{className:`text-2xl font-bold ${A.total_profit>=0?"text-green-600":"text-red-600"}`,children:[A.total_profit.toLocaleString("ru-RU",{maximumFractionDigits:2})," USDT"]})]})]})]}),M?a.jsx("div",{className:"text-center py-8",children:" ..."}):a.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky left-0 bg-gray-50 z-10",children:""}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"%  "}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"%-"}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"%  "}),Array.from({length:Math.min(w,10)},(S,z)=>a.jsxs("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:[" ",z+1]},z)),w>10&&a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"..."}),a.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider bg-indigo-50",children:"  "})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[_.map(S=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 sticky left-0 bg-white z-10",children:S.client_name}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center text-gray-600",children:[S.total_client_rate.toFixed(2),"%"]}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:a.jsxs("span",{className:S.total_margin>=0?"text-green-600":"text-red-600",children:[S.total_margin.toFixed(2),"%"]})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:a.jsxs("span",{className:S.total_profit>=0?"text-green-600":"text-red-600",children:[(S.total_profit/(S.total_amount||1)*100).toFixed(2),"%"]})}),Array.from({length:Math.min(w,10)},(z,q)=>{const j=S.deals[q];return a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:j?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("span",{className:"text-xs text-gray-500",children:["#",j.id]}),a.jsx("span",{className:j.income?.is_profitable?"text-green-600":"text-red-600",children:j.income?parseFloat(j.income.net_profit).toLocaleString("ru-RU",{maximumFractionDigits:0}):""})]}):a.jsx("span",{className:"text-gray-300",children:""})},q)}),w>10&&a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center text-gray-500",children:["+",S.deals.length-10]}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center font-bold bg-indigo-50",children:a.jsx("span",{className:S.total_profit>=0?"text-green-600":"text-red-600",children:S.total_profit.toLocaleString("ru-RU",{maximumFractionDigits:2})})})]},S.client_id)),a.jsxs("tr",{className:"bg-gray-100 font-bold",children:[a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 sticky left-0 bg-gray-100 z-10",children:""}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center text-gray-900",children:[A.total_client_rate.toFixed(2),"%"]}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:a.jsxs("span",{className:A.total_margin>=0?"text-green-600":"text-red-600",children:[A.total_margin.toFixed(2),"%"]})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center",children:a.jsxs("span",{className:A.total_profit>=0?"text-green-600":"text-red-600",children:[(A.total_profit/(A.total_amount||1)*100).toFixed(2),"%"]})}),Array.from({length:Math.min(w,10)},(S,z)=>a.jsx("td",{className:"px-4 py-3"},z)),w>10&&a.jsx("td",{className:"px-4 py-3"}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-center bg-indigo-100",children:a.jsxs("span",{className:A.total_profit>=0?"text-green-700":"text-red-700",children:[A.total_profit.toLocaleString("ru-RU",{maximumFractionDigits:2})," USDT"]})})]})]})]})})}),a.jsxs("div",{className:"mt-6 bg-white shadow rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:":"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsxs("li",{children:[" ",a.jsx("strong",{children:"%  "}),"        "]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"%-"}),"    ,       ( = )"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"%  "}),"        "]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:" N"}),"      "]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"  "}),"        "]}),a.jsx("li",{className:"text-green-600",children:"      ()"}),a.jsx("li",{className:"text-red-600",children:"      ()"})]})]})]})}const ij=new Mb;function rj(){const{user:s,loading:i}=qn();return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsxs(Dg,{children:[a.jsx(Ct,{path:"/login",element:s?a.jsx(ir,{to:"/",replace:!0}):a.jsx(Jb,{})}),a.jsx(Ct,{path:"/",element:a.jsx(tn,{children:a.jsx(nn,{children:a.jsx(Av,{})})})}),a.jsx(Ct,{path:"/deals/new",element:a.jsx(tn,{allowedRoles:["manager","accountant"],children:a.jsx(nn,{children:a.jsx(Bv,{})})})}),a.jsx(Ct,{path:"/deals/:id",element:a.jsx(tn,{children:a.jsx(nn,{children:a.jsx(Mv,{})})})}),a.jsx(Ct,{path:"/deals/:id/edit",element:a.jsx(tn,{allowedRoles:["accountant"],children:a.jsx(nn,{children:a.jsx(zv,{})})})}),a.jsx(Ct,{path:"/accountant",element:a.jsx(tn,{allowedRoles:["accountant"],children:a.jsx(nn,{children:a.jsx(Hv,{})})})}),a.jsx(Ct,{path:"/accountant/dashboard",element:a.jsx(tn,{allowedRoles:["accountant"],children:a.jsx(nn,{children:a.jsx(Kv,{})})})}),a.jsx(Ct,{path:"/director/dashboard",element:a.jsx(tn,{allowedRoles:["director"],children:a.jsx(nn,{children:a.jsx(Qv,{})})})}),a.jsx(Ct,{path:"/senior-manager",element:a.jsx(tn,{allowedRoles:["senior_manager"],children:a.jsx(nn,{children:a.jsx(Yv,{})})})}),a.jsx(Ct,{path:"/references",element:a.jsx(tn,{allowedRoles:["manager","senior_manager","accountant","director"],children:a.jsx(nn,{children:a.jsx(Gv,{})})})}),a.jsx(Ct,{path:"/debts",element:a.jsx(tn,{allowedRoles:["manager","accountant"],children:a.jsx(nn,{children:a.jsx(sj,{})})})}),a.jsx(Ct,{path:"/analytics",element:a.jsx(tn,{allowedRoles:["accountant","senior_manager","director"],children:a.jsx(nn,{children:a.jsx(lj,{})})})}),a.jsx(Ct,{path:"*",element:a.jsx(ir,{to:"/",replace:!0})})]})}function cj(){return a.jsx(Ub,{client:ij,children:a.jsx($b,{children:a.jsx(eb,{children:a.jsx(oj,{children:a.jsx(rj,{})})})})})}class oj extends O0.Component{constructor(i){super(i),this.state={hasError:!1,error:null}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,c){console.error("Error caught by boundary:",i,c)}render(){return this.state.hasError?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white rounded-lg shadow-md max-w-md",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:this.state.error?.message||"Unknown error"}),a.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.href="/"},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Go to Home"})]})}):this.props.children}}F0.createRoot(document.getElementById("root")).render(a.jsx(N.StrictMode,{children:a.jsx(cj,{})}));
